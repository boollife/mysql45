<html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport"
          content="width=device-width,initial-scale=1,maximum-scale=1,minimum-scale=1,user-scalable=no,viewport-fit=cover">
    <meta name="format-detection" content="telephone=no">
    <style type="text/css">

#watermark {

  position: relative;
  overflow: hidden;
}

#watermark .x {
  position: absolute;
  top: 800;
  left: 400;
  color: #3300ff;
  font-size: 50px;
  pointer-events: none;
  opacity:0.3;
  filter:Alpha(opacity=50);
  
  
}
    </style>


    <style type="text/css">
 html{color:#333;-webkit-text-size-adjust:100%;-ms-text-size-adjust:100%;text-rendering:optimizelegibility;font-family:Helvetica Neue,PingFang SC,Verdana,Microsoft Yahei,Hiragino Sans GB,Microsoft Sans Serif,WenQuanYi Micro Hei,sans-serif}html.borderbox *,html.borderbox :after,html.borderbox :before{box-sizing:border-box}article,aside,blockquote,body,button,code,dd,details,dl,dt,fieldset,figcaption,figure,footer,form,h1,h2,h3,h4,h5,h6,header,hr,input,legend,li,menu,nav,ol,p,pre,section,td,textarea,th,ul{margin:0;padding:0}article,aside,details,figcaption,figure,footer,header,menu,nav,section{display:block}audio,canvas,video{display:inline-block}body,button,input,select,textarea{font:300 1em/1.8 PingFang SC,Lantinghei SC,Microsoft Yahei,Hiragino Sans GB,Microsoft Sans Serif,WenQuanYi Micro Hei,Helvetica,sans-serif}button::-moz-focus-inner,input::-moz-focus-inner{padding:0;border:0}table{border-collapse:collapse;border-spacing:0}fieldset,img{border:0}blockquote{position:relative;color:#999;font-weight:400;border-left:1px solid #1abc9c;padding-left:1em;margin:1em 3em 1em 2em}@media only screen and (max-width:640px){blockquote{margin:1em 0}}abbr,acronym{border-bottom:1px dotted;font-variant:normal}abbr{cursor:help}del{text-decoration:line-through}address,caption,cite,code,dfn,em,th,var{font-style:normal;font-weight:400}ol,ul{list-style:none}caption,th{text-align:left}q:after,q:before{content:""}sub,sup{font-size:75%;line-height:0;position:relative}:root sub,:root sup{vertical-align:baseline}sup{top:-.5em}sub{bottom:-.25em}a{color:#1abc9c}a:hover{text-decoration:underline}.typo a{border-bottom:1px solid #1abc9c}.typo a:hover{border-bottom-color:#555;color:#555}.typo a:hover,a,ins{text-decoration:none}.typo-u,u{text-decoration:underline}mark{background:#fffdd1;border-bottom:1px solid #ffedce;padding:2px;margin:0 5px}code,pre,pre tt{font-family:Courier,Courier New,monospace}pre{background:hsla(0,0%,97%,.7);border:1px solid #ddd;padding:1em 1.5em;display:block;-webkit-overflow-scrolling:touch}hr{border:none;border-bottom:1px solid #cfcfcf;margin-bottom:.8em;height:10px}.typo-small,figcaption,small{font-size:.9em;color:#888}b,strong{font-weight:700;color:#000}[draggable]{cursor:move}.clearfix:after,.clearfix:before{content:"";display:table}.clearfix:after{clear:both}.clearfix{zoom:1}.textwrap,.textwrap td,.textwrap th{word-wrap:break-word;word-break:break-all}.textwrap-table{table-layout:fixed}.serif{font-family:Palatino,Optima,Georgia,serif}.typo-dl,.typo-form,.typo-hr,.typo-ol,.typo-p,.typo-pre,.typo-table,.typo-ul,.typo dl,.typo form,.typo hr,.typo ol,.typo p,.typo pre,.typo table,.typo ul,blockquote{margin-bottom:1rem}h1,h2,h3,h4,h5,h6{font-family:PingFang SC,Helvetica Neue,Verdana,Microsoft Yahei,Hiragino Sans GB,Microsoft Sans Serif,WenQuanYi Micro Hei,sans-serif;color:#000;line-height:1.35}.typo-h1,.typo-h2,.typo-h3,.typo-h4,.typo-h5,.typo-h6,.typo h1,.typo h2,.typo h3,.typo h4,.typo h5,.typo h6{margin-top:1.2em;margin-bottom:.6em;line-height:1.35}.typo-h1,.typo h1{font-size:2em}.typo-h2,.typo h2{font-size:1.8em}.typo-h3,.typo h3{font-size:1.6em}.typo-h4,.typo h4{font-size:1.4em}.typo-h5,.typo-h6,.typo h5,.typo h6{font-size:1.2em}.typo-ul,.typo ul{margin-left:1.3em;list-style:disc}.typo-ol,.typo ol{list-style:decimal;margin-left:1.9em}.typo-ol ol,.typo-ol ul,.typo-ul ol,.typo-ul ul,.typo li ol,.typo li ul{margin-bottom:.8em;margin-left:2em}.typo-ol ul,.typo-ul ul,.typo li ul{list-style:circle}.typo-table td,.typo-table th,.typo table caption,.typo table td,.typo table th{border:1px solid #ddd;padding:.5em 1em;color:#666}.typo-table th,.typo table th{background:#fbfbfb}.typo-table thead th,.typo table thead th{background:hsla(0,0%,95%,.7)}.typo table caption{border-bottom:none}.typo-input,.typo-textarea{-webkit-appearance:none;border-radius:0}.typo-em,.typo em,caption,legend{color:#000;font-weight:inherit}.typo-em{position:relative}.typo-em:after{position:absolute;top:.65em;left:0;width:100%;overflow:hidden;white-space:nowrap;content:"\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB"}.typo img{max-width:100%}.common-content{font-weight:400;color:#353535;line-height:1.75rem;white-space:normal;word-break:normal;font-size:1rem}.common-content img{display:block;max-width:100%;background-color:#eee}.common-content audio,.common-content video{width:100%;background-color:#eee}.common-content center,.common-content font{margin-top:1rem;display:inline-block}.common-content center{width:100%}.common-content pre{margin-top:1rem;padding-left:0;padding-right:0;position:relative;overflow:hidden}.common-content pre code{font-size:.8rem;font-family:Consolas,Liberation Mono,Menlo,monospace,Courier;display:block;width:100%;box-sizing:border-box;padding-left:1rem;padding-right:1rem;overflow-x:auto}.common-content hr{border:none;margin-top:1.5rem;margin-bottom:1.5rem;border-top:1px solid #f5f5f5;height:1px;background:none}.common-content b,.common-content h1,.common-content h2,.common-content h3,.common-content h4,.common-content h5,.common-content strong{font-weight:700}.common-content h1,.common-content h2{font-size:1.125rem;margin-bottom:.45rem}.common-content h3,.common-content h4,.common-content h5{font-size:1rem;margin-bottom:.45rem}.common-content p{font-weight:400;color:#353535;margin-top:.15rem}.common-content .orange{color:#ff5a05}.common-content .reference{font-size:1rem;color:#888}.custom-rich-content h1{margin-top:0;font-weight:400;font-size:15.25px;border-bottom:1px solid #eee;line-height:2.8}.custom-rich-content li,.custom-rich-content p{font-size:14px;color:#888;line-height:1.6}table.hljs-ln{margin-bottom:0;border-spacing:0;border-collapse:collapse}table.hljs-ln,table.hljs-ln tbody,table.hljs-ln td,table.hljs-ln tr{box-sizing:border-box}table.hljs-ln td{padding:0;border:0}table.hljs-ln td.hljs-ln-numbers{min-width:15px;color:rgba(27,31,35,.3);text-align:right;white-space:nowrap;cursor:pointer;user-select:none}table.hljs-ln td.hljs-ln-code,table.hljs-ln td.hljs-ln-numbers{font-family:SFMono-Regular,Consolas,Liberation Mono,Menlo,Courier,monospace;font-size:12px;line-height:20px;vertical-align:top}table.hljs-ln td.hljs-ln-code{position:relative;padding-right:10px;padding-left:10px;overflow:visible;color:#24292e;word-wrap:normal;white-space:pre}video::-webkit-media-controls{overflow:hidden!important}video::-webkit-media-controls-enclosure{width:calc(100% + 32px);margin-left:auto}.button-cancel{color:#888;border:1px solid #888;border-radius:3px;margin-right:12px}.button-cancel,.button-primary{-ms-flex-positive:1;flex-grow:1;height:35px;display:inline-block;font-size:15px;text-align:center;line-height:36px}.button-primary{color:#fff;background-color:#ff5a05;border-radius:3px}@font-face{font-family:iconfont;src:url(//at.alicdn.com/t/font_372689_bwwwtosxtzp.eot);src:url(//at.alicdn.com/t/font_372689_bwwwtosxtzp.eot#iefix) format("embedded-opentype"),url(//at.alicdn.com/t/font_372689_bwwwtosxtzp.woff) format("woff"),url(//at.alicdn.com/t/font_372689_bwwwtosxtzp.ttf) format("truetype"),url(//at.alicdn.com/t/font_372689_bwwwtosxtzp.svg#iconfont) format("svg")}@font-face{font-family:player-font;src:url(//at.alicdn.com/t/font_509397_1cyjv4o90qiod2t9.eot);src:url(//at.alicdn.com/t/font_509397_1cyjv4o90qiod2t9.eot#iefix) format("embedded-opentype"),url(//at.alicdn.com/t/font_509397_1cyjv4o90qiod2t9.woff) format("woff"),url(//at.alicdn.com/t/font_509397_1cyjv4o90qiod2t9.ttf) format("truetype"),url(//at.alicdn.com/t/font_509397_1cyjv4o90qiod2t9.svg#player-font) format("svg")}.iconfont{font-family:iconfont!important;font-size:16px;font-style:normal;-webkit-font-smoothing:antialiased;-webkit-text-stroke-width:.2px;-moz-osx-font-smoothing:grayscale}html{background:#fff;min-height:100%;-webkit-tap-highlight-color:rgba(0,0,0,0)}body{width:100%}body.fixed{overflow:hidden;position:fixed;width:100vw;height:100vh}i{font-style:normal}a{word-wrap:break-word;-webkit-tap-highlight-color:rgba(0,0,0,0)}a:hover{text-decoration:none}.fade-enter-active,.fade-leave-active{transition:opacity .3s}.fade-enter,.fade-leave-to{opacity:0}.MathJax,.MathJax_CHTML,.MathJax_MathContainer,.MathJax_MathML,.MathJax_PHTML,.MathJax_PlainSource,.MathJax_SVG{outline:0}.ios-app-switch .js-audit{display:none}._loading_wrap_{position:fixed;width:100vw;height:100vh;top:50%;left:50%;transform:translate(-50%,-50%);z-index:999}._loading_div_class_,._loading_wrap_{display:-ms-flexbox;display:flex;-ms-flex-pack:center;justify-content:center;-ms-flex-align:center;align-items:center}._loading_div_class_{word-wrap:break-word;padding:.5rem .75rem;text-align:center;z-index:9999;font-size:.6rem;max-width:60%;color:#fff;border-radius:.25rem;-ms-flex-direction:column;flex-direction:column}._loading_div_class_ .message{color:#353535;font-size:16px;line-height:3}.spinner{animation:circle-rotator 1.4s linear infinite}.spinner *{line-height:0;box-sizing:border-box}@keyframes circle-rotator{0%{transform:rotate(0deg)}to{transform:rotate(270deg)}}.path{stroke-dasharray:187;stroke-dashoffset:0;transform-origin:center;animation:circle-dash 1.4s ease-in-out infinite,circle-colors 5.6s ease-in-out infinite}@keyframes circle-colors{0%{stroke:#ff5a05}to{stroke:#ff5a05}}@keyframes circle-dash{0%{stroke-dashoffset:187}50%{stroke-dashoffset:46.75;transform:rotate(135deg)}to{stroke-dashoffset:187;transform:rotate(450deg)}}.confirm-box-wrapper,.confirm-box-wrapper .mask{position:absolute;top:0;left:0;right:0;bottom:0}.confirm-box-wrapper .mask{background:rgba(0,0,0,.6)}.confirm-box-wrapper .confirm-box{position:fixed;top:50%;left:50%;width:267px;background:#fff;transform:translate(-50%,-50%);border-radius:7px}.confirm-box-wrapper .confirm-box .head{margin:0 18px;font-size:18px;text-align:center;line-height:65px;border-bottom:1px solid #d9d9d9}.confirm-box-wrapper .confirm-box .body{padding:18px;padding-bottom:0;color:#353535;font-size:12.5px;max-height:150px;overflow:auto}.confirm-box-wrapper .confirm-box .foot{display:-ms-flexbox;display:flex;-ms-flex-direction:row;flex-direction:row;padding:18px}.confirm-box-wrapper .confirm-box .foot .button-cancel{border:1px solid #d9d9d9}.hljs{display:block;overflow-x:auto;padding:.5em;color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}




    </style>
    <style type="text/css">
        .button-cancel[data-v-87ffcada]{color:#888;border:1px solid #888;border-radius:3px;margin-right:12px}.button-cancel[data-v-87ffcada],.button-primary[data-v-87ffcada]{-webkit-box-flex:1;-ms-flex-positive:1;flex-grow:1;height:35px;display:inline-block;font-size:15px;text-align:center;line-height:36px}.button-primary[data-v-87ffcada]{color:#fff;background-color:#ff5a05;border-radius:3px}.pd[data-v-87ffcada]{padding-left:1.375rem;padding-right:1.375rem}.article[data-v-87ffcada]{max-width:70rem;margin:0 auto}.article .article-unavailable[data-v-87ffcada]{color:#fa8919;font-size:15px;font-weight:600;line-height:24px;border-radius:5px;padding:12px;background-color:#f6f7fb;margin-top:20px}.article .article-unavailable .iconfont[data-v-87ffcada]{font-size:12px}.article .main[data-v-87ffcada]{padding:1.25rem 0;margin-bottom:52px}.article-title[data-v-87ffcada]{color:#353535;font-weight:400;line-height:1.65rem;font-size:1.34375rem}.article-info[data-v-87ffcada]{color:#888;font-size:.9375rem;margin-top:1.0625rem}.article-content[data-v-87ffcada]{margin-top:1.0625rem}.article-content.android video[data-v-87ffcada]::-webkit-media-controls-fullscreen-button{display:none}.copyright[data-v-87ffcada]{color:#b2b2b2;padding-bottom:20px;margin-top:20px;font-size:13px}.audio-player[data-v-87ffcada]{width:100%;margin:20px 0}.to-comment[data-v-87ffcada]{overflow:hidden;padding-top:10px;margin-bottom:-30px}.to-comment a.button-primary[data-v-87ffcada]{float:right;height:20px;font-size:12px;line-height:20px;padding:4px 8px;cursor:pointer}.article-comments[data-v-87ffcada]{margin-top:2rem}.article-comments h2[data-v-87ffcada]{text-align:center;color:#888;position:relative;z-index:1;margin-bottom:1rem}.article-comments h2[data-v-87ffcada]:before{border-top:1px dotted #888;content:"";position:absolute;top:56%;left:0;width:100%;z-index:-1}.article-comments h2 span[data-v-87ffcada]{font-size:15.25px;font-weight:400;padding:0 1rem;background:#fff;display:inline-block}.article-sub-bottom[data-v-87ffcada]{z-index:10;cursor:pointer}.switch-btns[data-v-87ffcada]{height:76px;cursor:pointer;padding-top:24px;padding-bottom:24px;border-bottom:10px solid #f6f7fb;position:relative}.switch-btns[data-v-87ffcada]:before{content:" ";height:1px;background:#e8e8e8;position:absolute;top:0;left:0;-webkit-box-sizing:border-box;box-sizing:border-box;left:1.375rem;right:1.375rem}.switch-btns .btn[data-v-87ffcada]{height:38px;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center}.switch-btns .btn .tag[data-v-87ffcada]{-webkit-box-flex:0;-ms-flex:0 0 62px;flex:0 0 62px;text-align:center;color:#888;font-size:14px;border-radius:10px;height:22px;line-height:22px;background:#f6f7fb;font-weight:400}.switch-btns .btn .txt[data-v-87ffcada]{margin-left:10px;-webkit-box-flex:1;-ms-flex:1 1 auto;flex:1 1 auto;color:#888;font-size:15px;height:22px;line-height:22px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;font-weight:400}@media (max-width:769px){.article .breadcrumb[data-v-87ffcada]{padding-top:10px;padding-bottom:10px}}





    </style>

    <style type="text/css">
        .comment-item{list-style-position:inside;width:100%;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row;margin-bottom:1rem}.comment-item a{border-bottom:none}.comment-item .avatar{width:2.625rem;height:2.625rem;-ms-flex-negative:0;flex-shrink:0;border-radius:50%}.comment-item .info{margin-left:.5rem;-webkit-box-flex:1;-ms-flex-positive:1;flex-grow:1}.comment-item .info .hd{width:100%;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row;-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;-webkit-box-align:center;-ms-flex-align:center;align-items:center}.comment-item .info .hd .username{color:#888;font-size:15.25px;font-weight:400;line-height:1.2}.comment-item .info .hd .control{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row;-webkit-box-align:center;-ms-flex-align:center;align-items:center}.comment-item .info .hd .control .btn-share{color:#888;font-size:.75rem;margin-right:1rem}.comment-item .info .hd .control .btn-praise{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row;-webkit-box-align:center;-ms-flex-align:center;align-items:center;font-size:15.25px;text-decoration:none}.comment-item .info .hd .control .btn-praise i{color:#888;display:inline-block;font-size:.75rem;margin-right:.3rem;margin-top:-.01rem}.comment-item .info .hd .control .btn-praise i.on,.comment-item .info .hd .control .btn-praise span{color:#ff5a05}.comment-item .info .bd{color:#353535;font-size:15.25px;font-weight:400;white-space:normal;word-break:break-all;line-height:1.6}.comment-item .info .time{color:#888;font-size:9px;line-height:1}.comment-item .info .reply .reply-hd{font-size:15.25px}.comment-item .info .reply .reply-hd span{margin-left:-12px;color:#888;font-weight:400}.comment-item .info .reply .reply-hd i{color:#ff5a05;font-size:15.25px}.comment-item .info .reply .reply-content{color:#353535;font-size:15.25px;font-weight:400;white-space:normal;word-break:break-all}.comment-item .info .reply .reply-time{color:#888;font-size:9px}




    </style>
</head>
<body>
<div id="app">


    <div data-v-87ffcada="" class="article" id="watermark">
        <div data-v-87ffcada="" class="main main-app">
            <h1 id='titlename' data-v-87ffcada="" class="article-title pd">
                02è®²æ—¥å¿—ç³»ç»Ÿï¼šä¸€æ¡SQLæ›´æ–°è¯­å¥æ˜¯å¦‚ä½•æ‰§è¡Œçš„
            </h1>
            <div data-v-87ffcada="" class="article-content typo common-content pd"><img data-v-87ffcada=""
                                                                                        src="https://static001.geekbang.org/resource/image/f6/f5/f613f6d2d8a72032c16b211f933c1cf5.jpg">

                <div>
                  <audio controls="controls" height="100" width="100">
                    <source id='filename' src="02è®²æ—¥å¿—ç³»ç»Ÿï¼šä¸€æ¡SQLæ›´æ–°è¯­å¥æ˜¯å¦‚ä½•æ‰§è¡Œçš„.mp3" type="audio/mp3" />
                    <embed height="100" width="100" src="02è®²æ—¥å¿—ç³»ç»Ÿï¼šä¸€æ¡SQLæ›´æ–°è¯­å¥æ˜¯å¦‚ä½•æ‰§è¡Œçš„.mp3" />
                  </audio>
                </div>
                <div data-v-87ffcada="" id="article-content" class="">
                    <div class="text">
                        <p>å‰é¢æˆ‘ä»¬ç³»ç»Ÿäº†è§£äº†ä¸€ä¸ªæŸ¥è¯¢è¯­å¥çš„æ‰§è¡Œæµç¨‹ï¼Œå¹¶ä»‹ç»äº†æ‰§è¡Œè¿‡ç¨‹ä¸­æ¶‰åŠçš„å¤„ç†æ¨¡å—ã€‚ç›¸ä¿¡ä½ è¿˜è®°å¾—ï¼Œä¸€æ¡æŸ¥è¯¢è¯­å¥çš„æ‰§è¡Œè¿‡ç¨‹ä¸€èˆ¬æ˜¯ç»è¿‡è¿æ¥å™¨ã€åˆ†æå™¨ã€ä¼˜åŒ–å™¨ã€æ‰§è¡Œå™¨ç­‰åŠŸèƒ½æ¨¡å—ï¼Œæœ€ååˆ°è¾¾å­˜å‚¨å¼•æ“ã€‚</p><p>é‚£ä¹ˆï¼Œä¸€æ¡æ›´æ–°è¯­å¥çš„æ‰§è¡Œæµç¨‹åˆæ˜¯æ€æ ·çš„å‘¢ï¼Ÿ</p><p>ä¹‹å‰ä½ å¯èƒ½ç»å¸¸å¬DBAåŒäº‹è¯´ï¼ŒMySQLå¯ä»¥æ¢å¤åˆ°åŠä¸ªæœˆå†…ä»»æ„ä¸€ç§’çš„çŠ¶æ€ï¼ŒæƒŠå¹çš„åŒæ—¶ï¼Œä½ æ˜¯ä¸æ˜¯å¿ƒä¸­ä¹Ÿä¼šä¸å…ä¼šå¥½å¥‡ï¼Œè¿™æ˜¯æ€æ ·åšåˆ°çš„å‘¢ï¼Ÿ</p><p>æˆ‘ä»¬è¿˜æ˜¯ä»ä¸€ä¸ªè¡¨çš„ä¸€æ¡æ›´æ–°è¯­å¥è¯´èµ·ï¼Œä¸‹é¢æ˜¯è¿™ä¸ªè¡¨çš„åˆ›å»ºè¯­å¥ï¼Œè¿™ä¸ªè¡¨æœ‰ä¸€ä¸ªä¸»é”®IDå’Œä¸€ä¸ªæ•´å‹å­—æ®µcï¼š</p><pre><code>mysql&gt; create table T(ID int primary key, c int);
</code></pre><p>å¦‚æœè¦å°†ID=2è¿™ä¸€è¡Œçš„å€¼åŠ 1ï¼ŒSQLè¯­å¥å°±ä¼šè¿™ä¹ˆå†™ï¼š</p><pre><code>mysql&gt; update T set c=c+1 where ID=2;
</code></pre><p>å‰é¢æˆ‘æœ‰è·Ÿä½ ä»‹ç»è¿‡SQLè¯­å¥åŸºæœ¬çš„æ‰§è¡Œé“¾è·¯ï¼Œè¿™é‡Œæˆ‘å†æŠŠé‚£å¼ å›¾æ‹¿è¿‡æ¥ï¼Œä½ ä¹Ÿå¯ä»¥å…ˆç®€å•çœ‹çœ‹è¿™ä¸ªå›¾å›é¡¾ä¸‹ã€‚é¦–å…ˆï¼Œå¯ä»¥ç¡®å®šçš„è¯´ï¼ŒæŸ¥è¯¢è¯­å¥çš„é‚£ä¸€å¥—æµç¨‹ï¼Œæ›´æ–°è¯­å¥ä¹Ÿæ˜¯åŒæ ·ä¼šèµ°ä¸€éã€‚</p><p><img src="https://static001.geekbang.org/resource/image/0d/d9/0d2070e8f84c4801adbfa03bda1f98d9.png" alt=""></p><center><span class="reference">MySQLçš„é€»è¾‘æ¶æ„å›¾</span></center><p>ä½ æ‰§è¡Œè¯­å¥å‰è¦å…ˆè¿æ¥æ•°æ®åº“ï¼Œè¿™æ˜¯è¿æ¥å™¨çš„å·¥ä½œã€‚</p><p>å‰é¢æˆ‘ä»¬è¯´è¿‡ï¼Œåœ¨ä¸€ä¸ªè¡¨ä¸Šæœ‰æ›´æ–°çš„æ—¶å€™ï¼Œè·Ÿè¿™ä¸ªè¡¨æœ‰å…³çš„æŸ¥è¯¢ç¼“å­˜ä¼šå¤±æ•ˆï¼Œæ‰€ä»¥è¿™æ¡è¯­å¥å°±ä¼šæŠŠè¡¨Tä¸Šæ‰€æœ‰ç¼“å­˜ç»“æœéƒ½æ¸…ç©ºã€‚è¿™ä¹Ÿå°±æ˜¯æˆ‘ä»¬ä¸€èˆ¬ä¸å»ºè®®ä½¿ç”¨æŸ¥è¯¢ç¼“å­˜çš„åŸå› ã€‚</p><p>æ¥ä¸‹æ¥ï¼Œåˆ†æå™¨ä¼šé€šè¿‡è¯æ³•å’Œè¯­æ³•è§£æçŸ¥é“è¿™æ˜¯ä¸€æ¡æ›´æ–°è¯­å¥ã€‚ä¼˜åŒ–å™¨å†³å®šè¦ä½¿ç”¨IDè¿™ä¸ªç´¢å¼•ã€‚ç„¶åï¼Œæ‰§è¡Œå™¨è´Ÿè´£å…·ä½“æ‰§è¡Œï¼Œæ‰¾åˆ°è¿™ä¸€è¡Œï¼Œç„¶åæ›´æ–°ã€‚</p><!-- [[[read_end]]] --><p>ä¸æŸ¥è¯¢æµç¨‹ä¸ä¸€æ ·çš„æ˜¯ï¼Œæ›´æ–°æµç¨‹è¿˜æ¶‰åŠä¸¤ä¸ªé‡è¦çš„æ—¥å¿—æ¨¡å—ï¼Œå®ƒä»¬æ­£æ˜¯æˆ‘ä»¬ä»Šå¤©è¦è®¨è®ºçš„ä¸»è§’ï¼šredo logï¼ˆé‡åšæ—¥å¿—ï¼‰å’Œ binlogï¼ˆå½’æ¡£æ—¥å¿—ï¼‰ã€‚å¦‚æœæ¥è§¦MySQLï¼Œé‚£è¿™ä¸¤ä¸ªè¯è‚¯å®šæ˜¯ç»•ä¸è¿‡çš„ï¼Œæˆ‘åé¢çš„å†…å®¹é‡Œä¹Ÿä¼šä¸æ–­åœ°å’Œä½ å¼ºè°ƒã€‚ä¸è¿‡è¯è¯´å›æ¥ï¼Œredo logå’Œbinlogåœ¨è®¾è®¡ä¸Šæœ‰å¾ˆå¤šæœ‰æ„æ€çš„åœ°æ–¹ï¼Œè¿™äº›è®¾è®¡æ€è·¯ä¹Ÿå¯ä»¥ç”¨åˆ°ä½ è‡ªå·±çš„ç¨‹åºé‡Œã€‚</p><h1>é‡è¦çš„æ—¥å¿—æ¨¡å—ï¼šredo log</h1><p>ä¸çŸ¥é“ä½ è¿˜è®°ä¸è®°å¾—ã€Šå­”ä¹™å·±ã€‹è¿™ç¯‡æ–‡ç« ï¼Œé…’åº—æŒæŸœæœ‰ä¸€ä¸ªç²‰æ¿ï¼Œä¸“é—¨ç”¨æ¥è®°å½•å®¢äººçš„èµŠè´¦è®°å½•ã€‚å¦‚æœèµŠè´¦çš„äººä¸å¤šï¼Œé‚£ä¹ˆä»–å¯ä»¥æŠŠé¡¾å®¢åå’Œè´¦ç›®å†™åœ¨æ¿ä¸Šã€‚ä½†å¦‚æœèµŠè´¦çš„äººå¤šäº†ï¼Œç²‰æ¿æ€»ä¼šæœ‰è®°ä¸ä¸‹çš„æ—¶å€™ï¼Œè¿™ä¸ªæ—¶å€™æŒæŸœä¸€å®šè¿˜æœ‰ä¸€ä¸ªä¸“é—¨è®°å½•èµŠè´¦çš„è´¦æœ¬ã€‚</p><p>å¦‚æœæœ‰äººè¦èµŠè´¦æˆ–è€…è¿˜è´¦çš„è¯ï¼ŒæŒæŸœä¸€èˆ¬æœ‰ä¸¤ç§åšæ³•ï¼š</p><ul>
<li>ä¸€ç§åšæ³•æ˜¯ç›´æ¥æŠŠè´¦æœ¬ç¿»å‡ºæ¥ï¼ŒæŠŠè¿™æ¬¡èµŠçš„è´¦åŠ ä¸Šå»æˆ–è€…æ‰£é™¤æ‰ï¼›</li>
<li>å¦ä¸€ç§åšæ³•æ˜¯å…ˆåœ¨ç²‰æ¿ä¸Šè®°ä¸‹è¿™æ¬¡çš„è´¦ï¼Œç­‰æ‰“çƒŠä»¥åå†æŠŠè´¦æœ¬ç¿»å‡ºæ¥æ ¸ç®—ã€‚</li>
</ul><p>åœ¨ç”Ÿæ„çº¢ç«æŸœå°å¾ˆå¿™æ—¶ï¼ŒæŒæŸœä¸€å®šä¼šé€‰æ‹©åè€…ï¼Œå› ä¸ºå‰è€…æ“ä½œå®åœ¨æ˜¯å¤ªéº»çƒ¦äº†ã€‚é¦–å…ˆï¼Œä½ å¾—æ‰¾åˆ°è¿™ä¸ªäººçš„èµŠè´¦æ€»é¢é‚£æ¡è®°å½•ã€‚ä½ æƒ³æƒ³ï¼Œå¯†å¯†éº»éº»å‡ åé¡µï¼ŒæŒæŸœè¦æ‰¾åˆ°é‚£ä¸ªåå­—ï¼Œå¯èƒ½è¿˜å¾—å¸¦ä¸Šè€èŠ±é•œæ…¢æ…¢æ‰¾ï¼Œæ‰¾åˆ°ä¹‹åå†æ‹¿å‡ºç®—ç›˜è®¡ç®—ï¼Œæœ€åå†å°†ç»“æœå†™å›åˆ°è´¦æœ¬ä¸Šã€‚</p><p>è¿™æ•´ä¸ªè¿‡ç¨‹æƒ³æƒ³éƒ½éº»çƒ¦ã€‚ç›¸æ¯”ä¹‹ä¸‹ï¼Œè¿˜æ˜¯å…ˆåœ¨ç²‰æ¿ä¸Šè®°ä¸€ä¸‹æ–¹ä¾¿ã€‚ä½ æƒ³æƒ³ï¼Œå¦‚æœæŒæŸœæ²¡æœ‰ç²‰æ¿çš„å¸®åŠ©ï¼Œæ¯æ¬¡è®°è´¦éƒ½å¾—ç¿»è´¦æœ¬ï¼Œæ•ˆç‡æ˜¯ä¸æ˜¯ä½å¾—è®©äººéš¾ä»¥å¿å—ï¼Ÿ</p><p>åŒæ ·ï¼Œåœ¨MySQLé‡Œä¹Ÿæœ‰è¿™ä¸ªé—®é¢˜ï¼Œå¦‚æœæ¯ä¸€æ¬¡çš„æ›´æ–°æ“ä½œéƒ½éœ€è¦å†™è¿›ç£ç›˜ï¼Œç„¶åç£ç›˜ä¹Ÿè¦æ‰¾åˆ°å¯¹åº”çš„é‚£æ¡è®°å½•ï¼Œç„¶åå†æ›´æ–°ï¼Œæ•´ä¸ªè¿‡ç¨‹IOæˆæœ¬ã€æŸ¥æ‰¾æˆæœ¬éƒ½å¾ˆé«˜ã€‚ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼ŒMySQLçš„è®¾è®¡è€…å°±ç”¨äº†ç±»ä¼¼é…’åº—æŒæŸœç²‰æ¿çš„æ€è·¯æ¥æå‡æ›´æ–°æ•ˆç‡ã€‚</p><p>è€Œç²‰æ¿å’Œè´¦æœ¬é…åˆçš„æ•´ä¸ªè¿‡ç¨‹ï¼Œå…¶å®å°±æ˜¯MySQLé‡Œç»å¸¸è¯´åˆ°çš„WALæŠ€æœ¯ï¼ŒWALçš„å…¨ç§°æ˜¯Write-Ahead Loggingï¼Œå®ƒçš„å…³é”®ç‚¹å°±æ˜¯å…ˆå†™æ—¥å¿—ï¼Œå†å†™ç£ç›˜ï¼Œä¹Ÿå°±æ˜¯å…ˆå†™ç²‰æ¿ï¼Œç­‰ä¸å¿™çš„æ—¶å€™å†å†™è´¦æœ¬ã€‚</p><p>å…·ä½“æ¥è¯´ï¼Œå½“æœ‰ä¸€æ¡è®°å½•éœ€è¦æ›´æ–°çš„æ—¶å€™ï¼ŒInnoDBå¼•æ“å°±ä¼šå…ˆæŠŠè®°å½•å†™åˆ°redo logï¼ˆç²‰æ¿ï¼‰é‡Œé¢ï¼Œå¹¶æ›´æ–°å†…å­˜ï¼Œè¿™ä¸ªæ—¶å€™æ›´æ–°å°±ç®—å®Œæˆäº†ã€‚åŒæ—¶ï¼ŒInnoDBå¼•æ“ä¼šåœ¨é€‚å½“çš„æ—¶å€™ï¼Œå°†è¿™ä¸ªæ“ä½œè®°å½•æ›´æ–°åˆ°ç£ç›˜é‡Œé¢ï¼Œè€Œè¿™ä¸ªæ›´æ–°å¾€å¾€æ˜¯åœ¨ç³»ç»Ÿæ¯”è¾ƒç©ºé—²çš„æ—¶å€™åšï¼Œè¿™å°±åƒæ‰“çƒŠä»¥åæŒæŸœåšçš„äº‹ã€‚</p><p>å¦‚æœä»Šå¤©èµŠè´¦çš„ä¸å¤šï¼ŒæŒæŸœå¯ä»¥ç­‰æ‰“çƒŠåå†æ•´ç†ã€‚ä½†å¦‚æœæŸå¤©èµŠè´¦çš„ç‰¹åˆ«å¤šï¼Œç²‰æ¿å†™æ»¡äº†ï¼Œåˆæ€ä¹ˆåŠå‘¢ï¼Ÿè¿™ä¸ªæ—¶å€™æŒæŸœåªå¥½æ”¾ä¸‹æ‰‹ä¸­çš„æ´»å„¿ï¼ŒæŠŠç²‰æ¿ä¸­çš„ä¸€éƒ¨åˆ†èµŠè´¦è®°å½•æ›´æ–°åˆ°è´¦æœ¬ä¸­ï¼Œç„¶åæŠŠè¿™äº›è®°å½•ä»ç²‰æ¿ä¸Šæ“¦æ‰ï¼Œä¸ºè®°æ–°è´¦è…¾å‡ºç©ºé—´ã€‚</p><p>ä¸æ­¤ç±»ä¼¼ï¼ŒInnoDBçš„redo logæ˜¯å›ºå®šå¤§å°çš„ï¼Œæ¯”å¦‚å¯ä»¥é…ç½®ä¸ºä¸€ç»„4ä¸ªæ–‡ä»¶ï¼Œæ¯ä¸ªæ–‡ä»¶çš„å¤§å°æ˜¯1GBï¼Œé‚£ä¹ˆè¿™å—â€œç²‰æ¿â€æ€»å…±å°±å¯ä»¥è®°å½•4GBçš„æ“ä½œã€‚ä»å¤´å¼€å§‹å†™ï¼Œå†™åˆ°æœ«å°¾å°±åˆå›åˆ°å¼€å¤´å¾ªç¯å†™ï¼Œå¦‚ä¸‹é¢è¿™ä¸ªå›¾æ‰€ç¤ºã€‚</p><p><img src="https://static001.geekbang.org/resource/image/b0/9c/b075250cad8d9f6c791a52b6a600f69c.jpg" alt=""></p><p>write posæ˜¯å½“å‰è®°å½•çš„ä½ç½®ï¼Œä¸€è¾¹å†™ä¸€è¾¹åç§»ï¼Œå†™åˆ°ç¬¬3å·æ–‡ä»¶æœ«å°¾åå°±å›åˆ°0å·æ–‡ä»¶å¼€å¤´ã€‚checkpointæ˜¯å½“å‰è¦æ“¦é™¤çš„ä½ç½®ï¼Œä¹Ÿæ˜¯å¾€åæ¨ç§»å¹¶ä¸”å¾ªç¯çš„ï¼Œæ“¦é™¤è®°å½•å‰è¦æŠŠè®°å½•æ›´æ–°åˆ°æ•°æ®æ–‡ä»¶ã€‚</p><p>write poså’Œcheckpointä¹‹é—´çš„æ˜¯â€œç²‰æ¿â€ä¸Šè¿˜ç©ºç€çš„éƒ¨åˆ†ï¼Œå¯ä»¥ç”¨æ¥è®°å½•æ–°çš„æ“ä½œã€‚å¦‚æœwrite posè¿½ä¸Šcheckpointï¼Œè¡¨ç¤ºâ€œç²‰æ¿â€æ»¡äº†ï¼Œè¿™æ—¶å€™ä¸èƒ½å†æ‰§è¡Œæ–°çš„æ›´æ–°ï¼Œå¾—åœä¸‹æ¥å…ˆæ“¦æ‰ä¸€äº›è®°å½•ï¼ŒæŠŠcheckpointæ¨è¿›ä¸€ä¸‹ã€‚</p><p>æœ‰äº†redo logï¼ŒInnoDBå°±å¯ä»¥ä¿è¯å³ä½¿æ•°æ®åº“å‘ç”Ÿå¼‚å¸¸é‡å¯ï¼Œä¹‹å‰æäº¤çš„è®°å½•éƒ½ä¸ä¼šä¸¢å¤±ï¼Œè¿™ä¸ªèƒ½åŠ›ç§°ä¸º<strong>crash-safe</strong>ã€‚</p><p>è¦ç†è§£crash-safeè¿™ä¸ªæ¦‚å¿µï¼Œå¯ä»¥æƒ³æƒ³æˆ‘ä»¬å‰é¢èµŠè´¦è®°å½•çš„ä¾‹å­ã€‚åªè¦èµŠè´¦è®°å½•è®°åœ¨äº†ç²‰æ¿ä¸Šæˆ–å†™åœ¨äº†è´¦æœ¬ä¸Šï¼Œä¹‹åå³ä½¿æŒæŸœå¿˜è®°äº†ï¼Œæ¯”å¦‚çªç„¶åœä¸šå‡ å¤©ï¼Œæ¢å¤ç”Ÿæ„åä¾ç„¶å¯ä»¥é€šè¿‡è´¦æœ¬å’Œç²‰æ¿ä¸Šçš„æ•°æ®æ˜ç¡®èµŠè´¦è´¦ç›®ã€‚</p><h1>é‡è¦çš„æ—¥å¿—æ¨¡å—ï¼šbinlog</h1><p>å‰é¢æˆ‘ä»¬è®²è¿‡ï¼ŒMySQLæ•´ä½“æ¥çœ‹ï¼Œå…¶å®å°±æœ‰ä¸¤å—ï¼šä¸€å—æ˜¯Serverå±‚ï¼Œå®ƒä¸»è¦åšçš„æ˜¯MySQLåŠŸèƒ½å±‚é¢çš„äº‹æƒ…ï¼›è¿˜æœ‰ä¸€å—æ˜¯å¼•æ“å±‚ï¼Œè´Ÿè´£å­˜å‚¨ç›¸å…³çš„å…·ä½“äº‹å®œã€‚ä¸Šé¢æˆ‘ä»¬èŠåˆ°çš„ç²‰æ¿redo logæ˜¯InnoDBå¼•æ“ç‰¹æœ‰çš„æ—¥å¿—ï¼Œè€ŒServerå±‚ä¹Ÿæœ‰è‡ªå·±çš„æ—¥å¿—ï¼Œç§°ä¸ºbinlogï¼ˆå½’æ¡£æ—¥å¿—ï¼‰ã€‚</p><p>æˆ‘æƒ³ä½ è‚¯å®šä¼šé—®ï¼Œä¸ºä»€ä¹ˆä¼šæœ‰ä¸¤ä»½æ—¥å¿—å‘¢ï¼Ÿ</p><p>å› ä¸ºæœ€å¼€å§‹MySQLé‡Œå¹¶æ²¡æœ‰InnoDBå¼•æ“ã€‚MySQLè‡ªå¸¦çš„å¼•æ“æ˜¯MyISAMï¼Œä½†æ˜¯MyISAMæ²¡æœ‰crash-safeçš„èƒ½åŠ›ï¼Œbinlogæ—¥å¿—åªèƒ½ç”¨äºå½’æ¡£ã€‚è€ŒInnoDBæ˜¯å¦ä¸€ä¸ªå…¬å¸ä»¥æ’ä»¶å½¢å¼å¼•å…¥MySQLçš„ï¼Œæ—¢ç„¶åªä¾é binlogæ˜¯æ²¡æœ‰crash-safeèƒ½åŠ›çš„ï¼Œæ‰€ä»¥InnoDBä½¿ç”¨å¦å¤–ä¸€å¥—æ—¥å¿—ç³»ç»Ÿâ€”â€”ä¹Ÿå°±æ˜¯redo logæ¥å®ç°crash-safeèƒ½åŠ›ã€‚</p><p>è¿™ä¸¤ç§æ—¥å¿—æœ‰ä»¥ä¸‹ä¸‰ç‚¹ä¸åŒã€‚</p><ol>
<li>
<p>redo logæ˜¯InnoDBå¼•æ“ç‰¹æœ‰çš„ï¼›binlogæ˜¯MySQLçš„Serverå±‚å®ç°çš„ï¼Œæ‰€æœ‰å¼•æ“éƒ½å¯ä»¥ä½¿ç”¨ã€‚</p>
</li>
<li>
<p>redo logæ˜¯ç‰©ç†æ—¥å¿—ï¼Œè®°å½•çš„æ˜¯â€œåœ¨æŸä¸ªæ•°æ®é¡µä¸Šåšäº†ä»€ä¹ˆä¿®æ”¹â€ï¼›binlogæ˜¯é€»è¾‘æ—¥å¿—ï¼Œè®°å½•çš„æ˜¯è¿™ä¸ªè¯­å¥çš„åŸå§‹é€»è¾‘ï¼Œæ¯”å¦‚â€œç»™ID=2è¿™ä¸€è¡Œçš„cå­—æ®µåŠ 1 â€ã€‚</p>
</li>
<li>
<p>redo logæ˜¯å¾ªç¯å†™çš„ï¼Œç©ºé—´å›ºå®šä¼šç”¨å®Œï¼›binlogæ˜¯å¯ä»¥è¿½åŠ å†™å…¥çš„ã€‚â€œè¿½åŠ å†™â€æ˜¯æŒ‡binlogæ–‡ä»¶å†™åˆ°ä¸€å®šå¤§å°åä¼šåˆ‡æ¢åˆ°ä¸‹ä¸€ä¸ªï¼Œå¹¶ä¸ä¼šè¦†ç›–ä»¥å‰çš„æ—¥å¿—ã€‚</p>
</li>
</ol><p>æœ‰äº†å¯¹è¿™ä¸¤ä¸ªæ—¥å¿—çš„æ¦‚å¿µæ€§ç†è§£ï¼Œæˆ‘ä»¬å†æ¥çœ‹æ‰§è¡Œå™¨å’ŒInnoDBå¼•æ“åœ¨æ‰§è¡Œè¿™ä¸ªç®€å•çš„updateè¯­å¥æ—¶çš„å†…éƒ¨æµç¨‹ã€‚</p><ol>
<li>
<p>æ‰§è¡Œå™¨å…ˆæ‰¾å¼•æ“å–ID=2è¿™ä¸€è¡Œã€‚IDæ˜¯ä¸»é”®ï¼Œå¼•æ“ç›´æ¥ç”¨æ ‘æœç´¢æ‰¾åˆ°è¿™ä¸€è¡Œã€‚å¦‚æœID=2è¿™ä¸€è¡Œæ‰€åœ¨çš„æ•°æ®é¡µæœ¬æ¥å°±åœ¨å†…å­˜ä¸­ï¼Œå°±ç›´æ¥è¿”å›ç»™æ‰§è¡Œå™¨ï¼›å¦åˆ™ï¼Œéœ€è¦å…ˆä»ç£ç›˜è¯»å…¥å†…å­˜ï¼Œç„¶åå†è¿”å›ã€‚</p>
</li>
<li>
<p>æ‰§è¡Œå™¨æ‹¿åˆ°å¼•æ“ç»™çš„è¡Œæ•°æ®ï¼ŒæŠŠè¿™ä¸ªå€¼åŠ ä¸Š1ï¼Œæ¯”å¦‚åŸæ¥æ˜¯Nï¼Œç°åœ¨å°±æ˜¯N+1ï¼Œå¾—åˆ°æ–°çš„ä¸€è¡Œæ•°æ®ï¼Œå†è°ƒç”¨å¼•æ“æ¥å£å†™å…¥è¿™è¡Œæ–°æ•°æ®ã€‚</p>
</li>
<li>
<p>å¼•æ“å°†è¿™è¡Œæ–°æ•°æ®æ›´æ–°åˆ°å†…å­˜ä¸­ï¼ŒåŒæ—¶å°†è¿™ä¸ªæ›´æ–°æ“ä½œè®°å½•åˆ°redo logé‡Œé¢ï¼Œæ­¤æ—¶redo logå¤„äºprepareçŠ¶æ€ã€‚ç„¶åå‘ŠçŸ¥æ‰§è¡Œå™¨æ‰§è¡Œå®Œæˆäº†ï¼Œéšæ—¶å¯ä»¥æäº¤äº‹åŠ¡ã€‚</p>
</li>
<li>
<p>æ‰§è¡Œå™¨ç”Ÿæˆè¿™ä¸ªæ“ä½œçš„binlogï¼Œå¹¶æŠŠbinlogå†™å…¥ç£ç›˜ã€‚</p>
</li>
<li>
<p>æ‰§è¡Œå™¨è°ƒç”¨å¼•æ“çš„æäº¤äº‹åŠ¡æ¥å£ï¼Œå¼•æ“æŠŠåˆšåˆšå†™å…¥çš„redo logæ”¹æˆæäº¤ï¼ˆcommitï¼‰çŠ¶æ€ï¼Œæ›´æ–°å®Œæˆã€‚</p>
</li>
</ol><p>è¿™é‡Œæˆ‘ç»™å‡ºè¿™ä¸ªupdateè¯­å¥çš„æ‰§è¡Œæµç¨‹å›¾ï¼Œå›¾ä¸­æµ…è‰²æ¡†è¡¨ç¤ºæ˜¯åœ¨InnoDBå†…éƒ¨æ‰§è¡Œçš„ï¼Œæ·±è‰²æ¡†è¡¨ç¤ºæ˜¯åœ¨æ‰§è¡Œå™¨ä¸­æ‰§è¡Œçš„ã€‚</p><p><img src="https://static001.geekbang.org/resource/image/2e/be/2e5bff4910ec189fe1ee6e2ecc7b4bbe.png" alt=""></p><center><span class="reference">updateè¯­å¥æ‰§è¡Œæµç¨‹</span></center><p>ä½ å¯èƒ½æ³¨æ„åˆ°äº†ï¼Œæœ€åä¸‰æ­¥çœ‹ä¸Šå»æœ‰ç‚¹â€œç»•â€ï¼Œå°†redo logçš„å†™å…¥æ‹†æˆäº†ä¸¤ä¸ªæ­¥éª¤ï¼šprepareå’Œcommitï¼Œè¿™å°±æ˜¯"ä¸¤é˜¶æ®µæäº¤"ã€‚</p><h1>ä¸¤é˜¶æ®µæäº¤</h1><p>ä¸ºä»€ä¹ˆå¿…é¡»æœ‰â€œä¸¤é˜¶æ®µæäº¤â€å‘¢ï¼Ÿè¿™æ˜¯ä¸ºäº†è®©ä¸¤ä»½æ—¥å¿—ä¹‹é—´çš„é€»è¾‘ä¸€è‡´ã€‚è¦è¯´æ˜è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬å¾—ä»æ–‡ç« å¼€å¤´çš„é‚£ä¸ªé—®é¢˜è¯´èµ·ï¼š<strong>æ€æ ·è®©æ•°æ®åº“æ¢å¤åˆ°åŠä¸ªæœˆå†…ä»»æ„ä¸€ç§’çš„çŠ¶æ€ï¼Ÿ</strong></p><p>å‰é¢æˆ‘ä»¬è¯´è¿‡äº†ï¼Œbinlogä¼šè®°å½•æ‰€æœ‰çš„é€»è¾‘æ“ä½œï¼Œå¹¶ä¸”æ˜¯é‡‡ç”¨â€œè¿½åŠ å†™â€çš„å½¢å¼ã€‚å¦‚æœä½ çš„DBAæ‰¿è¯ºè¯´åŠä¸ªæœˆå†…å¯ä»¥æ¢å¤ï¼Œé‚£ä¹ˆå¤‡ä»½ç³»ç»Ÿä¸­ä¸€å®šä¼šä¿å­˜æœ€è¿‘åŠä¸ªæœˆçš„æ‰€æœ‰binlogï¼ŒåŒæ—¶ç³»ç»Ÿä¼šå®šæœŸåšæ•´åº“å¤‡ä»½ã€‚è¿™é‡Œçš„â€œå®šæœŸâ€å–å†³äºç³»ç»Ÿçš„é‡è¦æ€§ï¼Œå¯ä»¥æ˜¯ä¸€å¤©ä¸€å¤‡ï¼Œä¹Ÿå¯ä»¥æ˜¯ä¸€å‘¨ä¸€å¤‡ã€‚</p><p>å½“éœ€è¦æ¢å¤åˆ°æŒ‡å®šçš„æŸä¸€ç§’æ—¶ï¼Œæ¯”å¦‚æŸå¤©ä¸‹åˆä¸¤ç‚¹å‘ç°ä¸­åˆåäºŒç‚¹æœ‰ä¸€æ¬¡è¯¯åˆ è¡¨ï¼Œéœ€è¦æ‰¾å›æ•°æ®ï¼Œé‚£ä½ å¯ä»¥è¿™ä¹ˆåšï¼š</p><ul>
<li>é¦–å…ˆï¼Œæ‰¾åˆ°æœ€è¿‘çš„ä¸€æ¬¡å…¨é‡å¤‡ä»½ï¼Œå¦‚æœä½ è¿æ°”å¥½ï¼Œå¯èƒ½å°±æ˜¯æ˜¨å¤©æ™šä¸Šçš„ä¸€ä¸ªå¤‡ä»½ï¼Œä»è¿™ä¸ªå¤‡ä»½æ¢å¤åˆ°ä¸´æ—¶åº“ï¼›</li>
<li>ç„¶åï¼Œä»å¤‡ä»½çš„æ—¶é—´ç‚¹å¼€å§‹ï¼Œå°†å¤‡ä»½çš„binlogä¾æ¬¡å–å‡ºæ¥ï¼Œé‡æ”¾åˆ°ä¸­åˆè¯¯åˆ è¡¨ä¹‹å‰çš„é‚£ä¸ªæ—¶åˆ»ã€‚</li>
</ul><p>è¿™æ ·ä½ çš„ä¸´æ—¶åº“å°±è·Ÿè¯¯åˆ ä¹‹å‰çš„çº¿ä¸Šåº“ä¸€æ ·äº†ï¼Œç„¶åä½ å¯ä»¥æŠŠè¡¨æ•°æ®ä»ä¸´æ—¶åº“å–å‡ºæ¥ï¼ŒæŒ‰éœ€è¦æ¢å¤åˆ°çº¿ä¸Šåº“å»ã€‚</p><p>å¥½äº†ï¼Œè¯´å®Œäº†æ•°æ®æ¢å¤è¿‡ç¨‹ï¼Œæˆ‘ä»¬å›æ¥è¯´è¯´ï¼Œä¸ºä»€ä¹ˆæ—¥å¿—éœ€è¦â€œä¸¤é˜¶æ®µæäº¤â€ã€‚è¿™é‡Œä¸å¦¨ç”¨åè¯æ³•æ¥è¿›è¡Œè§£é‡Šã€‚</p><p>ç”±äºredo logå’Œbinlogæ˜¯ä¸¤ä¸ªç‹¬ç«‹çš„é€»è¾‘ï¼Œå¦‚æœä¸ç”¨ä¸¤é˜¶æ®µæäº¤ï¼Œè¦ä¹ˆå°±æ˜¯å…ˆå†™å®Œredo logå†å†™binlogï¼Œæˆ–è€…é‡‡ç”¨åè¿‡æ¥çš„é¡ºåºã€‚æˆ‘ä»¬çœ‹çœ‹è¿™ä¸¤ç§æ–¹å¼ä¼šæœ‰ä»€ä¹ˆé—®é¢˜ã€‚</p><p>ä»ç„¶ç”¨å‰é¢çš„updateè¯­å¥æ¥åšä¾‹å­ã€‚å‡è®¾å½“å‰ID=2çš„è¡Œï¼Œå­—æ®µcçš„å€¼æ˜¯0ï¼Œå†å‡è®¾æ‰§è¡Œupdateè¯­å¥è¿‡ç¨‹ä¸­åœ¨å†™å®Œç¬¬ä¸€ä¸ªæ—¥å¿—åï¼Œç¬¬äºŒä¸ªæ—¥å¿—è¿˜æ²¡æœ‰å†™å®ŒæœŸé—´å‘ç”Ÿäº†crashï¼Œä¼šå‡ºç°ä»€ä¹ˆæƒ…å†µå‘¢ï¼Ÿ</p><ol>
<li>
<p><strong>å…ˆå†™redo logåå†™binlog</strong>ã€‚å‡è®¾åœ¨redo logå†™å®Œï¼Œbinlogè¿˜æ²¡æœ‰å†™å®Œçš„æ—¶å€™ï¼ŒMySQLè¿›ç¨‹å¼‚å¸¸é‡å¯ã€‚ç”±äºæˆ‘ä»¬å‰é¢è¯´è¿‡çš„ï¼Œredo logå†™å®Œä¹‹åï¼Œç³»ç»Ÿå³ä½¿å´©æºƒï¼Œä»ç„¶èƒ½å¤ŸæŠŠæ•°æ®æ¢å¤å›æ¥ï¼Œæ‰€ä»¥æ¢å¤åè¿™ä¸€è¡Œcçš„å€¼æ˜¯1ã€‚<br>
ä½†æ˜¯ç”±äºbinlogæ²¡å†™å®Œå°±crashäº†ï¼Œè¿™æ—¶å€™binlogé‡Œé¢å°±æ²¡æœ‰è®°å½•è¿™ä¸ªè¯­å¥ã€‚å› æ­¤ï¼Œä¹‹åå¤‡ä»½æ—¥å¿—çš„æ—¶å€™ï¼Œå­˜èµ·æ¥çš„binlogé‡Œé¢å°±æ²¡æœ‰è¿™æ¡è¯­å¥ã€‚<br>
ç„¶åä½ ä¼šå‘ç°ï¼Œå¦‚æœéœ€è¦ç”¨è¿™ä¸ªbinlogæ¥æ¢å¤ä¸´æ—¶åº“çš„è¯ï¼Œç”±äºè¿™ä¸ªè¯­å¥çš„binlogä¸¢å¤±ï¼Œè¿™ä¸ªä¸´æ—¶åº“å°±ä¼šå°‘äº†è¿™ä¸€æ¬¡æ›´æ–°ï¼Œæ¢å¤å‡ºæ¥çš„è¿™ä¸€è¡Œcçš„å€¼å°±æ˜¯0ï¼Œä¸åŸåº“çš„å€¼ä¸åŒã€‚</p>
</li>
<li>
<p><strong>å…ˆå†™binlogåå†™redo log</strong>ã€‚å¦‚æœåœ¨binlogå†™å®Œä¹‹åcrashï¼Œç”±äºredo logè¿˜æ²¡å†™ï¼Œå´©æºƒæ¢å¤ä»¥åè¿™ä¸ªäº‹åŠ¡æ— æ•ˆï¼Œæ‰€ä»¥è¿™ä¸€è¡Œcçš„å€¼æ˜¯0ã€‚ä½†æ˜¯binlogé‡Œé¢å·²ç»è®°å½•äº†â€œæŠŠcä»0æ”¹æˆ1â€è¿™ä¸ªæ—¥å¿—ã€‚æ‰€ä»¥ï¼Œåœ¨ä¹‹åç”¨binlogæ¥æ¢å¤çš„æ—¶å€™å°±å¤šäº†ä¸€ä¸ªäº‹åŠ¡å‡ºæ¥ï¼Œæ¢å¤å‡ºæ¥çš„è¿™ä¸€è¡Œcçš„å€¼å°±æ˜¯1ï¼Œä¸åŸåº“çš„å€¼ä¸åŒã€‚</p>
</li>
</ol><p>å¯ä»¥çœ‹åˆ°ï¼Œå¦‚æœä¸ä½¿ç”¨â€œä¸¤é˜¶æ®µæäº¤â€ï¼Œé‚£ä¹ˆæ•°æ®åº“çš„çŠ¶æ€å°±æœ‰å¯èƒ½å’Œç”¨å®ƒçš„æ—¥å¿—æ¢å¤å‡ºæ¥çš„åº“çš„çŠ¶æ€ä¸ä¸€è‡´ã€‚</p><p>ä½ å¯èƒ½ä¼šè¯´ï¼Œè¿™ä¸ªæ¦‚ç‡æ˜¯ä¸æ˜¯å¾ˆä½ï¼Œå¹³æ—¶ä¹Ÿæ²¡æœ‰ä»€ä¹ˆåŠ¨ä¸åŠ¨å°±éœ€è¦æ¢å¤ä¸´æ—¶åº“çš„åœºæ™¯å‘€ï¼Ÿ</p><p>å…¶å®ä¸æ˜¯çš„ï¼Œä¸åªæ˜¯è¯¯æ“ä½œåéœ€è¦ç”¨è¿™ä¸ªè¿‡ç¨‹æ¥æ¢å¤æ•°æ®ã€‚å½“ä½ éœ€è¦æ‰©å®¹çš„æ—¶å€™ï¼Œä¹Ÿå°±æ˜¯éœ€è¦å†å¤šæ­å»ºä¸€äº›å¤‡åº“æ¥å¢åŠ ç³»ç»Ÿçš„è¯»èƒ½åŠ›çš„æ—¶å€™ï¼Œç°åœ¨å¸¸è§çš„åšæ³•ä¹Ÿæ˜¯ç”¨å…¨é‡å¤‡ä»½åŠ ä¸Šåº”ç”¨binlogæ¥å®ç°çš„ï¼Œè¿™ä¸ªâ€œä¸ä¸€è‡´â€å°±ä¼šå¯¼è‡´ä½ çš„çº¿ä¸Šå‡ºç°ä¸»ä»æ•°æ®åº“ä¸ä¸€è‡´çš„æƒ…å†µã€‚</p><p>ç®€å•è¯´ï¼Œredo logå’Œbinlogéƒ½å¯ä»¥ç”¨äºè¡¨ç¤ºäº‹åŠ¡çš„æäº¤çŠ¶æ€ï¼Œè€Œä¸¤é˜¶æ®µæäº¤å°±æ˜¯è®©è¿™ä¸¤ä¸ªçŠ¶æ€ä¿æŒé€»è¾‘ä¸Šçš„ä¸€è‡´ã€‚</p><h1>å°ç»“</h1><p>ä»Šå¤©ï¼Œæˆ‘ä»‹ç»äº†MySQLé‡Œé¢æœ€é‡è¦çš„ä¸¤ä¸ªæ—¥å¿—ï¼Œå³ç‰©ç†æ—¥å¿—redo logå’Œé€»è¾‘æ—¥å¿—binlogã€‚</p><p>redo logç”¨äºä¿è¯crash-safeèƒ½åŠ›ã€‚innodb_flush_log_at_trx_commitè¿™ä¸ªå‚æ•°è®¾ç½®æˆ1çš„æ—¶å€™ï¼Œè¡¨ç¤ºæ¯æ¬¡äº‹åŠ¡çš„redo logéƒ½ç›´æ¥æŒä¹…åŒ–åˆ°ç£ç›˜ã€‚è¿™ä¸ªå‚æ•°æˆ‘å»ºè®®ä½ è®¾ç½®æˆ1ï¼Œè¿™æ ·å¯ä»¥ä¿è¯MySQLå¼‚å¸¸é‡å¯ä¹‹åæ•°æ®ä¸ä¸¢å¤±ã€‚</p><p>sync_binlogè¿™ä¸ªå‚æ•°è®¾ç½®æˆ1çš„æ—¶å€™ï¼Œè¡¨ç¤ºæ¯æ¬¡äº‹åŠ¡çš„binlogéƒ½æŒä¹…åŒ–åˆ°ç£ç›˜ã€‚è¿™ä¸ªå‚æ•°æˆ‘ä¹Ÿå»ºè®®ä½ è®¾ç½®æˆ1ï¼Œè¿™æ ·å¯ä»¥ä¿è¯MySQLå¼‚å¸¸é‡å¯ä¹‹åbinlogä¸ä¸¢å¤±ã€‚</p><p>æˆ‘è¿˜è·Ÿä½ ä»‹ç»äº†ä¸MySQLæ—¥å¿—ç³»ç»Ÿå¯†åˆ‡ç›¸å…³çš„â€œä¸¤é˜¶æ®µæäº¤â€ã€‚ä¸¤é˜¶æ®µæäº¤æ˜¯è·¨ç³»ç»Ÿç»´æŒæ•°æ®é€»è¾‘ä¸€è‡´æ€§æ—¶å¸¸ç”¨çš„ä¸€ä¸ªæ–¹æ¡ˆï¼Œå³ä½¿ä½ ä¸åšæ•°æ®åº“å†…æ ¸å¼€å‘ï¼Œæ—¥å¸¸å¼€å‘ä¸­ä¹Ÿæœ‰å¯èƒ½ä¼šç”¨åˆ°ã€‚</p><p>æ–‡ç« çš„æœ€åï¼Œæˆ‘ç»™ä½ ç•™ä¸€ä¸ªæ€è€ƒé¢˜å§ã€‚å‰é¢æˆ‘è¯´åˆ°å®šæœŸå…¨é‡å¤‡ä»½çš„å‘¨æœŸâ€œå–å†³äºç³»ç»Ÿé‡è¦æ€§ï¼Œæœ‰çš„æ˜¯ä¸€å¤©ä¸€å¤‡ï¼Œæœ‰çš„æ˜¯ä¸€å‘¨ä¸€å¤‡â€ã€‚é‚£ä¹ˆåœ¨ä»€ä¹ˆåœºæ™¯ä¸‹ï¼Œä¸€å¤©ä¸€å¤‡ä¼šæ¯”ä¸€å‘¨ä¸€å¤‡æ›´æœ‰ä¼˜åŠ¿å‘¢ï¼Ÿæˆ–è€…è¯´ï¼Œå®ƒå½±å“äº†è¿™ä¸ªæ•°æ®åº“ç³»ç»Ÿçš„å“ªä¸ªæŒ‡æ ‡ï¼Ÿ</p><p>ä½ å¯ä»¥æŠŠä½ çš„æ€è€ƒå’Œè§‚ç‚¹å†™åœ¨ç•™è¨€åŒºé‡Œï¼Œæˆ‘ä¼šåœ¨ä¸‹ä¸€ç¯‡æ–‡ç« çš„æœ«å°¾ç»™å‡ºæˆ‘çš„ç­”æ¡ˆã€‚</p><p>æ„Ÿè°¢ä½ çš„æ”¶å¬ï¼Œä¹Ÿæ¬¢è¿ä½ æŠŠè¿™ç¯‡æ–‡ç« åˆ†äº«ç»™æ›´å¤šçš„æœ‹å‹ä¸€èµ·é˜…è¯»ã€‚</p><p><img src="https://static001.geekbang.org/resource/image/ce/d9/ce7f4e35916ed1aa49206a53a0547bd9.jpg" alt=""></p>
                    </div>
                </div>

            </div>
            <div data-v-87ffcada="" class="article-comments pd"><h2 data-v-87ffcada=""><span
                    data-v-87ffcada="">ç²¾é€‰ç•™è¨€</span></h2>
                <ul data-v-87ffcada="">
                    
                    <li data-v-87ffcada="" class="comment-item"><img
                            src="https://static001.geekbang.org/account/avatar/00/10/74/8b/840afbd8.jpg" class="avatar">
                        <div class="info">
                            <div class="hd"><span class="username">super blue cat</span>
                            </div>
                            <div class="bd">æˆ‘å¯ä»¥è®¤ä¸ºredo log è®°å½•çš„æ˜¯è¿™ä¸ªè¡Œåœ¨è¿™ä¸ªé¡µæ›´æ–°ä¹‹åçš„çŠ¶æ€ï¼Œbinlog è®°å½•çš„æ˜¯sqlå—ï¼Ÿ <br></div>
                            <span class="time">2018-11-16 00:49</span>
                            
                            <div class="reply">
                                <div class="reply-hd"><span>ä½œè€…å›å¤</span></div>
                                <p class="reply-content">Redo logä¸æ˜¯è®°å½•æ•°æ®é¡µâ€œæ›´æ–°ä¹‹åçš„çŠ¶æ€â€ï¼Œè€Œæ˜¯è®°å½•è¿™ä¸ªé¡µ â€œåšäº†ä»€ä¹ˆæ”¹åŠ¨â€ã€‚<br><br>Binlogæœ‰ä¸¤ç§æ¨¡å¼ï¼Œstatement æ ¼å¼çš„è¯æ˜¯è®°sqlè¯­å¥ï¼Œ rowæ ¼å¼ä¼šè®°å½•è¡Œçš„å†…å®¹ï¼Œè®°ä¸¤æ¡ï¼Œæ›´æ–°å‰å’Œæ›´æ–°åéƒ½æœ‰ã€‚<br>ï¼ˆè°¢è°¢ä½ æè¿™ä¸ªé—®é¢˜ï¼Œä¸ºäº†ä¸æ‰“æ–­æ–‡ç« æ€è·¯ï¼Œè¿™ä¸ªç‚¹æ²¡åœ¨æ­£æ–‡å†™ï¼Œä½†æ˜¯åˆæ˜¯å¾ˆé‡è¦çš„ç‚¹ğŸ˜„ğŸ˜„ï¼‰</p>
                                <p class="reply-time">2018-11-16 00:59</p>
                            </div>
                            
                        </div>
                    </li>
                    
                    <li data-v-87ffcada="" class="comment-item"><img
                            src="https://static001.geekbang.org/account/avatar/00/13/f5/de/c33e531e.jpg" class="avatar">
                        <div class="info">
                            <div class="hd"><span class="username">Jason</span>
                            </div>
                            <div class="bd">é¦–å…ˆè°ˆä¸€ä¸‹ï¼Œå­¦ä¹ åçš„æ”¶è·<br>redoæ˜¯ç‰©ç†çš„ï¼Œbinlogæ˜¯é€»è¾‘çš„ï¼›ç°åœ¨ç”±äºredoæ˜¯å±äºInnoDBå¼•æ“ï¼Œæ‰€ä»¥å¿…é¡»è¦æœ‰binlogï¼Œå› ä¸ºä½ å¯ä»¥ä½¿ç”¨åˆ«çš„å¼•æ“<br>ä¿è¯æ•°æ®åº“çš„ä¸€è‡´æ€§ï¼Œå¿…é¡»è¦ä¿è¯2ä»½æ—¥å¿—ä¸€è‡´ï¼Œä½¿ç”¨çš„2é˜¶æ®µå¼æäº¤ï¼›å…¶å®æ„Ÿè§‰åƒäº‹åŠ¡ï¼Œä¸æ˜¯æˆåŠŸå°±æ˜¯å¤±è´¥ï¼Œä¸èƒ½è®©ä¸­é—´ç¯èŠ‚å‡ºç°ï¼Œä¹Ÿå°±æ˜¯ä¸€ä¸ªæˆåŠŸï¼Œä¸€ä¸ªå¤±è´¥<br>å¦‚æœæœ‰ä¸€å¤©mysqlåªæœ‰InnoDBå¼•æ“äº†ï¼Œæœ‰redoæ¥å®ç°å¤åˆ¶ï¼Œé‚£ä¹ˆæ„Ÿè§‰oracleçš„DGå°±è¯ç”Ÿäº†ï¼Œç‰©ç†çš„é€Ÿåº¦ä¹Ÿå°†è¿œè¶…é€»è¾‘çš„ï¼Œæ¯•ç«Ÿåªè®°å½•äº†æ”¹åŠ¨å‘é‡<br>binlogå‡ å¤§æ¨¡å¼ï¼Œä¸€èˆ¬é‡‡ç”¨rowï¼Œå› ä¸ºé‡åˆ°æ—¶é—´ï¼Œä»åº“å¯èƒ½ä¼šå‡ºç°ä¸ä¸€è‡´çš„æƒ…å†µï¼Œä½†æ˜¯rowæ›´æ–°å‰åéƒ½æœ‰ï¼Œä¼šå¯¼è‡´æ—¥å¿—å˜å¤§<br>æœ€å2ä¸ªå‚æ•°ï¼Œä¿è¯äº‹åŠ¡æˆåŠŸï¼Œæ—¥å¿—å¿…é¡»è½ç›˜ï¼Œè¿™æ ·ï¼Œæ•°æ®åº“crashåï¼Œå°±ä¸ä¼šä¸¢å¤±æŸä¸ªäº‹åŠ¡çš„æ•°æ®äº†<br>å…¶æ¬¡è¯´ä¸€ä¸‹ï¼Œå¯¹é—®é¢˜çš„ç†è§£<br>å¤‡ä»½æ—¶é—´å‘¨æœŸçš„é•¿çŸ­ï¼Œæ„Ÿè§‰æœ‰2ä¸ªæ–¹ä¾¿<br>é¦–å…ˆï¼Œæ˜¯æ¢å¤æ•°æ®ä¸¢å¤±çš„æ—¶é—´ï¼Œæ—¢ç„¶éœ€è¦æ¢å¤ï¼Œè‚¯å®šæ˜¯æ•°æ®ä¸¢å¤±äº†ã€‚å¦‚æœä¸€å¤©ä¸€å¤‡ä»½çš„è¯ï¼Œåªè¦æ‰¾åˆ°è¿™å¤©çš„å…¨å¤‡ï¼ŒåŠ å…¥è¿™å¤©æŸæ®µæ—¶é—´çš„binlogæ¥æ¢å¤ï¼Œå¦‚æœä¸€å‘¨ä¸€å¤‡ä»½ï¼Œå‡è®¾æ˜¯å‘¨ä¸€ï¼Œè€Œä½ è¦æ¢å¤çš„æ•°æ®æ˜¯å‘¨æ—¥æŸä¸ªæ—¶é—´ç‚¹ï¼Œé‚£å°±ï¼Œéœ€è¦å…¨å¤‡+å‘¨ä¸€åˆ°å‘¨æ—¥æŸä¸ªæ—¶é—´ç‚¹çš„å…¨éƒ¨binlogç”¨æ¥æ¢å¤ï¼Œæ—¶é—´ç›¸æ¯”å‰è€…éœ€è¦å¢åŠ å¾ˆå¤šï¼›çœ‹ä¸šåŠ¡èƒ½å¿å—çš„ç¨‹åº¦<br>å…¶æ¬¡ï¼Œæ˜¯æ•°æ®åº“ä¸¢å¤±ï¼Œå¦‚æœä¸€å‘¨ä¸€å¤‡ä»½çš„è¯ï¼Œéœ€è¦ç¡®ä¿æ•´ä¸ªä¸€å‘¨çš„binlogéƒ½å®Œå¥½æ— æŸï¼Œå¦åˆ™å°†æ— æ³•æ¢å¤ï¼›è€Œä¸€å¤©ä¸€å¤‡ï¼Œåªè¦ä¿è¯è¿™å¤©çš„binlogéƒ½å®Œå¥½æ— æŸï¼›å½“ç„¶è¿™ä¸ªå¯ä»¥é€šè¿‡æ ¡éªŒï¼Œæˆ–è€…å†—ä½™ç­‰æŠ€æœ¯æ¥å®ç°ï¼Œç›¸æ¯”ä¹‹ä¸‹ï¼Œä¸Šé¢é‚£ç‚¹æ›´é‡è¦<br><br>ä¸å¯¹çš„åœ°æ–¹ï¼Œæœ›å¤§ç¥æŒ‡ç‚¹ <br></div>
                            <span class="time">2018-11-16 16:46</span>
                            
                            <div class="reply">
                                <div class="reply-hd"><span>ä½œè€…å›å¤</span></div>
                                <p class="reply-content">ğŸ‘ğŸ¿ç½®é¡¶äº†<br><br>ä½ è¯´çš„ç‰©ç†å¤åˆ¶ä¸šç•Œæœ‰å›¢é˜Ÿåœ¨åšäº†<br><br>è€Œä¸”å®˜æ–¹æ–°ç‰ˆæœ¬ä¹ŸæŠŠMySQLçš„è¡¨ç»“æ„éƒ½æ”¶å½’InnoDBç®¡ç†äº†ğŸ˜„</p>
                                <p class="reply-time">2018-11-16 18:10</p>
                            </div>
                            
                        </div>
                    </li>
                    
                    <li data-v-87ffcada="" class="comment-item"><img
                            src="https://static001.geekbang.org/account/avatar/00/0f/aa/21/81ee4e60.jpg" class="avatar">
                        <div class="info">
                            <div class="hd"><span class="username">lfn</span>
                            </div>
                            <div class="bd">è€å¸ˆ,ä»Šå¤©MYSQLç¬¬äºŒè®²ä¸­æåˆ°binlogå’Œredo log, æˆ‘æ„Ÿè§‰binlogå¾ˆå¤šä½™ï¼ŒæŒ‰ç†æ˜¯ä¸æ˜¯åªè¦redo logå°±å¤Ÿäº†?[è´¹è§£] <br>æ‚¨è®²çš„æ—¶å€™è¯´redo logæ˜¯InnoDBçš„è¦æ±‚ï¼Œå› ä¸ºä»¥pluginçš„å½¢å¼åŠ å…¥åˆ°MySQLä¸­ï¼Œæ­¤æ—¶binlogä½œä¸ºServerå±‚çš„æ—¥å¿—å·²ç„¶å­˜åœ¨ï¼Œæ‰€ä»¥ä¾¿æœ‰äº†ä¸¤è€…å…±å­˜çš„ç°çŠ¶ã€‚ä½†æˆ‘è§‰å¾—è¿™å¹¶ä¸èƒ½è§£é‡Šæˆ‘ä»¬åœ¨åªç”¨InonoDBå¼•æ“çš„æ—¶å€™è¿˜ä¿ç•™Binlogè¿™ç§è®¾è®¡çš„åŸå› . <br></div>
                            <span class="time">2018-11-16 13:04</span>
                            
                            <div class="reply">
                                <div class="reply-hd"><span>ä½œè€…å›å¤</span></div>
                                <p class="reply-content">binlogè¿˜ä¸èƒ½å»æ‰ã€‚<br><br>ä¸€ä¸ªåŸå› æ˜¯ï¼Œredologåªæœ‰InnoDBæœ‰ï¼Œåˆ«çš„å¼•æ“æ²¡æœ‰ã€‚<br><br>å¦ä¸€ä¸ªåŸå› æ˜¯ï¼Œredologæ˜¯å¾ªç¯å†™çš„ï¼Œä¸æŒä¹…ä¿å­˜ï¼Œbinlogçš„â€œå½’æ¡£â€è¿™ä¸ªåŠŸèƒ½ï¼Œredologæ˜¯ä¸å…·å¤‡çš„ã€‚  </p>
                                <p class="reply-time">2018-11-16 13:13</p>
                            </div>
                            
                        </div>
                    </li>
                    
                    <li data-v-87ffcada="" class="comment-item"><img
                            src="https://static001.geekbang.org/account/avatar/00/0f/97/59/6f9c036e.jpg" class="avatar">
                        <div class="info">
                            <div class="hd"><span class="username">Godruoyi</span>
                            </div>
                            <div class="bd">Bin log ç”¨äºè®°å½•äº†å®Œæ•´çš„é€»è¾‘è®°å½•ï¼Œæ‰€æœ‰çš„é€»è¾‘è®°å½•åœ¨ bin log é‡Œéƒ½èƒ½æ‰¾åˆ°ï¼Œæ‰€ä»¥åœ¨å¤‡ä»½æ¢å¤æ—¶ï¼Œæ˜¯ä»¥ bin log ä¸ºåŸºç¡€ï¼Œé€šè¿‡å…¶è®°å½•çš„å®Œæ•´é€»è¾‘æ“ä½œï¼Œå¤‡ä»½å‡ºä¸€ä¸ªå’ŒåŸåº“å®Œæ•´çš„æ•°æ®ã€‚<br><br>åœ¨ä¸¤é˜¶æ®µæäº¤æ—¶ï¼Œè‹¥ redo log å†™å…¥æˆåŠŸï¼Œbin log å†™å…¥å¤±è´¥ï¼Œåˆ™åç»­é€šè¿‡ bin log æ¢å¤æ—¶ï¼Œæ¢å¤çš„æ•°æ®å°†ä¼šç¼ºå¤±ä¸€éƒ¨åˆ†ã€‚(å¦‚ redo log æ‰§è¡Œäº† update t set status = 1ï¼Œæ­¤æ—¶åŸåº“çš„æ•°æ® status å·²æ›´æ–°ä¸º 1ï¼Œè€Œ bin log å†™å…¥å¤±è´¥ï¼Œæ²¡æœ‰è®°å½•è¿™ä¸€æ“ä½œï¼Œåç»­å¤‡ä»½æ¢å¤æ—¶ï¼Œå…¶ status = 0ï¼Œå¯¼è‡´æ•°æ®ä¸ä¸€è‡´ï¼‰ã€‚<br><br>è‹¥å…ˆå†™å…¥ bin logï¼Œå½“ bin log å†™å…¥æˆåŠŸï¼Œè€Œ redo log å†™å…¥å¤±è´¥æ—¶ï¼ŒåŸåº“ä¸­çš„ status ä»ç„¶æ˜¯ 0 ï¼Œä½†æ˜¯å½“é€šè¿‡ bin log æ¢å¤æ—¶ï¼Œå…¶è®°å½•çš„æ“ä½œæ˜¯ set status = 1ï¼Œä¹Ÿä¼šå¯¼è‡´æ•°æ®ä¸ä¸€è‡´ã€‚<br><br>å…¶æ ¸å¿ƒå°±æ˜¯ï¼Œ redo log è®°å½•çš„ï¼Œå³ä½¿å¼‚å¸¸é‡å¯ï¼Œéƒ½ä¼šåˆ·æ–°åˆ°ç£ç›˜ï¼Œè€Œ bin log è®°å½•çš„ï¼Œ åˆ™ä¸»è¦ç”¨äºå¤‡ä»½ã€‚<br><br>æˆ‘å¯ä»¥è¿™æ ·ç†è§£å—ï¼Ÿè¿˜æœ‰å°±æ˜¯å¦‚ä½•ä¿è¯ redo log å’Œ bin log æ“ä½œçš„ä¸€è‡´æ€§å•Šï¼Ÿ <br></div>
                            <span class="time">2018-11-16 13:41</span>
                            
                            <div class="reply">
                                <div class="reply-hd"><span>ä½œè€…å›å¤</span></div>
                                <p class="reply-content">å‡ ä¹å…¨å¯¹ï¼Œé™¤äº†è¿™ä¸ªâ€œä¸¤é˜¶æ®µæäº¤æ—¶ï¼Œè‹¥redo logå†™å…¥æˆåŠŸï¼Œä½†binlogå†™å…¥å¤±è´¥â€¦â€è¿™å¥è¯ã€‚<br><br>å®é™…ä¸Šï¼Œå› ä¸ºæ˜¯ä¸¤é˜¶æ®µæäº¤ï¼Œè¿™æ—¶å€™redologåªæ˜¯å®Œæˆäº†prepare, è€Œbinlogåˆå¤±è´¥ï¼Œé‚£ä¹ˆäº‹åŠ¡æœ¬èº«ä¼šå›æ»šï¼Œæ‰€ä»¥è¿™ä¸ªåº“é‡Œé¢statusçš„å€¼æ˜¯0ã€‚<br><br>å¦‚æœé€šè¿‡binlog æ¢å¤å‡ºä¸€ä¸ªåº“ï¼Œstatuså€¼ä¹Ÿæ˜¯0ã€‚<br><br>è¿™æ ·ä¸ç®—ä¸¢å¤±ï¼Œè¿™æ ·æ˜¯åˆç†çš„ç»“æœã€‚<br><br>ä¸¤é˜¶æ®µå°±æ˜¯ä¿è¯ä¸€è‡´æ€§ç”¨çš„ã€‚<br>ä½ ä¸ç”¨æ‹…å¿ƒæ—¥å¿—å†™é”™ï¼Œé‚£æ ·å°±æ˜¯bugäº†â€¦</p>
                                <p class="reply-time">2018-11-16 13:58</p>
                            </div>
                            
                        </div>
                    </li>
                    
                    <li data-v-87ffcada="" class="comment-item"><img
                            src="https://static001.geekbang.org/account/avatar/00/13/f7/69/d8dba3de.jpg" class="avatar">
                        <div class="info">
                            <div class="hd"><span class="username">DanielAnton</span>
                            </div>
                            <div class="bd">æœ‰ä¸ªé—®é¢˜è¯·æ•™è€å¸ˆï¼Œæ—¢ç„¶write poså’Œcheckoutéƒ½æ˜¯å¾€åæ¨ç§»å¹¶å¾ªç¯çš„ï¼Œè€Œä¸”å½“write posèµ¶ä¸Šcheckoutçš„æ—¶å€™è¦åœä¸‹æ¥ï¼Œå°†checkoutå¾€åæ¨è¿›ï¼Œé‚£ä¹ˆæ˜¯ä¸æ˜¯æ„å‘³ç€write posçš„ä½ç½®å§‹ç»ˆåœ¨checkoutåé¢ï¼Œæœ€å¤šåœ¨ä¸€èµ·ï¼Œè€Œè¿™å’Œè€å¸ˆç”»çš„å›¾æœ‰äº›å‡ºå…¥ï¼Œä¸çŸ¥é“æˆ‘çš„ç†è§£æ˜¯ä¸æ˜¯æœ‰äº›é”™è¯¯ï¼Œè¯·è€å¸ˆæŒ‡æ•™ã€‚ <br></div>
                            <span class="time">2018-11-16 09:52</span>
                            
                            <div class="reply">
                                <div class="reply-hd"><span>ä½œè€…å›å¤</span></div>
                                <p class="reply-content">å› ä¸ºæ˜¯â€œå¾ªç¯â€çš„ï¼Œå›¾ä¸­è¿™ä¸ªçŠ¶æ€ä¸‹ï¼Œwrite_pos å¾€å‰å†™ï¼Œå†™åˆ°3å·æ–‡ä»¶æœ«å°¾ï¼Œå°±å›åˆ°0å·ç»§ç»­å†™ï¼Œè¿™æ ·ä½ å†ç†è§£çœ‹çœ‹â€œè¿½â€çš„çŠ¶æ€ã€‚<br><br>åˆšå¥½å€Ÿä½ è¿™ä¸ªé—®é¢˜ï¼Œè¯´æ˜ä¸€ä¸‹ï¼Œæ–‡ä¸­â€œwrite poså’Œcheckpointä¹‹é—´çš„æ˜¯â€™ç²‰æ¿â€™ä¸Šè¿˜ç©ºç€çš„éƒ¨åˆ†ï¼Œå¯ä»¥ç”¨æ¥è®°å½•æ–°çš„æ“ä½œã€‚â€ <br>è¿™å¥è¯ï¼Œè¯´çš„â€œç©ºç€çš„éƒ¨åˆ†â€ï¼Œå°±æ˜¯write pos åˆ°3å·æ–‡ä»¶æœ«å°¾ï¼Œå†åŠ ä¸Š0å·æ–‡ä»¶å¼€å¤´åˆ°checkpoint çš„éƒ¨åˆ†ã€‚</p>
                                <p class="reply-time">2018-11-16 10:43</p>
                            </div>
                            
                        </div>
                    </li>
                    
                    <li data-v-87ffcada="" class="comment-item"><img
                            src="https://static001.geekbang.org/account/avatar/00/0f/bb/10/f01eafe4.jpg" class="avatar">
                        <div class="info">
                            <div class="hd"><span class="username">ricktian</span>
                            </div>
                            <div class="bd">redo logçš„æœºåˆ¶çœ‹èµ·æ¥å’Œring bufferä¸€æ ·çš„ï¼›<br>å¦å¤–æœ‰ä¸ªå’Œé«˜æ•ã€æ€é›¨ä¸€æ ·çš„ç–‘é—®ï¼Œå¦‚æœåœ¨é‡å¯åï¼Œéœ€è¦é€šè¿‡æ£€æŸ¥binlogæ¥ç¡®è®¤redo logä¸­å¤„äºprepareçš„äº‹åŠ¡æ˜¯å¦éœ€è¦commitï¼Œé‚£æ˜¯å¦ä¸éœ€è¦äºŒé˜¶æ®µæäº¤ï¼Œç›´æ¥ä»¥binlogçš„ä¸ºå‡†ï¼Œå¦‚æœbinlogä¸­ä¸å­˜åœ¨çš„ï¼Œå°±è®¤ä¸ºæ˜¯éœ€è¦å›æ»šçš„ã€‚è¿™ä¸ªåœ°æ–¹ï¼Œæ˜¯ä¸æ˜¯æˆ‘æ¼äº†ä»€ä¹ˆï¼Œæ‹‰ä¸é€šã€‚ã€‚ã€‚ éº»çƒ¦è€å¸ˆè§£ä¸‹ç–‘ï¼Œå¤šè°¢ï½  <br></div>
                            <span class="time">2018-11-16 11:36</span>
                            
                            <div class="reply">
                                <div class="reply-hd"><span>ä½œè€…å›å¤</span></div>
                                <p class="reply-content">æ–‡ç« ä¸­æœ‰æåˆ°â€œbinlogæ²¡æœ‰è¢«ç”¨æ¥åšå´©æºƒæ¢å¤â€ï¼Œ<br><br>å†å²ä¸Šçš„åŸå› æ˜¯ï¼Œè¿™ä¸ªæ˜¯ä¸€å¼€å§‹å°±è¿™ä¹ˆè®¾è®¡çš„ï¼Œæ‰€ä»¥ä¸èƒ½åªä¾èµ–binlogã€‚<br><br>æ“ä½œä¸Šçš„åŸå› æ˜¯ï¼Œbinlogæ˜¯å¯ä»¥å…³çš„ï¼Œä½ å¦‚æœæœ‰æƒé™ï¼Œå¯ä»¥set sql_log_bin=0å…³æ‰æœ¬çº¿ç¨‹çš„binlogæ—¥å¿—ã€‚ æ‰€ä»¥åªä¾èµ–binlogæ¥æ¢å¤å°±é ä¸ä½ã€‚<br><br>@é«˜æ•ã€@æ€é›¨ ä¹Ÿçœ‹ä¸‹è¿™ä¸ªè®¨è®ºğŸ˜„</p>
                                <p class="reply-time">2018-11-16 14:14</p>
                            </div>
                            
                        </div>
                    </li>
                    
                    <li data-v-87ffcada="" class="comment-item"><img
                            src="https://static001.geekbang.org/account/avatar/00/0f/85/43/3dc8222d.jpg" class="avatar">
                        <div class="info">
                            <div class="hd"><span class="username">å°å¼ </span>
                            </div>
                            <div class="bd">è€å¸ˆæ‚¨å¥½ï¼Œæœ‰ä¸€ä¸ªé—®é¢˜ï¼Œå¦‚æœåœ¨éå¸¸æç«¯çš„æƒ…å†µä¸‹ï¼Œredo logè¢«å†™æ»¡ï¼Œè€Œredo logæ¶‰åŠçš„äº‹åŠ¡å‡æœªæäº¤ï¼Œæ­¤æ—¶åˆæœ‰æ–°çš„äº‹åŠ¡è¿›æ¥æ—¶ï¼Œå°±è¦æ“¦é™¤redo logï¼Œè¿™å°±æ„å‘³ç€è¢«ä¿®æ”¹çš„çš„è„é¡µæ­¤æ—¶è¦è¢«è¿«è¢«flushåˆ°ç£ç›˜äº†ï¼Œå› ä¸ºç”¨æ¥ä¿è¯äº‹åŠ¡æŒä¹…æ€§çš„redo logå°±è¦æ¶ˆå¤±äº†ã€‚ä½†å¦‚è‹¥çœŸçš„æ‰§è¡Œäº†è¿™æ ·çš„æ“ä½œï¼Œæ•°æ®å°±åœ¨è¢«commitä¹‹å‰è¢«æŒä¹…åŒ–åˆ°ç£ç›˜ä¸­äº†ã€‚å½“çœŸçš„é‡åˆ°è¿™æ ·çš„æ¶åŠ£æƒ…å†µæ—¶ï¼Œmysqlä¼šå¦‚ä½•å¤„ç†å‘¢ï¼Œä¼šç›´æ¥æŠ¥é”™å—ï¼Ÿè¿˜æ˜¯æœ‰ä»€ä¹ˆåº”å¯¹çš„æ–¹æ³•å’Œç­–ç•¥å‘¢ï¼Ÿ <br></div>
                            <span class="time">2018-11-27 17:49</span>
                            
                            <div class="reply">
                                <div class="reply-hd"><span>ä½œè€…å›å¤</span></div>
                                <p class="reply-content">ğŸ‘ğŸ¿ï¼Œä¼šæƒ³åˆ°è¿™ä¹ˆç»†è‡´çš„åœºæ™¯<br><br>è¿™äº›æ•°æ®åœ¨å†…å­˜ä¸­æ˜¯æ— æ•ˆå…¶ä»–äº‹åŠ¡è¯»ä¸åˆ°çš„ï¼ˆè¯»åˆ°äº†ä¹Ÿæ”¾å¼ƒï¼‰ï¼ŒåŒæ ·çš„ï¼Œå³ä½¿å†™è¿›ç£ç›˜ï¼Œä¹Ÿæ²¡å…³ç³»ï¼Œå†æ¬¡è¯»åˆ°å†…å­˜ä»¥åï¼Œè¿˜æ˜¯åŸæ¥çš„é€»è¾‘</p>
                                <p class="reply-time">2018-11-27 20:53</p>
                            </div>
                            
                        </div>
                    </li>
                    
                    <li data-v-87ffcada="" class="comment-item"><img
                            src="https://static001.geekbang.org/account/avatar/00/12/43/38/72feb2e0.jpg" class="avatar">
                        <div class="info">
                            <div class="hd"><span class="username">å“‡ï¼æ€ä¹ˆè¿™ä¹ˆå¤§ä¸ª</span>
                            </div>
                            <div class="bd">è€å¸ˆæ‚¨å¥½ï¼Œæˆ‘ä¹‹å‰æ˜¯åšè¿ç»´çš„ï¼Œé€šè¿‡binlogæ¢å¤è¯¯æ“ä½œçš„æ•°æ®ï¼Œä½†æ˜¯å®é™…ä¸Šï¼Œæˆ‘ä»¬ä¼šåçŸ¥åè§‰ï¼Œè¯¯åˆ é™¤ä¸€æ®µæ—¶é—´äº†ï¼Œæ‰å‘ç°è¯¯åˆ é™¤ï¼Œæ­¤æ—¶ï¼Œæˆ‘æŠŠä¹‹å‰è¯¯åˆ é™¤çš„binlogå¯¼å…¥ï¼Œå†æŠŠè¯¯åˆ é™¤ä¹‹åbinlogå¯¼å…¥ï¼Œä¼šå‡ºç°é—®é¢˜ï¼Œæ¯”å¦‚ä¸»é”®å†²çªï¼Œè€Œä¸”binlogå¯¼æ•°æ®ï¼Œä¸åŒæ¨¡å¼ä¸‹æ—¶é—´ä¹Ÿæœ‰ä¸åŒï¼Œä½†æ˜¯ä¸€èˆ¬éƒ½æ˜¯rowæ¨¡å¼ï¼Œæ—¶é—´è¿˜æ˜¯å¾ˆä¹…ï¼Œæœ‰æ²¡ä»€ä¹ˆæ–¹å¼ï¼Œæ—¶é—´çŸ­ä¸”æ•°æ®ä¸€è‡´æ€§å¼ºçš„æ–¹å¼ <br></div>
                            <span class="time">2018-12-20 20:46</span>
                            
                            <div class="reply">
                                <div class="reply-hd"><span>ä½œè€…å›å¤</span></div>
                                <p class="reply-content">å…¶å®æ¢å¤æ•°æ®åªèƒ½æ¢å¤åˆ°è¯¯åˆ ä¹‹å‰åˆ°ä¸€åˆ»ï¼Œ<br>è¯¯åˆ ä¹‹åçš„ï¼Œä¸èƒ½åªé binlogæ¥åšï¼Œå› ä¸ºä¸šåŠ¡é€»è¾‘å¯èƒ½å› ä¸ºè¯¯åˆ æ“ä½œçš„è¡Œä¸ºï¼Œæ’å…¥äº†é€»è¾‘é”™è¯¯çš„è¯­å¥ï¼Œ<br><br>æ‰€ä»¥ä¹‹åçš„ï¼Œè·Ÿä¸šåŠ¡ä¸€èµ·ï¼Œä»ä¸šåŠ¡å¿«é€Ÿè¡¥æ•°æ®çš„ã€‚åªé binlogè¡¥å‡ºæ¥çš„å¾€å¾€ä¸å®Œæ•´</p>
                                <p class="reply-time">2018-12-20 22:12</p>
                            </div>
                            
                        </div>
                    </li>
                    
                    <li data-v-87ffcada="" class="comment-item"><img
                            src="https://static001.geekbang.org/account/avatar/00/13/fe/68/e0bebd9a.jpg" class="avatar">
                        <div class="info">
                            <div class="hd"><span class="username">é«˜æ•</span>
                            </div>
                            <div class="bd">æˆ‘å†æ¥è¯´ä¸‹è‡ªå·±çš„ç†è§£ ã€‚<br>1 prepareé˜¶æ®µ 2 å†™binlog 3 commit<br>å½“åœ¨2ä¹‹å‰å´©æºƒæ—¶<br>é‡å¯æ¢å¤ï¼šåå‘ç°æ²¡æœ‰commitï¼Œå›æ»šã€‚å¤‡ä»½æ¢å¤ï¼šæ²¡æœ‰binlog ã€‚<br>ä¸€è‡´<br>å½“åœ¨3ä¹‹å‰å´©æºƒ<br>é‡å¯æ¢å¤ï¼šè™½æ²¡æœ‰commitï¼Œä½†æ»¡è¶³prepareå’Œbinlogå®Œæ•´ï¼Œæ‰€ä»¥é‡å¯åä¼šè‡ªåŠ¨commitã€‚å¤‡ä»½ï¼šæœ‰binlog. ä¸€è‡´ <br></div>
                            <span class="time">2018-11-16 15:19</span>
                            
                            <div class="reply">
                                <div class="reply-hd"><span>ä½œè€…å›å¤</span></div>
                                <p class="reply-content">ğŸ‘ğŸ¿ï¼Œget å®Œæˆ</p>
                                <p class="reply-time">2018-11-16 15:50</p>
                            </div>
                            
                        </div>
                    </li>
                    
                    <li data-v-87ffcada="" class="comment-item"><img
                            src="https://static001.geekbang.org/account/avatar/00/13/f8/70/f3a33a14.jpg" class="avatar">
                        <div class="info">
                            <div class="hd"><span class="username">æŸã€äºº</span>
                            </div>
                            <div class="bd">1.é¦–å…ˆå®¢æˆ·ç«¯é€šè¿‡tcp&#47;ipå‘é€ä¸€æ¡sqlè¯­å¥åˆ°serverå±‚çš„SQL interface<br>2.SQL interfaceæ¥åˆ°è¯¥è¯·æ±‚åï¼Œå…ˆå¯¹è¯¥æ¡è¯­å¥è¿›è¡Œè§£æï¼ŒéªŒè¯æƒé™æ˜¯å¦åŒ¹é…<br>3.éªŒè¯é€šè¿‡ä»¥åï¼Œåˆ†æå™¨ä¼šå¯¹è¯¥è¯­å¥åˆ†æ,æ˜¯å¦è¯­æ³•æœ‰é”™è¯¯ç­‰<br>4.æ¥ä¸‹æ¥æ˜¯ä¼˜åŒ–å™¨å™¨ç”Ÿæˆç›¸åº”çš„æ‰§è¡Œè®¡åˆ’ï¼Œé€‰æ‹©æœ€ä¼˜çš„æ‰§è¡Œè®¡åˆ’<br>5.ä¹‹åä¼šæ˜¯æ‰§è¡Œå™¨æ ¹æ®æ‰§è¡Œè®¡åˆ’æ‰§è¡Œè¿™æ¡è¯­å¥ã€‚åœ¨è¿™ä¸€æ­¥ä¼šå»open table,å¦‚æœè¯¥tableä¸Šæœ‰MDLï¼Œåˆ™ç­‰å¾…ã€‚<br>å¦‚æœæ²¡æœ‰ï¼Œåˆ™åŠ åœ¨è¯¥è¡¨ä¸ŠåŠ çŸ­æš‚çš„MDL(S)<br>(å¦‚æœopend_tableå¤ªå¤§,è¡¨æ˜open_table_cacheå¤ªå°ã€‚éœ€è¦ä¸åœçš„å»æ‰“å¼€frmæ–‡ä»¶)<br>6.è¿›å…¥åˆ°å¼•æ“å±‚ï¼Œé¦–å…ˆä¼šå»innodb_buffer_poolé‡Œçš„data dictionary(å…ƒæ•°æ®ä¿¡æ¯)å¾—åˆ°è¡¨ä¿¡æ¯<br>7.é€šè¿‡å…ƒæ•°æ®ä¿¡æ¯,å»lock infoé‡ŒæŸ¥å‡ºæ˜¯å¦ä¼šæœ‰ç›¸å…³çš„é”ä¿¡æ¯ï¼Œå¹¶æŠŠè¿™æ¡updateè¯­å¥éœ€è¦çš„<br>é”ä¿¡æ¯å†™å…¥åˆ°lock infoé‡Œ(é”è¿™é‡Œè¿˜æœ‰å¾…è¡¥å……)<br>8.ç„¶åæ¶‰åŠåˆ°çš„è€æ•°æ®é€šè¿‡å¿«ç…§çš„æ–¹å¼å­˜å‚¨åˆ°innodb_buffer_poolé‡Œçš„undo pageé‡Œ,å¹¶ä¸”è®°å½•undo logä¿®æ”¹çš„redo<br>(å¦‚æœdata pageé‡Œæœ‰å°±ç›´æ¥è½½å…¥åˆ°undo pageé‡Œï¼Œå¦‚æœæ²¡æœ‰ï¼Œåˆ™éœ€è¦å»ç£ç›˜é‡Œå–å‡ºç›¸åº”pageçš„æ•°æ®ï¼Œè½½å…¥åˆ°undo pageé‡Œ)<br>9.åœ¨innodb_buffer_poolçš„data pageåšupdateæ“ä½œã€‚å¹¶æŠŠæ“ä½œçš„ç‰©ç†æ•°æ®é¡µä¿®æ”¹è®°å½•åˆ°redo log bufferé‡Œ<br>ç”±äºupdateè¿™ä¸ªäº‹åŠ¡ä¼šæ¶‰åŠåˆ°å¤šä¸ªé¡µé¢çš„ä¿®æ”¹ï¼Œæ‰€ä»¥redo log bufferé‡Œä¼šè®°å½•å¤šæ¡é¡µé¢çš„ä¿®æ”¹ä¿¡æ¯ã€‚<br>å› ä¸ºgroup commitçš„åŸå› ï¼Œè¿™æ¬¡äº‹åŠ¡æ‰€äº§ç”Ÿçš„redo log bufferå¯èƒ½ä¼šè·Ÿéšå…¶å®ƒäº‹åŠ¡ä¸€åŒflushå¹¶ä¸”syncåˆ°ç£ç›˜ä¸Š<br>10.åŒæ—¶ä¿®æ”¹çš„ä¿¡æ¯ï¼Œä¼šæŒ‰ç…§eventçš„æ ¼å¼,è®°å½•åˆ°binlog_cacheä¸­ã€‚(è¿™é‡Œæ³¨æ„binlog_cache_sizeæ˜¯transactionçº§åˆ«çš„,ä¸æ˜¯sessionçº§åˆ«çš„å‚æ•°,<br>ä¸€æ—¦commitä¹‹åï¼Œdumpçº¿ç¨‹ä¼šä»binlog_cacheé‡ŒæŠŠeventä¸»åŠ¨å‘é€ç»™slaveçš„I&#47;Oçº¿ç¨‹)<br>11.ä¹‹åæŠŠè¿™æ¡sql,éœ€è¦åœ¨äºŒçº§ç´¢å¼•ä¸Šåšçš„ä¿®æ”¹ï¼Œå†™å…¥åˆ°change buffer pageï¼Œç­‰åˆ°ä¸‹æ¬¡æœ‰å…¶ä»–sqléœ€è¦è¯»å–è¯¥äºŒçº§ç´¢å¼•æ—¶ï¼Œå†å»ä¸äºŒçº§ç´¢å¼•åšmerge<br>(éšæœºI&#47;Oå˜ä¸ºé¡ºåºI&#47;O,ä½†æ˜¯ç”±äºç°åœ¨çš„ç£ç›˜éƒ½æ˜¯SSD,æ‰€ä»¥å¯¹äºå¯»å€æ¥è¯´,éšæœºI&#47;Oå’Œé¡ºåºI&#47;Oå·®è·ä¸å¤§)<br>12.æ­¤æ—¶updateè¯­å¥å·²ç»å®Œæˆï¼Œéœ€è¦commitæˆ–è€…rollbackã€‚è¿™é‡Œè®¨è®ºcommitçš„æƒ…å†µï¼Œå¹¶ä¸”åŒ1<br>13.commitæ“ä½œï¼Œç”±äºå­˜å‚¨å¼•æ“å±‚ä¸serverå±‚ä¹‹é—´é‡‡ç”¨çš„æ˜¯å†…éƒ¨XA(ä¿è¯ä¸¤ä¸ªäº‹åŠ¡çš„ä¸€è‡´æ€§,è¿™é‡Œä¸»è¦ä¿è¯redo logå’Œbinlogçš„åŸå­æ€§),<br>æ‰€ä»¥æäº¤åˆ†ä¸ºprepareé˜¶æ®µä¸commité˜¶æ®µ<br>14.prepareé˜¶æ®µ,å°†äº‹åŠ¡çš„xidå†™å…¥ï¼Œå°†binlog_cacheé‡Œçš„è¿›è¡Œflushä»¥åŠsyncæ“ä½œ(å¤§äº‹åŠ¡çš„è¯è¿™æ­¥éå¸¸è€—æ—¶)<br>15.commité˜¶æ®µï¼Œç”±äºä¹‹å‰è¯¥äº‹åŠ¡äº§ç”Ÿçš„redo logå·²ç»syncåˆ°ç£ç›˜äº†ã€‚æ‰€ä»¥è¿™æ­¥åªæ˜¯åœ¨redo logé‡Œæ ‡è®°commit<br>16.å½“binlogå’Œredo logéƒ½å·²ç»è½ç›˜ä»¥åï¼Œå¦‚æœè§¦å‘äº†åˆ·æ–°è„é¡µçš„æ“ä½œï¼Œå…ˆæŠŠè¯¥è„é¡µå¤åˆ¶åˆ°doublewrite bufferé‡Œï¼ŒæŠŠdoublewrite bufferé‡Œçš„åˆ·æ–°åˆ°å…±äº«è¡¨ç©ºé—´ï¼Œç„¶åæ‰æ˜¯é€šè¿‡page cleanerçº¿ç¨‹æŠŠè„é¡µå†™å…¥åˆ°ç£ç›˜ä¸­<br>è€å¸ˆï¼Œä½ çœ‹æˆ‘çš„æ­¥éª¤ä¸­æœ‰ä»€ä¹ˆé—®é¢˜å˜›ï¼Ÿæˆ‘æ„Ÿè§‰ç¬¬6æ­¥é‚£é‡Œæœ‰ç‚¹é—®é¢˜,å› ä¸ºç¬¬5æ­¥å·²ç»å»open tableäº†ï¼Œç¬¬6æ­¥è¿˜æœ‰æ²¡æœ‰å¿…è¦å»bufferé‡ŒæŸ¥æ‰¾å…ƒæ•°æ®å‘¢?è¿™å…ƒæ•°æ®æ˜¯è¡¨ç¤ºçš„ç³»ç»Ÿçš„å…ƒæ•°æ®å˜›,è¿˜æ˜¯æ‰€æœ‰è¡¨çš„ï¼Ÿè°¢è°¢è€å¸ˆæŒ‡æ­£ <br></div>
                            <span class="time">2018-11-16 21:16</span>
                            
                            <div class="reply">
                                <div class="reply-hd"><span>ä½œè€…å›å¤</span></div>
                                <p class="reply-content">å…¶å®åœ¨å®ç°ä¸Š5æ˜¯è°ƒç”¨äº†6çš„è¿‡ç¨‹äº†çš„ï¼Œæ‰€ä»¥æ˜¯ä¸€å›äº‹ã€‚MySQL server å±‚å’ŒInnoDBå±‚éƒ½ä¿å­˜äº†è¡¨ç»“æ„ï¼Œæ‰€ä»¥æœ‰ä¹¦ä¸Šæè¿°æ—¶ä¼šæ‹†å¼€è¯´ã€‚<br><br>è¿™ä¸ªæè¿°å¾ˆè¯¦ç»†ï¼ŒåŒæ—¶è¿˜æœ‰ç‚¹åˆ°æˆ‘ä»¬åé¢è¦è®²çš„å†…é€šï¼ˆç¼–è¾‘å¿«æ¥ï¼Œæœ‰äººæ¥ç ¸åœºå­å•¦ğŸ˜„ğŸ˜„ï¼‰<br><br></p>
                                <p class="reply-time">2018-11-16 22:27</p>
                            </div>
                            
                        </div>
                    </li>
                    
                    <li data-v-87ffcada="" class="comment-item"><img
                            src="https://static001.geekbang.org/account/avatar/00/10/d4/e0/513d185e.jpg" class="avatar">
                        <div class="info">
                            <div class="hd"><span class="username">æ–‡@é›¨è·¯</span>
                            </div>
                            <div class="bd">è€å¸ˆï¼Œæˆ‘æƒ³é—®ä¸‹å¦‚æœæäº¤äº‹åŠ¡çš„æ—¶å€™æ­£å¥½é‡å¯é‚£ä¹ˆredo logå’Œbinlogä¼šæ€ä¹ˆå¤„ç†ï¼Ÿæ­¤æ—¶redo logå¤„äºprepareé˜¶æ®µï¼Œå¦‚æœä¸æ¥å—è¿™æ¡logï¼Œä½†æ˜¯binlogå·²ç»æ¥å—ï¼Œè¿˜æ˜¯è¯´binlogä¼šå»æ£€æŸ¥redo logçš„çŠ¶æ€ï¼ŒçŠ¶æ€ä¸ºprepareçš„ä¸ä¼šæ¢å¤ï¼Ÿ <br></div>
                            <span class="time">2018-11-16 01:02</span>
                            
                            <div class="reply">
                                <div class="reply-hd"><span>ä½œè€…å›å¤</span></div>
                                <p class="reply-content">å¥½é—®é¢˜ğŸ‘ğŸ¿è¡¨ç¤ºä¸­é—´é‚£æ®µä½ éƒ½å¬æ˜ç™½äº†ğŸ‘ğŸ¿<br><br>Binlogå¦‚æœå·²ç»æ¥å—ï¼Œé‚£ä¹ˆredologæ˜¯prepare, binlogå·²ç»å®Œæ•´äº†å¯¹å§ï¼Œè¿™æ—¶å€™å´©æºƒæ¢å¤è¿‡ç¨‹ä¼šè®¤å¯è¿™ä¸ªäº‹åŠ¡ï¼Œæäº¤æ‰ã€‚ ï¼ˆä½ å¯ä»¥åˆ†æä¸‹è¿™ç§æƒ…å†µä¸‹ï¼Œæ˜¯å¦ç¬¦åˆæˆ‘ä»¬è¦è¾¾åˆ°çš„â€œç”¨binlogæ¢å¤çš„åº“è·ŸåŸåº“é€»è¾‘ç›¸åŒâ€ è¿™ä¸ªè¦æ±‚ï¼‰</p>
                                <p class="reply-time">2018-11-16 01:10</p>
                            </div>
                            
                        </div>
                    </li>
                    
                    <li data-v-87ffcada="" class="comment-item"><img
                            src="https://static001.geekbang.org/account/avatar/00/12/44/cc/3e62d111.jpg" class="avatar">
                        <div class="info">
                            <div class="hd"><span class="username">justd</span>
                            </div>
                            <div class="bd">ä¸€ä¸ªå®Œæ•´çš„äº¤æ˜“è¿‡ç¨‹ï¼šè´¦æœ¬è®°ä¸Š å–ä¸€ç“¶å¯ä¹ï¼ˆredo logä¸º prepareçŠ¶æ€ï¼‰ï¼Œç„¶åæ”¶é’±æ”¾å…¥é’±ç®±ï¼ˆbin logè®°å½•ï¼‰ç„¶åå›è¿‡å¤´åœ¨è´¦æœ¬ä¸Šæ‰“ä¸ªå‹¾ï¼ˆredo logç½®ä¸ºcommitï¼‰è¡¨ç¤ºä¸€ç¬”äº¤æ˜“ç»“æŸã€‚<br>å¦‚æœæ”¶é’±æ—¶äº¤æ˜“è¢«æ‰“æ–­ï¼Œå›è¿‡å¤´æ¥æ•´ç†æ­¤æ¬¡äº¤æ˜“ï¼Œå‘ç°åªæœ‰è®°è´¦æ²¡æœ‰æ”¶é’±ï¼Œåˆ™äº¤æ˜“å¤±è´¥ï¼Œåˆ æ‰è´¦æœ¬ä¸Šçš„è®°å½•ï¼ˆå›æ»šï¼‰ï¼›å¦‚æœæ”¶äº†é’±åè¢«ç»ˆæ­¢ï¼Œç„¶åå›è¿‡å¤´å‘ç°è´¦æœ¬æœ‰è®°å½•ï¼ˆprepareï¼‰è€Œä¸”é’±ç®±æœ‰æœ¬æ¬¡æ”¶å…¥ï¼ˆbin logï¼‰ï¼Œåˆ™ç»§ç»­å®Œå–„è´¦æœ¬ï¼ˆcommitï¼‰ï¼Œæœ¬æ¬¡äº¤æ˜“æœ‰æ•ˆã€‚<br> <br></div>
                            <span class="time">2018-11-17 00:40</span>
                            
                        </div>
                    </li>
                    
                    <li data-v-87ffcada="" class="comment-item"><img
                            src="https://static001.geekbang.org/account/avatar/00/10/2d/6a/21edc91e.jpg" class="avatar">
                        <div class="info">
                            <div class="hd"><span class="username">Mao</span>
                            </div>
                            <div class="bd">è€å¸ˆï¼Œæ‚¨å¥½ã€‚æ‚¨è¯´MySQL ä½¿ç”¨WALï¼Œå…ˆå†™æ—¥å¿—å†å†™ç£ç›˜ã€‚è¯·æ•™ä¸€ä¸ªé—®é¢˜ï¼Œ<br><br>æ‰§è¡Œä¸€æ¡Update è¯­å¥åï¼Œé©¬ä¸Šåˆæ‰§è¡Œä¸€æ¡ select * from table limit 10ã€‚<br><br>å¦‚æœåˆšåˆšupdateçš„è®°å½•ï¼Œè¿˜æ²¡æŒä¹…åŒ–åˆ°ç£ç›˜ä¸­ï¼Œè€Œååè¿™ä¸ªæ—¶å€™çš„æŸ¥è¯¢æ¡ä»¶ï¼ŒåˆåŒ…å«äº†åˆšåˆšupdateçš„è®°å½•ã€‚<br><br>é‚£ä¹ˆè¿™ä¸ªæ—¶å€™ï¼Œæ˜¯ä»æ—¥å¿—ä¸­è·å–åˆšåˆšupdateçš„æœ€æ–°ç»“æœï¼Œè¿˜æ˜¯è¯´ï¼Œå…ˆæŠŠæ—¥å¿—ä¸­çš„è®°å½•å…ˆå†™ç£ç›˜ï¼Œå†è¿”å›æœ€æ–°ç»“æœï¼Ÿ <br></div>
                            <span class="time">2018-11-19 23:10</span>
                            
                        </div>
                    </li>
                    
                    <li data-v-87ffcada="" class="comment-item"><img
                            src="https://static001.geekbang.org/account/avatar/00/10/d4/e0/513d185e.jpg" class="avatar">
                        <div class="info">
                            <div class="hd"><span class="username">æ–‡@é›¨è·¯</span>
                            </div>
                            <div class="bd">è€å¸ˆï¼Œä¹Ÿå°±æ˜¯è¯´çŠ¶æ€æ¢å¤çš„è¿‡ç¨‹ä¼šå»åŒæ—¶æ£€æŸ¥redo logå’Œbinlogï¼Ÿä¸ç„¶æ€ä¹ˆèƒ½ç¡®å®šä¸€ä¸ªprepareçš„redo logå·²ç»å†™å¥½äº†binlogï¼Œå› ä¸ºä¸æ£€æŸ¥çš„è¯ä¸èƒ½ç¡®å®šåˆ°åº•æ˜¯å†™å¥½äº†binlogä¹‹åå¥”æºƒçš„è¿˜æ˜¯å†™ä¹‹å‰å¥”æºƒçš„ï¼Œä¹Ÿå°±ä¸èƒ½ç¡®å®šè¿™ä¸ªprepare logçš„åˆæ³•æ€§ã€‚å¦‚æœæ£€æŸ¥çš„è¯é‚£ä¹ˆä¸ç”¨ä¸¤é˜¶æ®µæäº¤å¥½åƒä¹Ÿæ²¡ä»€ä¹ˆé—®é¢˜ï¼Œæ— è®ºå…ˆå†™å“ªä¸ªæ—¥å¿—éƒ½å¯ä»¥ã€‚ <br></div>
                            <span class="time">2018-11-16 01:31</span>
                            
                        </div>
                    </li>
                    
                    <li data-v-87ffcada="" class="comment-item"><img
                            src="https://static001.geekbang.org/account/avatar/00/13/e2/9d/fbbd4611.jpg" class="avatar">
                        <div class="info">
                            <div class="hd"><span class="username">cyberbit</span>
                            </div>
                            <div class="bd">æˆ‘ç†è§£å¤‡ä»½å°±æ˜¯æ•‘å‘½è¯åŠ åæ‚”è¯ï¼Œç¾éš¾å‘ç”Ÿçš„æ—¶å€™å¤‡ä»½èƒ½æ•‘å‘½ï¼Œå‡ºç°é”™è¯¯çš„æ—¶å€™å¤‡ä»½èƒ½åæ‚”ã€‚äº‹æƒ…éƒ½æœ‰ä¸¤é¢æ€§ï¼Œæ²¡æœ‰è°æ¯”è°å¥½ï¼Œåªæœ‰è°æ¯”è°åˆé€‚ï¼Œå®Œå…¨çœ‹ä¸šåŠ¡æƒ…å†µå’Œéœ€æ±‚è€Œå®šã€‚ä¸€å¤©ä¸€å¤‡æ¢å¤æ—¶é—´æ›´çŸ­ï¼Œbinlogæ›´å°‘ï¼Œæ•‘å‘½æ—¶å€™æ›´å¿«ï¼Œä½†æ˜¯åæ‚”æ—¶é—´æ›´çŸ­ï¼Œè€Œä¸€å‘¨ä¸€å¤‡æ­£å¥½ç›¸åã€‚æˆ‘è‡ªå·±çš„å¤‡ä»½ç­–ç•¥æ˜¯è®¾ç½®ä¸€ä¸ª16å°æ—¶å»¶è¿Ÿå¤åˆ¶çš„ä»åº“ï¼Œå……å½“åæ‚”è¯ï¼Œæ¢å¤æ—¶é—´ä¹Ÿè¾ƒå¿«ã€‚å†ä¸¤å¤©ä¸€ä¸ªå…¨å¤‡åº“å’Œbinlogï¼Œä½œä¸ºæ•‘å‘½è¯,æœ€åæ—¶åˆ»ç”¨ã€‚è¿™æ ·å°±æ¯”è¾ƒå…¼é¡¾äº†ã€‚ <br></div>
                            <span class="time">2018-11-16 20:06</span>
                            
                            <div class="reply">
                                <div class="reply-hd"><span>ä½œè€…å›å¤</span></div>
                                <p class="reply-content">ä½ æ˜¯æœ‰æ•…äº‹çš„äººğŸ˜„</p>
                                <p class="reply-time">2018-11-16 21:14</p>
                            </div>
                            
                        </div>
                    </li>
                    
                    <li data-v-87ffcada="" class="comment-item"><img
                            src="https://static001.geekbang.org/account/avatar/00/13/df/e7/e3c450c2.jpg" class="avatar">
                        <div class="info">
                            <div class="hd"><span class="username">lionetes</span>
                            </div>
                            <div class="bd">æ˜¨å¤©ä¸Šåˆ æ¢å¤åˆ«äººè¯¯æ“ä½œé…ç½®è¡¨æ•°æ®ï¼Œå¹¸å¥½æœ‰xtarbackupå‡Œæ™¨çš„å…¨é‡å¤‡ä»½ï¼Œåªæå–äº†æ”¹è¡¨çš„ibdæ–‡ä»¶ï¼Œç„¶ååœ¨æœ¬åœ° åšäº† ä¸€ä¸ªä¸€æ ·çš„ç©ºè¡¨ï¼Œé‡Šæ”¾è¯¥è¡¨ç©ºé—´ï¼ŒåŠ è½½ æå–åçš„ibdæ–‡ä»¶ï¼Œæå–æ˜¨å¤©é›¶æ™¨åˆ°ä¹ç‚¹çš„binlogæ–‡ä»¶ ç­›é€‰æ”¹è¡¨è¿™ä¸ªæ—¶æ®µçš„æ“ä½œè®°å½• å¢é‡æ›´æ–°åˆ°æœ¬åœ°å¯¼å‡ºcsv å¯¼å…¥çº¿ä¸Š  ã€‚binlogå¤ªtmé‡è¦äº† <br></div>
                            <span class="time">2018-11-17 17:20</span>
                            
                            <div class="reply">
                                <div class="reply-hd"><span>ä½œè€…å›å¤</span></div>
                                <p class="reply-content">ä½ é€‰æ‹©äº†æœ€ä¼˜è·¯å¾„ğŸ‘ğŸ¿</p>
                                <p class="reply-time">2018-11-18 00:26</p>
                            </div>
                            
                        </div>
                    </li>
                    
                    <li data-v-87ffcada="" class="comment-item"><img
                            src="https://static001.geekbang.org/account/avatar/00/11/e9/0b/53bf91d3.jpg" class="avatar">
                        <div class="info">
                            <div class="hd"><span class="username">WL</span>
                            </div>
                            <div class="bd">ä¸ºè¯¥è®²çš„å†…å®¹æ€»ç»“äº†å‡ ä¸ªé—®é¢˜, å¤§å®¶å¤ä¹ çš„æ—¶å€™å¯ä»¥å…ˆå°è¯•å›ç­”è¿™äº›é—®é¢˜æ£€æŸ¥è‡ªå·±çš„æŒæ¡ç¨‹åº¦:<br>   1. redo logçš„æ¦‚å¿µæ˜¯ä»€ä¹ˆ? ä¸ºä»€ä¹ˆä¼šå­˜åœ¨.<br>   2. ä»€ä¹ˆæ˜¯WAL(write-ahead log)æœºåˆ¶, å¥½å¤„æ˜¯ä»€ä¹ˆ.<br>   3. redo log ä¸ºä»€ä¹ˆå¯ä»¥ä¿è¯crash safeæœºåˆ¶.<br>   4. binlogçš„æ¦‚å¿µæ˜¯ä»€ä¹ˆ, èµ·åˆ°ä»€ä¹ˆä½œç”¨, å¯ä»¥åšcrash safeå—? <br>   5. binlogå’Œredologçš„ä¸åŒç‚¹æœ‰å“ªäº›? <br>   6. ç‰©ç†ä¸€è‡´æ€§å’Œé€»è¾‘ä¸€ç›´æ€§å„åº”è¯¥æ€ä¹ˆç†è§£? <br>   7. æ‰§è¡Œå™¨å’ŒinnoDBåœ¨æ‰§è¡Œupdateè¯­å¥æ—¶å€™çš„æµç¨‹æ˜¯ä»€ä¹ˆæ ·çš„?<br>   8. å¦‚æœæ•°æ®åº“è¯¯æ“ä½œ, å¦‚ä½•æ‰§è¡Œæ•°æ®æ¢å¤?<br>   9. ä»€ä¹ˆæ˜¯ä¸¤é˜¶æ®µæäº¤, ä¸ºä»€ä¹ˆéœ€è¦ä¸¤é˜¶æ®µæäº¤, ä¸¤é˜¶æ®µæäº¤æ€ä¹ˆä¿è¯æ•°æ®åº“ä¸­ä¸¤ä»½æ—¥å¿—é—´çš„é€»è¾‘ä¸€è‡´æ€§(ä»€ä¹ˆå«é€»è¾‘ä¸€è‡´æ€§)?<br>  10. å¦‚æœä¸æ˜¯ä¸¤é˜¶æ®µæäº¤, å…ˆå†™redo logå’Œå…ˆå†™bin logä¸¤ç§æƒ…å†µå„ä¼šé‡åˆ°ä»€ä¹ˆé—®é¢˜? <br></div>
                            <span class="time">2018-11-24 11:21</span>
                            
                        </div>
                    </li>
                    
                    <li data-v-87ffcada="" class="comment-item"><img
                            src="https://static001.geekbang.org/account/avatar/00/10/07/8c/51401220.jpg" class="avatar">
                        <div class="info">
                            <div class="hd"><span class="username">å°ç¾</span>
                            </div>
                            <div class="bd">è€å¸ˆï¼Œæˆ‘è¿™æƒ³è¯·æ•™ä¸¤ä¸ªé—®é¢˜ï¼š<br>1.å†™redoæ—¥å¿—ä¹Ÿæ˜¯å†™ioï¼ˆæˆ‘ç†è§£ä¹Ÿæ˜¯å¤–éƒ¨å­˜å‚¨ï¼‰ã€‚åŒæ ·è€—è´¹æ€§èƒ½ã€‚æ€ä¹ˆèƒ½åšåˆ°ä¼˜åŒ–å‘¢<br>2.æ•°æ®åº“åªæœ‰redo commit ä¹‹åæ‰ä¼šçœŸæ­£æäº¤åˆ°æ•°æ®åº“å— <br></div>
                            <span class="time">2018-11-16 11:19</span>
                            
                            <div class="reply">
                                <div class="reply-hd"><span>ä½œè€…å›å¤</span></div>
                                <p class="reply-content">1. Redologæ˜¯é¡ºåºå†™ï¼Œå¹¶ä¸”å¯ä»¥ç»„æäº¤ï¼Œè¿˜æœ‰åˆ«çš„ä¸€äº›ä¼˜åŒ–ï¼Œæ”¶ç›Šæœ€å¤§æ˜¯æ˜¯è¿™ä¸¤ä¸ªå› ç´ ï¼›<br><br>2.æ˜¯è¿™æ ·ï¼Œæ­£å¸¸æ‰§è¡Œæ˜¯è¦commit æ‰ç®—å®Œï¼Œä½†æ˜¯å´©æºƒæ¢å¤è¿‡ç¨‹çš„è¯ï¼Œå¯ä»¥æ¥å—â€œredolog prepare å¹¶ä¸”binlogå®Œæ•´â€ çš„æƒ…å†µ</p>
                                <p class="reply-time">2018-11-16 12:18</p>
                            </div>
                            
                        </div>
                    </li>
                    
                    <li data-v-87ffcada="" class="comment-item"><img
                            src="https://static001.geekbang.org/account/avatar/00/0f/70/97/e5bf9ddb.jpg" class="avatar">
                        <div class="info">
                            <div class="hd"><span class="username">jacket</span>
                            </div>
                            <div class="bd">ã€å›ç­”é—®é¢˜ã€‘<br>å¤‡ä»½æ•°æ®åº“çš„å‘¨æœŸç›´æ¥å½±å“åˆ°äº†æ¢å¤çš„é€Ÿåº¦ï¼Œä¸€å¤©ä¸€å¤‡çš„è¯ï¼Œæ¢å¤æ—¶åªéœ€è¦é‡æ–°æ‰§è¡Œæœ€è¿‘ä¸€å¤©çš„æ•°æ®åº“ä¿®æ”¹æ“ä½œã€‚è€Œä¸€å‘¨ä¸€å¤‡åˆ™éœ€è¦åšå¾ˆå¤šã€‚æ‰€ä»¥åœ¨å¯¹äºç³»ç»Ÿæ¢å¤é€Ÿåº¦å¾ˆæ•æ„Ÿçš„ç³»ç»Ÿï¼Œæœ€å¥½ä½¿ç”¨ä¸€å¤©ä¸€å¤‡ï¼Œç”šè‡³ä¸€å°æ—¶ä¸€å¤‡ç­‰ç­‰ã€‚ <br></div>
                            <span class="time">2018-11-16 00:38</span>
                            
                        </div>
                    </li>
                    
                    <li data-v-87ffcada="" class="comment-item"><img
                            src="https://static001.geekbang.org/account/avatar/00/0f/70/51/eb68ec53.jpg" class="avatar">
                        <div class="info">
                            <div class="hd"><span class="username">Lugyedo</span>
                            </div>
                            <div class="bd">redo logå’Œbin logæ€ä¹ˆå¯¹åº” <br></div>
                            <span class="time">2018-11-16 10:04</span>
                            
                            <div class="reply">
                                <div class="reply-hd"><span>ä½œè€…å›å¤</span></div>
                                <p class="reply-content">äº‹åŠ¡ID ï¼ˆæ¯”è¾ƒç»†èŠ‚ï¼Œå°±æ²¡åœ¨æ­£æ–‡é‡Œå†™äº†</p>
                                <p class="reply-time">2018-11-16 10:25</p>
                            </div>
                            
                        </div>
                    </li>
                    


                </ul>
            </div>
        </div>
    </div>
</div>
</body>
</html>