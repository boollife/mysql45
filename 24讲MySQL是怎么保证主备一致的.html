<html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport"
          content="width=device-width,initial-scale=1,maximum-scale=1,minimum-scale=1,user-scalable=no,viewport-fit=cover">
    <meta name="format-detection" content="telephone=no">
    <style type="text/css">

#watermark {

  position: relative;
  overflow: hidden;
}

#watermark .x {
  position: absolute;
  top: 800;
  left: 400;
  color: #3300ff;
  font-size: 50px;
  pointer-events: none;
  opacity:0.3;
  filter:Alpha(opacity=50);
  
  
}
    </style>


    <style type="text/css">
 html{color:#333;-webkit-text-size-adjust:100%;-ms-text-size-adjust:100%;text-rendering:optimizelegibility;font-family:Helvetica Neue,PingFang SC,Verdana,Microsoft Yahei,Hiragino Sans GB,Microsoft Sans Serif,WenQuanYi Micro Hei,sans-serif}html.borderbox *,html.borderbox :after,html.borderbox :before{box-sizing:border-box}article,aside,blockquote,body,button,code,dd,details,dl,dt,fieldset,figcaption,figure,footer,form,h1,h2,h3,h4,h5,h6,header,hr,input,legend,li,menu,nav,ol,p,pre,section,td,textarea,th,ul{margin:0;padding:0}article,aside,details,figcaption,figure,footer,header,menu,nav,section{display:block}audio,canvas,video{display:inline-block}body,button,input,select,textarea{font:300 1em/1.8 PingFang SC,Lantinghei SC,Microsoft Yahei,Hiragino Sans GB,Microsoft Sans Serif,WenQuanYi Micro Hei,Helvetica,sans-serif}button::-moz-focus-inner,input::-moz-focus-inner{padding:0;border:0}table{border-collapse:collapse;border-spacing:0}fieldset,img{border:0}blockquote{position:relative;color:#999;font-weight:400;border-left:1px solid #1abc9c;padding-left:1em;margin:1em 3em 1em 2em}@media only screen and (max-width:640px){blockquote{margin:1em 0}}abbr,acronym{border-bottom:1px dotted;font-variant:normal}abbr{cursor:help}del{text-decoration:line-through}address,caption,cite,code,dfn,em,th,var{font-style:normal;font-weight:400}ol,ul{list-style:none}caption,th{text-align:left}q:after,q:before{content:""}sub,sup{font-size:75%;line-height:0;position:relative}:root sub,:root sup{vertical-align:baseline}sup{top:-.5em}sub{bottom:-.25em}a{color:#1abc9c}a:hover{text-decoration:underline}.typo a{border-bottom:1px solid #1abc9c}.typo a:hover{border-bottom-color:#555;color:#555}.typo a:hover,a,ins{text-decoration:none}.typo-u,u{text-decoration:underline}mark{background:#fffdd1;border-bottom:1px solid #ffedce;padding:2px;margin:0 5px}code,pre,pre tt{font-family:Courier,Courier New,monospace}pre{background:hsla(0,0%,97%,.7);border:1px solid #ddd;padding:1em 1.5em;display:block;-webkit-overflow-scrolling:touch}hr{border:none;border-bottom:1px solid #cfcfcf;margin-bottom:.8em;height:10px}.typo-small,figcaption,small{font-size:.9em;color:#888}b,strong{font-weight:700;color:#000}[draggable]{cursor:move}.clearfix:after,.clearfix:before{content:"";display:table}.clearfix:after{clear:both}.clearfix{zoom:1}.textwrap,.textwrap td,.textwrap th{word-wrap:break-word;word-break:break-all}.textwrap-table{table-layout:fixed}.serif{font-family:Palatino,Optima,Georgia,serif}.typo-dl,.typo-form,.typo-hr,.typo-ol,.typo-p,.typo-pre,.typo-table,.typo-ul,.typo dl,.typo form,.typo hr,.typo ol,.typo p,.typo pre,.typo table,.typo ul,blockquote{margin-bottom:1rem}h1,h2,h3,h4,h5,h6{font-family:PingFang SC,Helvetica Neue,Verdana,Microsoft Yahei,Hiragino Sans GB,Microsoft Sans Serif,WenQuanYi Micro Hei,sans-serif;color:#000;line-height:1.35}.typo-h1,.typo-h2,.typo-h3,.typo-h4,.typo-h5,.typo-h6,.typo h1,.typo h2,.typo h3,.typo h4,.typo h5,.typo h6{margin-top:1.2em;margin-bottom:.6em;line-height:1.35}.typo-h1,.typo h1{font-size:2em}.typo-h2,.typo h2{font-size:1.8em}.typo-h3,.typo h3{font-size:1.6em}.typo-h4,.typo h4{font-size:1.4em}.typo-h5,.typo-h6,.typo h5,.typo h6{font-size:1.2em}.typo-ul,.typo ul{margin-left:1.3em;list-style:disc}.typo-ol,.typo ol{list-style:decimal;margin-left:1.9em}.typo-ol ol,.typo-ol ul,.typo-ul ol,.typo-ul ul,.typo li ol,.typo li ul{margin-bottom:.8em;margin-left:2em}.typo-ol ul,.typo-ul ul,.typo li ul{list-style:circle}.typo-table td,.typo-table th,.typo table caption,.typo table td,.typo table th{border:1px solid #ddd;padding:.5em 1em;color:#666}.typo-table th,.typo table th{background:#fbfbfb}.typo-table thead th,.typo table thead th{background:hsla(0,0%,95%,.7)}.typo table caption{border-bottom:none}.typo-input,.typo-textarea{-webkit-appearance:none;border-radius:0}.typo-em,.typo em,caption,legend{color:#000;font-weight:inherit}.typo-em{position:relative}.typo-em:after{position:absolute;top:.65em;left:0;width:100%;overflow:hidden;white-space:nowrap;content:"\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB"}.typo img{max-width:100%}.common-content{font-weight:400;color:#353535;line-height:1.75rem;white-space:normal;word-break:normal;font-size:1rem}.common-content img{display:block;max-width:100%;background-color:#eee}.common-content audio,.common-content video{width:100%;background-color:#eee}.common-content center,.common-content font{margin-top:1rem;display:inline-block}.common-content center{width:100%}.common-content pre{margin-top:1rem;padding-left:0;padding-right:0;position:relative;overflow:hidden}.common-content pre code{font-size:.8rem;font-family:Consolas,Liberation Mono,Menlo,monospace,Courier;display:block;width:100%;box-sizing:border-box;padding-left:1rem;padding-right:1rem;overflow-x:auto}.common-content hr{border:none;margin-top:1.5rem;margin-bottom:1.5rem;border-top:1px solid #f5f5f5;height:1px;background:none}.common-content b,.common-content h1,.common-content h2,.common-content h3,.common-content h4,.common-content h5,.common-content strong{font-weight:700}.common-content h1,.common-content h2{font-size:1.125rem;margin-bottom:.45rem}.common-content h3,.common-content h4,.common-content h5{font-size:1rem;margin-bottom:.45rem}.common-content p{font-weight:400;color:#353535;margin-top:.15rem}.common-content .orange{color:#ff5a05}.common-content .reference{font-size:1rem;color:#888}.custom-rich-content h1{margin-top:0;font-weight:400;font-size:15.25px;border-bottom:1px solid #eee;line-height:2.8}.custom-rich-content li,.custom-rich-content p{font-size:14px;color:#888;line-height:1.6}table.hljs-ln{margin-bottom:0;border-spacing:0;border-collapse:collapse}table.hljs-ln,table.hljs-ln tbody,table.hljs-ln td,table.hljs-ln tr{box-sizing:border-box}table.hljs-ln td{padding:0;border:0}table.hljs-ln td.hljs-ln-numbers{min-width:15px;color:rgba(27,31,35,.3);text-align:right;white-space:nowrap;cursor:pointer;user-select:none}table.hljs-ln td.hljs-ln-code,table.hljs-ln td.hljs-ln-numbers{font-family:SFMono-Regular,Consolas,Liberation Mono,Menlo,Courier,monospace;font-size:12px;line-height:20px;vertical-align:top}table.hljs-ln td.hljs-ln-code{position:relative;padding-right:10px;padding-left:10px;overflow:visible;color:#24292e;word-wrap:normal;white-space:pre}video::-webkit-media-controls{overflow:hidden!important}video::-webkit-media-controls-enclosure{width:calc(100% + 32px);margin-left:auto}.button-cancel{color:#888;border:1px solid #888;border-radius:3px;margin-right:12px}.button-cancel,.button-primary{-ms-flex-positive:1;flex-grow:1;height:35px;display:inline-block;font-size:15px;text-align:center;line-height:36px}.button-primary{color:#fff;background-color:#ff5a05;border-radius:3px}@font-face{font-family:iconfont;src:url(//at.alicdn.com/t/font_372689_bwwwtosxtzp.eot);src:url(//at.alicdn.com/t/font_372689_bwwwtosxtzp.eot#iefix) format("embedded-opentype"),url(//at.alicdn.com/t/font_372689_bwwwtosxtzp.woff) format("woff"),url(//at.alicdn.com/t/font_372689_bwwwtosxtzp.ttf) format("truetype"),url(//at.alicdn.com/t/font_372689_bwwwtosxtzp.svg#iconfont) format("svg")}@font-face{font-family:player-font;src:url(//at.alicdn.com/t/font_509397_1cyjv4o90qiod2t9.eot);src:url(//at.alicdn.com/t/font_509397_1cyjv4o90qiod2t9.eot#iefix) format("embedded-opentype"),url(//at.alicdn.com/t/font_509397_1cyjv4o90qiod2t9.woff) format("woff"),url(//at.alicdn.com/t/font_509397_1cyjv4o90qiod2t9.ttf) format("truetype"),url(//at.alicdn.com/t/font_509397_1cyjv4o90qiod2t9.svg#player-font) format("svg")}.iconfont{font-family:iconfont!important;font-size:16px;font-style:normal;-webkit-font-smoothing:antialiased;-webkit-text-stroke-width:.2px;-moz-osx-font-smoothing:grayscale}html{background:#fff;min-height:100%;-webkit-tap-highlight-color:rgba(0,0,0,0)}body{width:100%}body.fixed{overflow:hidden;position:fixed;width:100vw;height:100vh}i{font-style:normal}a{word-wrap:break-word;-webkit-tap-highlight-color:rgba(0,0,0,0)}a:hover{text-decoration:none}.fade-enter-active,.fade-leave-active{transition:opacity .3s}.fade-enter,.fade-leave-to{opacity:0}.MathJax,.MathJax_CHTML,.MathJax_MathContainer,.MathJax_MathML,.MathJax_PHTML,.MathJax_PlainSource,.MathJax_SVG{outline:0}.ios-app-switch .js-audit{display:none}._loading_wrap_{position:fixed;width:100vw;height:100vh;top:50%;left:50%;transform:translate(-50%,-50%);z-index:999}._loading_div_class_,._loading_wrap_{display:-ms-flexbox;display:flex;-ms-flex-pack:center;justify-content:center;-ms-flex-align:center;align-items:center}._loading_div_class_{word-wrap:break-word;padding:.5rem .75rem;text-align:center;z-index:9999;font-size:.6rem;max-width:60%;color:#fff;border-radius:.25rem;-ms-flex-direction:column;flex-direction:column}._loading_div_class_ .message{color:#353535;font-size:16px;line-height:3}.spinner{animation:circle-rotator 1.4s linear infinite}.spinner *{line-height:0;box-sizing:border-box}@keyframes circle-rotator{0%{transform:rotate(0deg)}to{transform:rotate(270deg)}}.path{stroke-dasharray:187;stroke-dashoffset:0;transform-origin:center;animation:circle-dash 1.4s ease-in-out infinite,circle-colors 5.6s ease-in-out infinite}@keyframes circle-colors{0%{stroke:#ff5a05}to{stroke:#ff5a05}}@keyframes circle-dash{0%{stroke-dashoffset:187}50%{stroke-dashoffset:46.75;transform:rotate(135deg)}to{stroke-dashoffset:187;transform:rotate(450deg)}}.confirm-box-wrapper,.confirm-box-wrapper .mask{position:absolute;top:0;left:0;right:0;bottom:0}.confirm-box-wrapper .mask{background:rgba(0,0,0,.6)}.confirm-box-wrapper .confirm-box{position:fixed;top:50%;left:50%;width:267px;background:#fff;transform:translate(-50%,-50%);border-radius:7px}.confirm-box-wrapper .confirm-box .head{margin:0 18px;font-size:18px;text-align:center;line-height:65px;border-bottom:1px solid #d9d9d9}.confirm-box-wrapper .confirm-box .body{padding:18px;padding-bottom:0;color:#353535;font-size:12.5px;max-height:150px;overflow:auto}.confirm-box-wrapper .confirm-box .foot{display:-ms-flexbox;display:flex;-ms-flex-direction:row;flex-direction:row;padding:18px}.confirm-box-wrapper .confirm-box .foot .button-cancel{border:1px solid #d9d9d9}.hljs{display:block;overflow-x:auto;padding:.5em;color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}




    </style>
    <style type="text/css">
        .button-cancel[data-v-87ffcada]{color:#888;border:1px solid #888;border-radius:3px;margin-right:12px}.button-cancel[data-v-87ffcada],.button-primary[data-v-87ffcada]{-webkit-box-flex:1;-ms-flex-positive:1;flex-grow:1;height:35px;display:inline-block;font-size:15px;text-align:center;line-height:36px}.button-primary[data-v-87ffcada]{color:#fff;background-color:#ff5a05;border-radius:3px}.pd[data-v-87ffcada]{padding-left:1.375rem;padding-right:1.375rem}.article[data-v-87ffcada]{max-width:70rem;margin:0 auto}.article .article-unavailable[data-v-87ffcada]{color:#fa8919;font-size:15px;font-weight:600;line-height:24px;border-radius:5px;padding:12px;background-color:#f6f7fb;margin-top:20px}.article .article-unavailable .iconfont[data-v-87ffcada]{font-size:12px}.article .main[data-v-87ffcada]{padding:1.25rem 0;margin-bottom:52px}.article-title[data-v-87ffcada]{color:#353535;font-weight:400;line-height:1.65rem;font-size:1.34375rem}.article-info[data-v-87ffcada]{color:#888;font-size:.9375rem;margin-top:1.0625rem}.article-content[data-v-87ffcada]{margin-top:1.0625rem}.article-content.android video[data-v-87ffcada]::-webkit-media-controls-fullscreen-button{display:none}.copyright[data-v-87ffcada]{color:#b2b2b2;padding-bottom:20px;margin-top:20px;font-size:13px}.audio-player[data-v-87ffcada]{width:100%;margin:20px 0}.to-comment[data-v-87ffcada]{overflow:hidden;padding-top:10px;margin-bottom:-30px}.to-comment a.button-primary[data-v-87ffcada]{float:right;height:20px;font-size:12px;line-height:20px;padding:4px 8px;cursor:pointer}.article-comments[data-v-87ffcada]{margin-top:2rem}.article-comments h2[data-v-87ffcada]{text-align:center;color:#888;position:relative;z-index:1;margin-bottom:1rem}.article-comments h2[data-v-87ffcada]:before{border-top:1px dotted #888;content:"";position:absolute;top:56%;left:0;width:100%;z-index:-1}.article-comments h2 span[data-v-87ffcada]{font-size:15.25px;font-weight:400;padding:0 1rem;background:#fff;display:inline-block}.article-sub-bottom[data-v-87ffcada]{z-index:10;cursor:pointer}.switch-btns[data-v-87ffcada]{height:76px;cursor:pointer;padding-top:24px;padding-bottom:24px;border-bottom:10px solid #f6f7fb;position:relative}.switch-btns[data-v-87ffcada]:before{content:" ";height:1px;background:#e8e8e8;position:absolute;top:0;left:0;-webkit-box-sizing:border-box;box-sizing:border-box;left:1.375rem;right:1.375rem}.switch-btns .btn[data-v-87ffcada]{height:38px;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center}.switch-btns .btn .tag[data-v-87ffcada]{-webkit-box-flex:0;-ms-flex:0 0 62px;flex:0 0 62px;text-align:center;color:#888;font-size:14px;border-radius:10px;height:22px;line-height:22px;background:#f6f7fb;font-weight:400}.switch-btns .btn .txt[data-v-87ffcada]{margin-left:10px;-webkit-box-flex:1;-ms-flex:1 1 auto;flex:1 1 auto;color:#888;font-size:15px;height:22px;line-height:22px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;font-weight:400}@media (max-width:769px){.article .breadcrumb[data-v-87ffcada]{padding-top:10px;padding-bottom:10px}}





    </style>

    <style type="text/css">
        .comment-item{list-style-position:inside;width:100%;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row;margin-bottom:1rem}.comment-item a{border-bottom:none}.comment-item .avatar{width:2.625rem;height:2.625rem;-ms-flex-negative:0;flex-shrink:0;border-radius:50%}.comment-item .info{margin-left:.5rem;-webkit-box-flex:1;-ms-flex-positive:1;flex-grow:1}.comment-item .info .hd{width:100%;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row;-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;-webkit-box-align:center;-ms-flex-align:center;align-items:center}.comment-item .info .hd .username{color:#888;font-size:15.25px;font-weight:400;line-height:1.2}.comment-item .info .hd .control{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row;-webkit-box-align:center;-ms-flex-align:center;align-items:center}.comment-item .info .hd .control .btn-share{color:#888;font-size:.75rem;margin-right:1rem}.comment-item .info .hd .control .btn-praise{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row;-webkit-box-align:center;-ms-flex-align:center;align-items:center;font-size:15.25px;text-decoration:none}.comment-item .info .hd .control .btn-praise i{color:#888;display:inline-block;font-size:.75rem;margin-right:.3rem;margin-top:-.01rem}.comment-item .info .hd .control .btn-praise i.on,.comment-item .info .hd .control .btn-praise span{color:#ff5a05}.comment-item .info .bd{color:#353535;font-size:15.25px;font-weight:400;white-space:normal;word-break:break-all;line-height:1.6}.comment-item .info .time{color:#888;font-size:9px;line-height:1}.comment-item .info .reply .reply-hd{font-size:15.25px}.comment-item .info .reply .reply-hd span{margin-left:-12px;color:#888;font-weight:400}.comment-item .info .reply .reply-hd i{color:#ff5a05;font-size:15.25px}.comment-item .info .reply .reply-content{color:#353535;font-size:15.25px;font-weight:400;white-space:normal;word-break:break-all}.comment-item .info .reply .reply-time{color:#888;font-size:9px}




    </style>
</head>
<body>
<div id="app">


    <div data-v-87ffcada="" class="article" id="watermark">
        <div data-v-87ffcada="" class="main main-app">
            <h1 data-v-87ffcada="" class="article-title pd">
                24è®²MySQLæ˜¯æ€ä¹ˆä¿è¯ä¸»å¤‡ä¸€è‡´çš„
            </h1>
            <div data-v-87ffcada="" class="article-content typo common-content pd"><img data-v-87ffcada=""
                                                                                        src="https://static001.geekbang.org/resource/image/4b/9a/4b14443b3291b2afa40124ae0b8ed29a.jpg">

                <div>
                    <audio controls="controls" height="100" width="100">
                        <source src="24è®²MySQLæ˜¯æ€ä¹ˆä¿è¯ä¸»å¤‡ä¸€è‡´çš„.mp3" type="audio/mp3" />
                        <embed height="100" width="100" src="24è®²MySQLæ˜¯æ€ä¹ˆä¿è¯ä¸»å¤‡ä¸€è‡´çš„.mp3" />
                    </audio>
                </div>
                <div data-v-87ffcada="" id="article-content" class="">
                    <div class="text">
                        <p>åœ¨å‰é¢çš„æ–‡ç« ä¸­ï¼Œæˆ‘ä¸æ­¢ä¸€æ¬¡åœ°å’Œä½ æåˆ°äº†binlogï¼Œå¤§å®¶çŸ¥é“binlogå¯ä»¥ç”¨æ¥å½’æ¡£ï¼Œä¹Ÿå¯ä»¥ç”¨æ¥åšä¸»å¤‡åŒæ­¥ï¼Œä½†å®ƒçš„å†…å®¹æ˜¯ä»€ä¹ˆæ ·çš„å‘¢ï¼Ÿä¸ºä»€ä¹ˆå¤‡åº“æ‰§è¡Œäº†binlogå°±å¯ä»¥è·Ÿä¸»åº“ä¿æŒä¸€è‡´äº†å‘¢ï¼Ÿä»Šå¤©æˆ‘å°±æ­£å¼åœ°å’Œä½ ä»‹ç»ä¸€ä¸‹å®ƒã€‚</p><p>æ¯«ä¸å¤¸å¼ åœ°è¯´ï¼ŒMySQLèƒ½å¤Ÿæˆä¸ºç°ä¸‹æœ€æµè¡Œçš„å¼€æºæ•°æ®åº“ï¼ŒbinlogåŠŸä¸å¯æ²¡ã€‚</p><p>åœ¨æœ€å¼€å§‹ï¼ŒMySQLæ˜¯ä»¥å®¹æ˜“å­¦ä¹ å’Œæ–¹ä¾¿çš„é«˜å¯ç”¨æ¶æ„ï¼Œè¢«å¼€å‘äººå‘˜é’ççš„ã€‚è€Œå®ƒçš„å‡ ä¹æ‰€æœ‰çš„é«˜å¯ç”¨æ¶æ„ï¼Œéƒ½ç›´æ¥ä¾èµ–äºbinlogã€‚è™½ç„¶è¿™äº›é«˜å¯ç”¨æ¶æ„å·²ç»å‘ˆç°å‡ºè¶Šæ¥è¶Šå¤æ‚çš„è¶‹åŠ¿ï¼Œä½†éƒ½æ˜¯ä»æœ€åŸºæœ¬çš„ä¸€ä¸»ä¸€å¤‡æ¼”åŒ–è¿‡æ¥çš„ã€‚</p><p>ä»Šå¤©è¿™ç¯‡æ–‡ç« æˆ‘ä¸»è¦ä¸ºä½ ä»‹ç»ä¸»å¤‡çš„åŸºæœ¬åŸç†ã€‚ç†è§£äº†èƒŒåçš„è®¾è®¡åŸç†ï¼Œä½ ä¹Ÿå¯ä»¥ä»ä¸šåŠ¡å¼€å‘çš„è§’åº¦ï¼Œæ¥å€Ÿé‰´è¿™äº›è®¾è®¡æ€æƒ³ã€‚</p><h1>MySQLä¸»å¤‡çš„åŸºæœ¬åŸç†</h1><p>å¦‚å›¾1æ‰€ç¤ºå°±æ˜¯åŸºæœ¬çš„ä¸»å¤‡åˆ‡æ¢æµç¨‹ã€‚</p><p><img src="https://static001.geekbang.org/resource/image/fd/10/fd75a2b37ae6ca709b7f16fe060c2c10.png" alt=""></p><center><span class="reference">å›¾ 1 MySQLä¸»å¤‡åˆ‡æ¢æµç¨‹</span></center><p>åœ¨çŠ¶æ€1ä¸­ï¼Œå®¢æˆ·ç«¯çš„è¯»å†™éƒ½ç›´æ¥è®¿é—®èŠ‚ç‚¹Aï¼Œè€ŒèŠ‚ç‚¹Bæ˜¯Açš„å¤‡åº“ï¼Œåªæ˜¯å°†Açš„æ›´æ–°éƒ½åŒæ­¥è¿‡æ¥ï¼Œåˆ°æœ¬åœ°æ‰§è¡Œã€‚è¿™æ ·å¯ä»¥ä¿æŒèŠ‚ç‚¹Bå’ŒAçš„æ•°æ®æ˜¯ç›¸åŒçš„ã€‚</p><p>å½“éœ€è¦åˆ‡æ¢çš„æ—¶å€™ï¼Œå°±åˆ‡æˆçŠ¶æ€2ã€‚è¿™æ—¶å€™å®¢æˆ·ç«¯è¯»å†™è®¿é—®çš„éƒ½æ˜¯èŠ‚ç‚¹Bï¼Œè€ŒèŠ‚ç‚¹Aæ˜¯Bçš„å¤‡åº“ã€‚</p><p>åœ¨çŠ¶æ€1ä¸­ï¼Œè™½ç„¶èŠ‚ç‚¹Bæ²¡æœ‰è¢«ç›´æ¥è®¿é—®ï¼Œä½†æ˜¯æˆ‘ä¾ç„¶å»ºè®®ä½ æŠŠèŠ‚ç‚¹Bï¼ˆä¹Ÿå°±æ˜¯å¤‡åº“ï¼‰è®¾ç½®æˆåªè¯»ï¼ˆreadonlyï¼‰æ¨¡å¼ã€‚è¿™æ ·åšï¼Œæœ‰ä»¥ä¸‹å‡ ä¸ªè€ƒè™‘ï¼š</p><!-- [[[read_end]]] --><ol>
<li>
<p>æœ‰æ—¶å€™ä¸€äº›è¿è¥ç±»çš„æŸ¥è¯¢è¯­å¥ä¼šè¢«æ”¾åˆ°å¤‡åº“ä¸Šå»æŸ¥ï¼Œè®¾ç½®ä¸ºåªè¯»å¯ä»¥é˜²æ­¢è¯¯æ“ä½œï¼›</p>
</li>
<li>
<p>é˜²æ­¢åˆ‡æ¢é€»è¾‘æœ‰bugï¼Œæ¯”å¦‚åˆ‡æ¢è¿‡ç¨‹ä¸­å‡ºç°åŒå†™ï¼Œé€ æˆä¸»å¤‡ä¸ä¸€è‡´ï¼›</p>
</li>
<li>
<p>å¯ä»¥ç”¨readonlyçŠ¶æ€ï¼Œæ¥åˆ¤æ–­èŠ‚ç‚¹çš„è§’è‰²ã€‚</p>
</li>
</ol><p>ä½ å¯èƒ½ä¼šé—®ï¼Œæˆ‘æŠŠå¤‡åº“è®¾ç½®æˆåªè¯»äº†ï¼Œè¿˜æ€ä¹ˆè·Ÿä¸»åº“ä¿æŒåŒæ­¥æ›´æ–°å‘¢ï¼Ÿ</p><p>è¿™ä¸ªé—®é¢˜ï¼Œä½ ä¸ç”¨æ‹…å¿ƒã€‚å› ä¸ºreadonlyè®¾ç½®å¯¹è¶…çº§(super)æƒé™ç”¨æˆ·æ˜¯æ— æ•ˆçš„ï¼Œè€Œç”¨äºåŒæ­¥æ›´æ–°çš„çº¿ç¨‹ï¼Œå°±æ‹¥æœ‰è¶…çº§æƒé™ã€‚</p><p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å†çœ‹çœ‹<strong>èŠ‚ç‚¹Aåˆ°Bè¿™æ¡çº¿çš„å†…éƒ¨æµç¨‹æ˜¯ä»€ä¹ˆæ ·çš„</strong>ã€‚å›¾2ä¸­ç”»å‡ºçš„å°±æ˜¯ä¸€ä¸ªupdateè¯­å¥åœ¨èŠ‚ç‚¹Aæ‰§è¡Œï¼Œç„¶ååŒæ­¥åˆ°èŠ‚ç‚¹Bçš„å®Œæ•´æµç¨‹å›¾ã€‚</p><p><img src="https://static001.geekbang.org/resource/image/a6/a3/a66c154c1bc51e071dd2cc8c1d6ca6a3.png" alt=""></p><center><span class="reference">å›¾2 ä¸»å¤‡æµç¨‹å›¾</span></center><p>å›¾2ä¸­ï¼ŒåŒ…å«äº†æˆ‘åœ¨ä¸Šä¸€ç¯‡æ–‡ç« ä¸­è®²åˆ°çš„binlogå’Œredo logçš„å†™å…¥æœºåˆ¶ç›¸å…³çš„å†…å®¹ï¼Œå¯ä»¥çœ‹åˆ°ï¼šä¸»åº“æ¥æ”¶åˆ°å®¢æˆ·ç«¯çš„æ›´æ–°è¯·æ±‚åï¼Œæ‰§è¡Œå†…éƒ¨äº‹åŠ¡çš„æ›´æ–°é€»è¾‘ï¼ŒåŒæ—¶å†™binlogã€‚</p><p>å¤‡åº“Bè·Ÿä¸»åº“Aä¹‹é—´ç»´æŒäº†ä¸€ä¸ªé•¿è¿æ¥ã€‚ä¸»åº“Aå†…éƒ¨æœ‰ä¸€ä¸ªçº¿ç¨‹ï¼Œä¸“é—¨ç”¨äºæœåŠ¡å¤‡åº“Bçš„è¿™ä¸ªé•¿è¿æ¥ã€‚ä¸€ä¸ªäº‹åŠ¡æ—¥å¿—åŒæ­¥çš„å®Œæ•´è¿‡ç¨‹æ˜¯è¿™æ ·çš„ï¼š</p><ol>
<li>
<p>åœ¨å¤‡åº“Bä¸Šé€šè¿‡change masterå‘½ä»¤ï¼Œè®¾ç½®ä¸»åº“Açš„IPã€ç«¯å£ã€ç”¨æˆ·åã€å¯†ç ï¼Œä»¥åŠè¦ä»å“ªä¸ªä½ç½®å¼€å§‹è¯·æ±‚binlogï¼Œè¿™ä¸ªä½ç½®åŒ…å«æ–‡ä»¶åå’Œæ—¥å¿—åç§»é‡ã€‚</p>
</li>
<li>
<p>åœ¨å¤‡åº“Bä¸Šæ‰§è¡Œstart slaveå‘½ä»¤ï¼Œè¿™æ—¶å€™å¤‡åº“ä¼šå¯åŠ¨ä¸¤ä¸ªçº¿ç¨‹ï¼Œå°±æ˜¯å›¾ä¸­çš„io_threadå’Œsql_threadã€‚å…¶ä¸­io_threadè´Ÿè´£ä¸ä¸»åº“å»ºç«‹è¿æ¥ã€‚</p>
</li>
<li>
<p>ä¸»åº“Aæ ¡éªŒå®Œç”¨æˆ·åã€å¯†ç åï¼Œå¼€å§‹æŒ‰ç…§å¤‡åº“Bä¼ è¿‡æ¥çš„ä½ç½®ï¼Œä»æœ¬åœ°è¯»å–binlogï¼Œå‘ç»™Bã€‚</p>
</li>
<li>
<p>å¤‡åº“Bæ‹¿åˆ°binlogåï¼Œå†™åˆ°æœ¬åœ°æ–‡ä»¶ï¼Œç§°ä¸ºä¸­è½¬æ—¥å¿—ï¼ˆrelay logï¼‰ã€‚</p>
</li>
<li>
<p>sql_threadè¯»å–ä¸­è½¬æ—¥å¿—ï¼Œè§£æå‡ºæ—¥å¿—é‡Œçš„å‘½ä»¤ï¼Œå¹¶æ‰§è¡Œã€‚</p>
</li>
</ol><p>è¿™é‡Œéœ€è¦è¯´æ˜ï¼Œåæ¥ç”±äºå¤šçº¿ç¨‹å¤åˆ¶æ–¹æ¡ˆçš„å¼•å…¥ï¼Œsql_threadæ¼”åŒ–æˆä¸ºäº†å¤šä¸ªçº¿ç¨‹ï¼Œè·Ÿæˆ‘ä»¬ä»Šå¤©è¦ä»‹ç»çš„åŸç†æ²¡æœ‰ç›´æ¥å…³ç³»ï¼Œæš‚ä¸”ä¸å±•å¼€ã€‚</p><p>åˆ†æå®Œäº†è¿™ä¸ªé•¿è¿æ¥çš„é€»è¾‘ï¼Œæˆ‘ä»¬å†æ¥çœ‹ä¸€ä¸ªé—®é¢˜ï¼šbinlogé‡Œé¢åˆ°åº•æ˜¯ä»€ä¹ˆå†…å®¹ï¼Œä¸ºä»€ä¹ˆå¤‡åº“æ‹¿è¿‡å»å¯ä»¥ç›´æ¥æ‰§è¡Œã€‚</p><h1>binlogçš„ä¸‰ç§æ ¼å¼å¯¹æ¯”</h1><p>æˆ‘åœ¨<a href="https://time.geekbang.org/column/article/73161">ç¬¬15ç¯‡ç­”ç–‘æ–‡ç« </a>ä¸­ï¼Œå’Œä½ æåˆ°è¿‡binlogæœ‰ä¸¤ç§æ ¼å¼ï¼Œä¸€ç§æ˜¯statementï¼Œä¸€ç§æ˜¯rowã€‚å¯èƒ½ä½ åœ¨å…¶ä»–èµ„æ–™ä¸Šè¿˜ä¼šçœ‹åˆ°æœ‰ç¬¬ä¸‰ç§æ ¼å¼ï¼Œå«ä½œmixedï¼Œå…¶å®å®ƒå°±æ˜¯å‰ä¸¤ç§æ ¼å¼çš„æ··åˆã€‚</p><p>ä¸ºäº†ä¾¿äºæè¿°binlogçš„è¿™ä¸‰ç§æ ¼å¼é—´çš„åŒºåˆ«ï¼Œæˆ‘åˆ›å»ºäº†ä¸€ä¸ªè¡¨ï¼Œå¹¶åˆå§‹åŒ–å‡ è¡Œæ•°æ®ã€‚</p><pre><code>mysql&gt; CREATE TABLE `t` (
  `id` int(11) NOT NULL,
  `a` int(11) DEFAULT NULL,
  `t_modified` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,
  PRIMARY KEY (`id`),
  KEY `a` (`a`),
  KEY `t_modified`(`t_modified`)
) ENGINE=InnoDB;

insert into t values(1,1,'2018-11-13');
insert into t values(2,2,'2018-11-12');
insert into t values(3,3,'2018-11-11');
insert into t values(4,4,'2018-11-10');
insert into t values(5,5,'2018-11-09');
</code></pre><p>å¦‚æœè¦åœ¨è¡¨ä¸­åˆ é™¤ä¸€è¡Œæ•°æ®çš„è¯ï¼Œæˆ‘ä»¬æ¥çœ‹çœ‹è¿™ä¸ªdeleteè¯­å¥çš„binlogæ˜¯æ€ä¹ˆè®°å½•çš„ã€‚</p><p>æ³¨æ„ï¼Œä¸‹é¢è¿™ä¸ªè¯­å¥åŒ…å«æ³¨é‡Šï¼Œå¦‚æœä½ ç”¨MySQLå®¢æˆ·ç«¯æ¥åšè¿™ä¸ªå®éªŒçš„è¯ï¼Œè¦è®°å¾—åŠ -cå‚æ•°ï¼Œå¦åˆ™å®¢æˆ·ç«¯ä¼šè‡ªåŠ¨å»æ‰æ³¨é‡Šã€‚</p><pre><code>mysql&gt; delete from t /*comment*/  where a&gt;=4 and t_modified&lt;='2018-11-10' limit 1;
</code></pre><p>å½“binlog_format=statementæ—¶ï¼Œbinlogé‡Œé¢è®°å½•çš„å°±æ˜¯SQLè¯­å¥çš„åŸæ–‡ã€‚ä½ å¯ä»¥ç”¨</p><pre><code>mysql&gt; show binlog events in 'master.000001';
</code></pre><p>å‘½ä»¤çœ‹binlogä¸­çš„å†…å®¹ã€‚</p><p><img src="https://static001.geekbang.org/resource/image/b9/31/b9818f73cd7d38a96ddcb75350b52931.png" alt=""></p><center><span class="reference">å›¾3 statementæ ¼å¼binlog ç¤ºä¾‹</span></center><p>ç°åœ¨ï¼Œæˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹å›¾3çš„è¾“å‡ºç»“æœã€‚</p><ul>
<li>ç¬¬ä¸€è¡ŒSET @@SESSION.GTID_NEXT='ANONYMOUSâ€™ä½ å¯ä»¥å…ˆå¿½ç•¥ï¼Œåé¢æ–‡ç« æˆ‘ä»¬ä¼šåœ¨ä»‹ç»ä¸»å¤‡åˆ‡æ¢çš„æ—¶å€™å†æåˆ°ï¼›</li>
<li>ç¬¬äºŒè¡Œæ˜¯ä¸€ä¸ªBEGINï¼Œè·Ÿç¬¬å››è¡Œçš„commitå¯¹åº”ï¼Œè¡¨ç¤ºä¸­é—´æ˜¯ä¸€ä¸ªäº‹åŠ¡ï¼›</li>
<li>ç¬¬ä¸‰è¡Œå°±æ˜¯çœŸå®æ‰§è¡Œçš„è¯­å¥äº†ã€‚å¯ä»¥çœ‹åˆ°ï¼Œåœ¨çœŸå®æ‰§è¡Œçš„deleteå‘½ä»¤ä¹‹å‰ï¼Œè¿˜æœ‰ä¸€ä¸ªâ€œuse â€˜testâ€™â€å‘½ä»¤ã€‚è¿™æ¡å‘½ä»¤ä¸æ˜¯æˆ‘ä»¬ä¸»åŠ¨æ‰§è¡Œçš„ï¼Œè€Œæ˜¯MySQLæ ¹æ®å½“å‰è¦æ“ä½œçš„è¡¨æ‰€åœ¨çš„æ•°æ®åº“ï¼Œè‡ªè¡Œæ·»åŠ çš„ã€‚è¿™æ ·åšå¯ä»¥ä¿è¯æ—¥å¿—ä¼ åˆ°å¤‡åº“å»æ‰§è¡Œçš„æ—¶å€™ï¼Œä¸è®ºå½“å‰çš„å·¥ä½œçº¿ç¨‹åœ¨å“ªä¸ªåº“é‡Œï¼Œéƒ½èƒ½å¤Ÿæ­£ç¡®åœ°æ›´æ–°åˆ°teståº“çš„è¡¨tã€‚<br>
use 'testâ€™å‘½ä»¤ä¹‹åçš„delete è¯­å¥ï¼Œå°±æ˜¯æˆ‘ä»¬è¾“å…¥çš„SQLåŸæ–‡äº†ã€‚å¯ä»¥çœ‹åˆ°ï¼Œbinlogâ€œå¿ å®â€åœ°è®°å½•äº†SQLå‘½ä»¤ï¼Œç”šè‡³è¿æ³¨é‡Šä¹Ÿä¸€å¹¶è®°å½•äº†ã€‚</li>
<li>æœ€åä¸€è¡Œæ˜¯ä¸€ä¸ªCOMMITã€‚ä½ å¯ä»¥çœ‹åˆ°é‡Œé¢å†™ç€xid=61ã€‚ä½ è¿˜è®°å¾—è¿™ä¸ªXIDæ˜¯åšä»€ä¹ˆç”¨çš„å—ï¼Ÿå¦‚æœè®°å¿†æ¨¡ç³Šäº†ï¼Œå¯ä»¥å†å›é¡¾ä¸€ä¸‹<a href="https://time.geekbang.org/column/article/73161">ç¬¬15ç¯‡æ–‡ç« </a>ä¸­çš„ç›¸å…³å†…å®¹ã€‚</li>
</ul><p>ä¸ºäº†è¯´æ˜statement å’Œ rowæ ¼å¼çš„åŒºåˆ«ï¼Œæˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹è¿™æ¡deleteå‘½ä»¤çš„æ‰§è¡Œæ•ˆæœå›¾ï¼š</p><p><img src="https://static001.geekbang.org/resource/image/96/2b/96c2be9c0fcbff66883118526b26652b.png" alt=""></p><center><span class="reference">å›¾4 deleteæ‰§è¡Œwarnings</span></center><p>å¯ä»¥çœ‹åˆ°ï¼Œè¿è¡Œè¿™æ¡deleteå‘½ä»¤äº§ç”Ÿäº†ä¸€ä¸ªwarningï¼ŒåŸå› æ˜¯å½“å‰binlogè®¾ç½®çš„æ˜¯statementæ ¼å¼ï¼Œå¹¶ä¸”è¯­å¥ä¸­æœ‰limitï¼Œæ‰€ä»¥è¿™ä¸ªå‘½ä»¤å¯èƒ½æ˜¯unsafeçš„ã€‚</p><p>ä¸ºä»€ä¹ˆè¿™ä¹ˆè¯´å‘¢ï¼Ÿè¿™æ˜¯å› ä¸ºdelete å¸¦limitï¼Œå¾ˆå¯èƒ½ä¼šå‡ºç°ä¸»å¤‡æ•°æ®ä¸ä¸€è‡´çš„æƒ…å†µã€‚æ¯”å¦‚ä¸Šé¢è¿™ä¸ªä¾‹å­ï¼š</p><ol>
<li>
<p>å¦‚æœdeleteè¯­å¥ä½¿ç”¨çš„æ˜¯ç´¢å¼•aï¼Œé‚£ä¹ˆä¼šæ ¹æ®ç´¢å¼•aæ‰¾åˆ°ç¬¬ä¸€ä¸ªæ»¡è¶³æ¡ä»¶çš„è¡Œï¼Œä¹Ÿå°±æ˜¯è¯´åˆ é™¤çš„æ˜¯a=4è¿™ä¸€è¡Œï¼›</p>
</li>
<li>
<p>ä½†å¦‚æœä½¿ç”¨çš„æ˜¯ç´¢å¼•t_modifiedï¼Œé‚£ä¹ˆåˆ é™¤çš„å°±æ˜¯ t_modified='2018-11-09â€™ä¹Ÿå°±æ˜¯a=5è¿™ä¸€è¡Œã€‚</p>
</li>
</ol><p>ç”±äºstatementæ ¼å¼ä¸‹ï¼Œè®°å½•åˆ°binlogé‡Œçš„æ˜¯è¯­å¥åŸæ–‡ï¼Œå› æ­¤å¯èƒ½ä¼šå‡ºç°è¿™æ ·ä¸€ç§æƒ…å†µï¼šåœ¨ä¸»åº“æ‰§è¡Œè¿™æ¡SQLè¯­å¥çš„æ—¶å€™ï¼Œç”¨çš„æ˜¯ç´¢å¼•aï¼›è€Œåœ¨å¤‡åº“æ‰§è¡Œè¿™æ¡SQLè¯­å¥çš„æ—¶å€™ï¼Œå´ä½¿ç”¨äº†ç´¢å¼•t_modifiedã€‚å› æ­¤ï¼ŒMySQLè®¤ä¸ºè¿™æ ·å†™æ˜¯æœ‰é£é™©çš„ã€‚</p><p>é‚£ä¹ˆï¼Œå¦‚æœæˆ‘æŠŠbinlogçš„æ ¼å¼æ”¹ä¸ºbinlog_format=â€˜rowâ€™ï¼Œ æ˜¯ä¸æ˜¯å°±æ²¡æœ‰è¿™ä¸ªé—®é¢˜äº†å‘¢ï¼Ÿæˆ‘ä»¬å…ˆæ¥çœ‹çœ‹è¿™æ—¶å€™binogä¸­çš„å†…å®¹å§ã€‚</p><p><img src="https://static001.geekbang.org/resource/image/d6/26/d67a38db154afff610ae3bb64e266826.png" alt=""></p><center><span class="reference">å›¾5 rowæ ¼å¼binlog ç¤ºä¾‹</span></center><p>å¯ä»¥çœ‹åˆ°ï¼Œä¸statementæ ¼å¼çš„binlogç›¸æ¯”ï¼Œå‰åçš„BEGINå’ŒCOMMITæ˜¯ä¸€æ ·çš„ã€‚ä½†æ˜¯ï¼Œrowæ ¼å¼çš„binlogé‡Œæ²¡æœ‰äº†SQLè¯­å¥çš„åŸæ–‡ï¼Œè€Œæ˜¯æ›¿æ¢æˆäº†ä¸¤ä¸ªeventï¼šTable_mapå’ŒDelete_rowsã€‚</p><ol>
<li>
<p>Table_map eventï¼Œç”¨äºè¯´æ˜æ¥ä¸‹æ¥è¦æ“ä½œçš„è¡¨æ˜¯teståº“çš„è¡¨t;</p>
</li>
<li>
<p>Delete_rows eventï¼Œç”¨äºå®šä¹‰åˆ é™¤çš„è¡Œä¸ºã€‚</p>
</li>
</ol><p>å…¶å®ï¼Œæˆ‘ä»¬é€šè¿‡å›¾5æ˜¯çœ‹ä¸åˆ°è¯¦ç»†ä¿¡æ¯çš„ï¼Œè¿˜éœ€è¦å€ŸåŠ©mysqlbinlogå·¥å…·ï¼Œç”¨ä¸‹é¢è¿™ä¸ªå‘½ä»¤è§£æå’ŒæŸ¥çœ‹binlogä¸­çš„å†…å®¹ã€‚å› ä¸ºå›¾5ä¸­çš„ä¿¡æ¯æ˜¾ç¤ºï¼Œè¿™ä¸ªäº‹åŠ¡çš„binlogæ˜¯ä»8900è¿™ä¸ªä½ç½®å¼€å§‹çš„ï¼Œæ‰€ä»¥å¯ä»¥ç”¨start-positionå‚æ•°æ¥æŒ‡å®šä»è¿™ä¸ªä½ç½®çš„æ—¥å¿—å¼€å§‹è§£æã€‚</p><pre><code>mysqlbinlog  -vv data/master.000001 --start-position=8900;
</code></pre><p><img src="https://static001.geekbang.org/resource/image/c3/c2/c342cf480d23b05d30a294b114cebfc2.png" alt=""></p><center><span class="reference">å›¾6 rowæ ¼å¼binlog ç¤ºä¾‹çš„è¯¦ç»†ä¿¡æ¯</span></center><p>ä»è¿™ä¸ªå›¾ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°ä»¥ä¸‹å‡ ä¸ªä¿¡æ¯ï¼š</p><ul>
<li>server id 1ï¼Œè¡¨ç¤ºè¿™ä¸ªäº‹åŠ¡æ˜¯åœ¨server_id=1çš„è¿™ä¸ªåº“ä¸Šæ‰§è¡Œçš„ã€‚</li>
<li>æ¯ä¸ªeventéƒ½æœ‰CRC32çš„å€¼ï¼Œè¿™æ˜¯å› ä¸ºæˆ‘æŠŠå‚æ•°binlog_checksumè®¾ç½®æˆäº†CRC32ã€‚</li>
<li>Table_map eventè·Ÿåœ¨å›¾5ä¸­çœ‹åˆ°çš„ç›¸åŒï¼Œæ˜¾ç¤ºäº†æ¥ä¸‹æ¥è¦æ‰“å¼€çš„è¡¨ï¼Œmapåˆ°æ•°å­—226ã€‚ç°åœ¨æˆ‘ä»¬è¿™æ¡SQLè¯­å¥åªæ“ä½œäº†ä¸€å¼ è¡¨ï¼Œå¦‚æœè¦æ“ä½œå¤šå¼ è¡¨å‘¢ï¼Ÿæ¯ä¸ªè¡¨éƒ½æœ‰ä¸€ä¸ªå¯¹åº”çš„Table_map eventã€éƒ½ä¼šmapåˆ°ä¸€ä¸ªå•ç‹¬çš„æ•°å­—ï¼Œç”¨äºåŒºåˆ†å¯¹ä¸åŒè¡¨çš„æ“ä½œã€‚</li>
<li>æˆ‘ä»¬åœ¨mysqlbinlogçš„å‘½ä»¤ä¸­ï¼Œä½¿ç”¨äº†-vvå‚æ•°æ˜¯ä¸ºäº†æŠŠå†…å®¹éƒ½è§£æå‡ºæ¥ï¼Œæ‰€ä»¥ä»ç»“æœé‡Œé¢å¯ä»¥çœ‹åˆ°å„ä¸ªå­—æ®µçš„å€¼ï¼ˆæ¯”å¦‚ï¼Œ@1=4ã€ @2=4è¿™äº›å€¼ï¼‰ã€‚</li>
<li>binlog_row_imageçš„é»˜è®¤é…ç½®æ˜¯FULLï¼Œå› æ­¤Delete_eventé‡Œé¢ï¼ŒåŒ…å«äº†åˆ æ‰çš„è¡Œçš„æ‰€æœ‰å­—æ®µçš„å€¼ã€‚å¦‚æœæŠŠbinlog_row_imageè®¾ç½®ä¸ºMINIMALï¼Œåˆ™åªä¼šè®°å½•å¿…è¦çš„ä¿¡æ¯ï¼Œåœ¨è¿™ä¸ªä¾‹å­é‡Œï¼Œå°±æ˜¯åªä¼šè®°å½•id=4è¿™ä¸ªä¿¡æ¯ã€‚</li>
<li>æœ€åçš„Xid eventï¼Œç”¨äºè¡¨ç¤ºäº‹åŠ¡è¢«æ­£ç¡®åœ°æäº¤äº†ã€‚</li>
</ul><p>ä½ å¯ä»¥çœ‹åˆ°ï¼Œå½“binlog_formatä½¿ç”¨rowæ ¼å¼çš„æ—¶å€™ï¼Œbinlogé‡Œé¢è®°å½•äº†çœŸå®åˆ é™¤è¡Œçš„ä¸»é”®idï¼Œè¿™æ ·binlogä¼ åˆ°å¤‡åº“å»çš„æ—¶å€™ï¼Œå°±è‚¯å®šä¼šåˆ é™¤id=4çš„è¡Œï¼Œä¸ä¼šæœ‰ä¸»å¤‡åˆ é™¤ä¸åŒè¡Œçš„é—®é¢˜ã€‚</p><h1>ä¸ºä»€ä¹ˆä¼šæœ‰mixedæ ¼å¼çš„binlogï¼Ÿ</h1><p>åŸºäºä¸Šé¢çš„ä¿¡æ¯ï¼Œæˆ‘ä»¬æ¥è®¨è®ºä¸€ä¸ªé—®é¢˜ï¼š<strong>ä¸ºä»€ä¹ˆä¼šæœ‰mixedè¿™ç§binlogæ ¼å¼çš„å­˜åœ¨åœºæ™¯ï¼Ÿ</strong>æ¨è®ºè¿‡ç¨‹æ˜¯è¿™æ ·çš„ï¼š</p><ul>
<li>å› ä¸ºæœ‰äº›statementæ ¼å¼çš„binlogå¯èƒ½ä¼šå¯¼è‡´ä¸»å¤‡ä¸ä¸€è‡´ï¼Œæ‰€ä»¥è¦ä½¿ç”¨rowæ ¼å¼ã€‚</li>
<li>ä½†rowæ ¼å¼çš„ç¼ºç‚¹æ˜¯ï¼Œå¾ˆå ç©ºé—´ã€‚æ¯”å¦‚ä½ ç”¨ä¸€ä¸ªdeleteè¯­å¥åˆ æ‰10ä¸‡è¡Œæ•°æ®ï¼Œç”¨statementçš„è¯å°±æ˜¯ä¸€ä¸ªSQLè¯­å¥è¢«è®°å½•åˆ°binlogä¸­ï¼Œå ç”¨å‡ åä¸ªå­—èŠ‚çš„ç©ºé—´ã€‚ä½†å¦‚æœç”¨rowæ ¼å¼çš„binlogï¼Œå°±è¦æŠŠè¿™10ä¸‡æ¡è®°å½•éƒ½å†™åˆ°binlogä¸­ã€‚è¿™æ ·åšï¼Œä¸ä»…ä¼šå ç”¨æ›´å¤§çš„ç©ºé—´ï¼ŒåŒæ—¶å†™binlogä¹Ÿè¦è€—è´¹IOèµ„æºï¼Œå½±å“æ‰§è¡Œé€Ÿåº¦ã€‚</li>
<li>æ‰€ä»¥ï¼ŒMySQLå°±å–äº†ä¸ªæŠ˜ä¸­æ–¹æ¡ˆï¼Œä¹Ÿå°±æ˜¯æœ‰äº†mixedæ ¼å¼çš„binlogã€‚mixedæ ¼å¼çš„æ„æ€æ˜¯ï¼ŒMySQLè‡ªå·±ä¼šåˆ¤æ–­è¿™æ¡SQLè¯­å¥æ˜¯å¦å¯èƒ½å¼•èµ·ä¸»å¤‡ä¸ä¸€è‡´ï¼Œå¦‚æœæœ‰å¯èƒ½ï¼Œå°±ç”¨rowæ ¼å¼ï¼Œå¦åˆ™å°±ç”¨statementæ ¼å¼ã€‚</li>
</ul><p>ä¹Ÿå°±æ˜¯è¯´ï¼Œmixedæ ¼å¼å¯ä»¥åˆ©ç”¨statmentæ ¼å¼çš„ä¼˜ç‚¹ï¼ŒåŒæ—¶åˆé¿å…äº†æ•°æ®ä¸ä¸€è‡´çš„é£é™©ã€‚</p><p>å› æ­¤ï¼Œå¦‚æœä½ çš„çº¿ä¸ŠMySQLè®¾ç½®çš„binlogæ ¼å¼æ˜¯statementçš„è¯ï¼Œé‚£åŸºæœ¬ä¸Šå°±å¯ä»¥è®¤ä¸ºè¿™æ˜¯ä¸€ä¸ªä¸åˆç†çš„è®¾ç½®ã€‚ä½ è‡³å°‘åº”è¯¥æŠŠbinlogçš„æ ¼å¼è®¾ç½®ä¸ºmixedã€‚</p><p>æ¯”å¦‚æˆ‘ä»¬è¿™ä¸ªä¾‹å­ï¼Œè®¾ç½®ä¸ºmixedåï¼Œå°±ä¼šè®°å½•ä¸ºrowæ ¼å¼ï¼›è€Œå¦‚æœæ‰§è¡Œçš„è¯­å¥å»æ‰limit 1ï¼Œå°±ä¼šè®°å½•ä¸ºstatementæ ¼å¼ã€‚</p><p>å½“ç„¶æˆ‘è¦è¯´çš„æ˜¯ï¼Œç°åœ¨è¶Šæ¥è¶Šå¤šçš„åœºæ™¯è¦æ±‚æŠŠMySQLçš„binlogæ ¼å¼è®¾ç½®æˆrowã€‚è¿™ä¹ˆåšçš„ç†ç”±æœ‰å¾ˆå¤šï¼Œæˆ‘æ¥ç»™ä½ ä¸¾ä¸€ä¸ªå¯ä»¥ç›´æ¥çœ‹å‡ºæ¥çš„å¥½å¤„ï¼š<strong>æ¢å¤æ•°æ®</strong>ã€‚</p><p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°±åˆ†åˆ«ä»deleteã€insertå’Œupdateè¿™ä¸‰ç§SQLè¯­å¥çš„è§’åº¦ï¼Œæ¥çœ‹çœ‹æ•°æ®æ¢å¤çš„é—®é¢˜ã€‚</p><p>é€šè¿‡å›¾6ä½ å¯ä»¥çœ‹å‡ºæ¥ï¼Œå³ä½¿æˆ‘æ‰§è¡Œçš„æ˜¯deleteè¯­å¥ï¼Œrowæ ¼å¼çš„binlogä¹Ÿä¼šæŠŠè¢«åˆ æ‰çš„è¡Œçš„æ•´è¡Œä¿¡æ¯ä¿å­˜èµ·æ¥ã€‚æ‰€ä»¥ï¼Œå¦‚æœä½ åœ¨æ‰§è¡Œå®Œä¸€æ¡deleteè¯­å¥ä»¥åï¼Œå‘ç°åˆ é”™æ•°æ®äº†ï¼Œå¯ä»¥ç›´æ¥æŠŠbinlogä¸­è®°å½•çš„deleteè¯­å¥è½¬æˆinsertï¼ŒæŠŠè¢«é”™åˆ çš„æ•°æ®æ’å…¥å›å»å°±å¯ä»¥æ¢å¤äº†ã€‚</p><p>å¦‚æœä½ æ˜¯æ‰§è¡Œé”™äº†insertè¯­å¥å‘¢ï¼Ÿé‚£å°±æ›´ç›´æ¥äº†ã€‚rowæ ¼å¼ä¸‹ï¼Œinsertè¯­å¥çš„binlogé‡Œä¼šè®°å½•æ‰€æœ‰çš„å­—æ®µä¿¡æ¯ï¼Œè¿™äº›ä¿¡æ¯å¯ä»¥ç”¨æ¥ç²¾ç¡®å®šä½åˆšåˆšè¢«æ’å…¥çš„é‚£ä¸€è¡Œã€‚è¿™æ—¶ï¼Œä½ ç›´æ¥æŠŠinsertè¯­å¥è½¬æˆdeleteè¯­å¥ï¼Œåˆ é™¤æ‰è¿™è¢«è¯¯æ’å…¥çš„ä¸€è¡Œæ•°æ®å°±å¯ä»¥äº†ã€‚</p><p>å¦‚æœæ‰§è¡Œçš„æ˜¯updateè¯­å¥çš„è¯ï¼Œbinlogé‡Œé¢ä¼šè®°å½•ä¿®æ”¹å‰æ•´è¡Œçš„æ•°æ®å’Œä¿®æ”¹åçš„æ•´è¡Œæ•°æ®ã€‚æ‰€ä»¥ï¼Œå¦‚æœä½ è¯¯æ‰§è¡Œäº†updateè¯­å¥çš„è¯ï¼Œåªéœ€è¦æŠŠè¿™ä¸ªeventå‰åçš„ä¸¤è¡Œä¿¡æ¯å¯¹è°ƒä¸€ä¸‹ï¼Œå†å»æ•°æ®åº“é‡Œé¢æ‰§è¡Œï¼Œå°±èƒ½æ¢å¤è¿™ä¸ªæ›´æ–°æ“ä½œäº†ã€‚</p><p>å…¶å®ï¼Œç”±deleteã€insertæˆ–è€…updateè¯­å¥å¯¼è‡´çš„æ•°æ®æ“ä½œé”™è¯¯ï¼Œéœ€è¦æ¢å¤åˆ°æ“ä½œä¹‹å‰çŠ¶æ€çš„æƒ…å†µï¼Œä¹Ÿæ—¶æœ‰å‘ç”Ÿã€‚MariaDBçš„<a href="https://mariadb.com/kb/en/library/flashback/">Flashback</a>å·¥å…·å°±æ˜¯åŸºäºä¸Šé¢ä»‹ç»çš„åŸç†æ¥å›æ»šæ•°æ®çš„ã€‚</p><p>è™½ç„¶mixedæ ¼å¼çš„binlogç°åœ¨å·²ç»ç”¨å¾—ä¸å¤šäº†ï¼Œä½†è¿™é‡Œæˆ‘è¿˜æ˜¯è¦å†å€Ÿç”¨ä¸€ä¸‹mixedæ ¼å¼æ¥è¯´æ˜ä¸€ä¸ªé—®é¢˜ï¼Œæ¥çœ‹ä¸€ä¸‹è¿™æ¡SQLè¯­å¥ï¼š</p><pre><code>mysql&gt; insert into t values(10,10, now());
</code></pre><p>å¦‚æœæˆ‘ä»¬æŠŠbinlogæ ¼å¼è®¾ç½®ä¸ºmixedï¼Œä½ è§‰å¾—MySQLä¼šæŠŠå®ƒè®°å½•ä¸ºrowæ ¼å¼è¿˜æ˜¯statementæ ¼å¼å‘¢ï¼Ÿ</p><p>å…ˆä¸è¦ç€æ€¥è¯´ç»“æœï¼Œæˆ‘ä»¬ä¸€èµ·æ¥çœ‹ä¸€ä¸‹è¿™æ¡è¯­å¥æ‰§è¡Œçš„æ•ˆæœã€‚</p><p><img src="https://static001.geekbang.org/resource/image/01/ef/0150301698979255a6f27711c35e9eef.png" alt=""></p><center><span class="reference">å›¾7 mixedæ ¼å¼å’Œnow()</span></center><p>å¯ä»¥çœ‹åˆ°ï¼ŒMySQLç”¨çš„å±…ç„¶æ˜¯statementæ ¼å¼ã€‚ä½ ä¸€å®šä¼šå¥‡æ€ªï¼Œå¦‚æœè¿™ä¸ªbinlogè¿‡äº†1åˆ†é’Ÿæ‰ä¼ ç»™å¤‡åº“çš„è¯ï¼Œé‚£ä¸»å¤‡çš„æ•°æ®ä¸å°±ä¸ä¸€è‡´äº†å—ï¼Ÿ</p><p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å†ç”¨mysqlbinlogå·¥å…·æ¥çœ‹çœ‹ï¼š</p><p><img src="https://static001.geekbang.org/resource/image/1a/41/1ad3a4c4b9a71955edba5195757dd041.png" alt=""></p><center><span class="reference">å›¾8 TIMESTAMP å‘½ä»¤</span></center><p>ä»å›¾ä¸­çš„ç»“æœå¯ä»¥çœ‹åˆ°ï¼ŒåŸæ¥binlogåœ¨è®°å½•eventçš„æ—¶å€™ï¼Œå¤šè®°äº†ä¸€æ¡å‘½ä»¤ï¼šSET TIMESTAMP=1546103491ã€‚å®ƒç”¨ SET TIMESTAMPå‘½ä»¤çº¦å®šäº†æ¥ä¸‹æ¥çš„now()å‡½æ•°çš„è¿”å›æ—¶é—´ã€‚</p><p>å› æ­¤ï¼Œä¸è®ºè¿™ä¸ªbinlogæ˜¯1åˆ†é’Ÿä¹‹åè¢«å¤‡åº“æ‰§è¡Œï¼Œè¿˜æ˜¯3å¤©åç”¨æ¥æ¢å¤è¿™ä¸ªåº“çš„å¤‡ä»½ï¼Œè¿™ä¸ªinsertè¯­å¥æ’å…¥çš„è¡Œï¼Œå€¼éƒ½æ˜¯å›ºå®šçš„ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œé€šè¿‡è¿™æ¡SET TIMESTAMPå‘½ä»¤ï¼ŒMySQLå°±ç¡®ä¿äº†ä¸»å¤‡æ•°æ®çš„ä¸€è‡´æ€§ã€‚</p><p>æˆ‘ä¹‹å‰çœ‹è¿‡æœ‰äººåœ¨é‡æ”¾binlogæ•°æ®çš„æ—¶å€™ï¼Œæ˜¯è¿™ä¹ˆåšçš„ï¼šç”¨mysqlbinlogè§£æå‡ºæ—¥å¿—ï¼Œç„¶åæŠŠé‡Œé¢çš„statementè¯­å¥ç›´æ¥æ‹·è´å‡ºæ¥æ‰§è¡Œã€‚</p><p>ä½ ç°åœ¨çŸ¥é“äº†ï¼Œè¿™ä¸ªæ–¹æ³•æ˜¯æœ‰é£é™©çš„ã€‚å› ä¸ºæœ‰äº›è¯­å¥çš„æ‰§è¡Œç»“æœæ˜¯ä¾èµ–äºä¸Šä¸‹æ–‡å‘½ä»¤çš„ï¼Œç›´æ¥æ‰§è¡Œçš„ç»“æœå¾ˆå¯èƒ½æ˜¯é”™è¯¯çš„ã€‚</p><p>æ‰€ä»¥ï¼Œç”¨binlogæ¥æ¢å¤æ•°æ®çš„æ ‡å‡†åšæ³•æ˜¯ï¼Œç”¨ mysqlbinlogå·¥å…·è§£æå‡ºæ¥ï¼Œç„¶åæŠŠè§£æç»“æœæ•´ä¸ªå‘ç»™MySQLæ‰§è¡Œã€‚ç±»ä¼¼ä¸‹é¢çš„å‘½ä»¤ï¼š</p><pre><code>mysqlbinlog master.000001  --start-position=2738 --stop-position=2973 | mysql -h127.0.0.1 -P13000 -u$user -p$pwd;
</code></pre><p>è¿™ä¸ªå‘½ä»¤çš„æ„æ€æ˜¯ï¼Œå°† master.000001 æ–‡ä»¶é‡Œé¢ä»ç¬¬2738å­—èŠ‚åˆ°ç¬¬2973å­—èŠ‚ä¸­é—´è¿™æ®µå†…å®¹è§£æå‡ºæ¥ï¼Œæ”¾åˆ°MySQLå»æ‰§è¡Œã€‚</p><h1>å¾ªç¯å¤åˆ¶é—®é¢˜</h1><p>é€šè¿‡ä¸Šé¢å¯¹MySQLä¸­binlogåŸºæœ¬å†…å®¹çš„ç†è§£ï¼Œä½ ç°åœ¨å¯ä»¥çŸ¥é“ï¼Œbinlogçš„ç‰¹æ€§ç¡®ä¿äº†åœ¨å¤‡åº“æ‰§è¡Œç›¸åŒçš„binlogï¼Œå¯ä»¥å¾—åˆ°ä¸ä¸»åº“ç›¸åŒçš„çŠ¶æ€ã€‚</p><p>å› æ­¤ï¼Œæˆ‘ä»¬å¯ä»¥è®¤ä¸ºæ­£å¸¸æƒ…å†µä¸‹ä¸»å¤‡çš„æ•°æ®æ˜¯ä¸€è‡´çš„ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå›¾1ä¸­Aã€Bä¸¤ä¸ªèŠ‚ç‚¹çš„å†…å®¹æ˜¯ä¸€è‡´çš„ã€‚å…¶å®ï¼Œå›¾1ä¸­æˆ‘ç”»çš„æ˜¯M-Sç»“æ„ï¼Œä½†å®é™…ç”Ÿäº§ä¸Šä½¿ç”¨æ¯”è¾ƒå¤šçš„æ˜¯åŒMç»“æ„ï¼Œä¹Ÿå°±æ˜¯å›¾9æ‰€ç¤ºçš„ä¸»å¤‡åˆ‡æ¢æµç¨‹ã€‚</p><p><img src="https://static001.geekbang.org/resource/image/20/56/20ad4e163115198dc6cf372d5116c956.png" alt=""></p><center><span class="reference">å›¾ 9 MySQLä¸»å¤‡åˆ‡æ¢æµç¨‹--åŒMç»“æ„</span></center><p>å¯¹æ¯”å›¾9å’Œå›¾1ï¼Œä½ å¯ä»¥å‘ç°ï¼ŒåŒMç»“æ„å’ŒM-Sç»“æ„ï¼Œå…¶å®åŒºåˆ«åªæ˜¯å¤šäº†ä¸€æ¡çº¿ï¼Œå³ï¼šèŠ‚ç‚¹Aå’ŒBä¹‹é—´æ€»æ˜¯äº’ä¸ºä¸»å¤‡å…³ç³»ã€‚è¿™æ ·åœ¨åˆ‡æ¢çš„æ—¶å€™å°±ä¸ç”¨å†ä¿®æ”¹ä¸»å¤‡å…³ç³»ã€‚</p><p>ä½†æ˜¯ï¼ŒåŒMç»“æ„è¿˜æœ‰ä¸€ä¸ªé—®é¢˜éœ€è¦è§£å†³ã€‚</p><p>ä¸šåŠ¡é€»è¾‘åœ¨èŠ‚ç‚¹Aä¸Šæ›´æ–°äº†ä¸€æ¡è¯­å¥ï¼Œç„¶åå†æŠŠç”Ÿæˆçš„binlog å‘ç»™èŠ‚ç‚¹Bï¼ŒèŠ‚ç‚¹Bæ‰§è¡Œå®Œè¿™æ¡æ›´æ–°è¯­å¥åä¹Ÿä¼šç”Ÿæˆbinlogã€‚ï¼ˆæˆ‘å»ºè®®ä½ æŠŠå‚æ•°log_slave_updatesè®¾ç½®ä¸ºonï¼Œè¡¨ç¤ºå¤‡åº“æ‰§è¡Œrelay logåç”Ÿæˆbinlogï¼‰ã€‚</p><p>é‚£ä¹ˆï¼Œå¦‚æœèŠ‚ç‚¹AåŒæ—¶æ˜¯èŠ‚ç‚¹Bçš„å¤‡åº“ï¼Œç›¸å½“äºåˆæŠŠèŠ‚ç‚¹Bæ–°ç”Ÿæˆçš„binlogæ‹¿è¿‡æ¥æ‰§è¡Œäº†ä¸€æ¬¡ï¼Œç„¶åèŠ‚ç‚¹Aå’ŒBé—´ï¼Œä¼šä¸æ–­åœ°å¾ªç¯æ‰§è¡Œè¿™ä¸ªæ›´æ–°è¯­å¥ï¼Œä¹Ÿå°±æ˜¯å¾ªç¯å¤åˆ¶äº†ã€‚è¿™ä¸ªè¦æ€ä¹ˆè§£å†³å‘¢ï¼Ÿ</p><p>ä»ä¸Šé¢çš„å›¾6ä¸­å¯ä»¥çœ‹åˆ°ï¼ŒMySQLåœ¨binlogä¸­è®°å½•äº†è¿™ä¸ªå‘½ä»¤ç¬¬ä¸€æ¬¡æ‰§è¡Œæ—¶æ‰€åœ¨å®ä¾‹çš„server idã€‚å› æ­¤ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨ä¸‹é¢çš„é€»è¾‘ï¼Œæ¥è§£å†³ä¸¤ä¸ªèŠ‚ç‚¹é—´çš„å¾ªç¯å¤åˆ¶çš„é—®é¢˜ï¼š</p><ol>
<li>
<p>è§„å®šä¸¤ä¸ªåº“çš„server idå¿…é¡»ä¸åŒï¼Œå¦‚æœç›¸åŒï¼Œåˆ™å®ƒä»¬ä¹‹é—´ä¸èƒ½è®¾å®šä¸ºä¸»å¤‡å…³ç³»ï¼›</p>
</li>
<li>
<p>ä¸€ä¸ªå¤‡åº“æ¥åˆ°binlogå¹¶åœ¨é‡æ”¾çš„è¿‡ç¨‹ä¸­ï¼Œç”Ÿæˆä¸åŸbinlogçš„server idç›¸åŒçš„æ–°çš„binlogï¼›</p>
</li>
<li>
<p>æ¯ä¸ªåº“åœ¨æ”¶åˆ°ä»è‡ªå·±çš„ä¸»åº“å‘è¿‡æ¥çš„æ—¥å¿—åï¼Œå…ˆåˆ¤æ–­server idï¼Œå¦‚æœè·Ÿè‡ªå·±çš„ç›¸åŒï¼Œè¡¨ç¤ºè¿™ä¸ªæ—¥å¿—æ˜¯è‡ªå·±ç”Ÿæˆçš„ï¼Œå°±ç›´æ¥ä¸¢å¼ƒè¿™ä¸ªæ—¥å¿—ã€‚</p>
</li>
</ol><p>æŒ‰ç…§è¿™ä¸ªé€»è¾‘ï¼Œå¦‚æœæˆ‘ä»¬è®¾ç½®äº†åŒMç»“æ„ï¼Œæ—¥å¿—çš„æ‰§è¡Œæµå°±ä¼šå˜æˆè¿™æ ·ï¼š</p><ol>
<li>
<p>ä»èŠ‚ç‚¹Aæ›´æ–°çš„äº‹åŠ¡ï¼Œbinlogé‡Œé¢è®°çš„éƒ½æ˜¯Açš„server idï¼›</p>
</li>
<li>
<p>ä¼ åˆ°èŠ‚ç‚¹Bæ‰§è¡Œä¸€æ¬¡ä»¥åï¼ŒèŠ‚ç‚¹Bç”Ÿæˆçš„binlog çš„server idä¹Ÿæ˜¯Açš„server idï¼›</p>
</li>
<li>
<p>å†ä¼ å›ç»™èŠ‚ç‚¹Aï¼ŒAåˆ¤æ–­åˆ°è¿™ä¸ªserver idä¸è‡ªå·±çš„ç›¸åŒï¼Œå°±ä¸ä¼šå†å¤„ç†è¿™ä¸ªæ—¥å¿—ã€‚æ‰€ä»¥ï¼Œæ­»å¾ªç¯åœ¨è¿™é‡Œå°±æ–­æ‰äº†ã€‚</p>
</li>
</ol><h1>å°ç»“</h1><p>ä»Šå¤©è¿™ç¯‡æ–‡ç« ï¼Œæˆ‘ç»™ä½ ä»‹ç»äº†MySQL binlogçš„æ ¼å¼å’Œä¸€äº›åŸºæœ¬æœºåˆ¶ï¼Œæ˜¯åé¢æˆ‘è¦ä»‹ç»çš„è¯»å†™åˆ†ç¦»ç­‰ç³»åˆ—æ–‡ç« çš„èƒŒæ™¯çŸ¥è¯†ï¼Œå¸Œæœ›ä½ å¯ä»¥è®¤çœŸæ¶ˆåŒ–ç†è§£ã€‚</p><p>binlogåœ¨MySQLçš„å„ç§é«˜å¯ç”¨æ–¹æ¡ˆä¸Šæ‰®æ¼”äº†é‡è¦è§’è‰²ã€‚ä»Šå¤©ä»‹ç»çš„å¯ä»¥è¯´æ˜¯æ‰€æœ‰MySQLé«˜å¯ç”¨æ–¹æ¡ˆçš„åŸºç¡€ã€‚åœ¨è¿™ä¹‹ä¸Šæ¼”åŒ–å‡ºäº†è¯¸å¦‚å¤šèŠ‚ç‚¹ã€åŠåŒæ­¥ã€MySQL group replicationç­‰ç›¸å¯¹å¤æ‚çš„æ–¹æ¡ˆã€‚</p><p>æˆ‘ä¹Ÿè·Ÿä½ ä»‹ç»äº†MySQLä¸åŒæ ¼å¼binlogçš„ä¼˜ç¼ºç‚¹ï¼Œå’Œè®¾è®¡è€…çš„æ€è€ƒã€‚å¸Œæœ›ä½ åœ¨åšç³»ç»Ÿå¼€å‘æ—¶å€™ï¼Œä¹Ÿèƒ½å€Ÿé‰´è¿™äº›è®¾è®¡æ€æƒ³ã€‚</p><p>æœ€åï¼Œæˆ‘ç»™ä½ ç•™ä¸‹ä¸€ä¸ªæ€è€ƒé¢˜å§ã€‚</p><p>è¯´åˆ°å¾ªç¯å¤åˆ¶é—®é¢˜çš„æ—¶å€™ï¼Œæˆ‘ä»¬è¯´MySQLé€šè¿‡åˆ¤æ–­server idçš„æ–¹å¼ï¼Œæ–­æ‰æ­»å¾ªç¯ã€‚ä½†æ˜¯ï¼Œè¿™ä¸ªæœºåˆ¶å…¶å®å¹¶ä¸å®Œå¤‡ï¼Œåœ¨æŸäº›åœºæ™¯ä¸‹ï¼Œè¿˜æ˜¯æœ‰å¯èƒ½å‡ºç°æ­»å¾ªç¯ã€‚</p><p>ä½ èƒ½æ„é€ å‡ºä¸€ä¸ªè¿™æ ·çš„åœºæ™¯å—ï¼Ÿåˆåº”è¯¥æ€ä¹ˆè§£å†³å‘¢ï¼Ÿ</p><p>ä½ å¯ä»¥æŠŠä½ çš„è®¾è®¡å’Œåˆ†æå†™åœ¨è¯„è®ºåŒºï¼Œæˆ‘ä¼šåœ¨ä¸‹ä¸€ç¯‡æ–‡ç« è·Ÿä½ è®¨è®ºè¿™ä¸ªé—®é¢˜ã€‚æ„Ÿè°¢ä½ çš„æ”¶å¬ï¼Œä¹Ÿæ¬¢è¿ä½ æŠŠè¿™ç¯‡æ–‡ç« åˆ†äº«ç»™æ›´å¤šçš„æœ‹å‹ä¸€èµ·é˜…è¯»ã€‚</p><h1>ä¸ŠæœŸé—®é¢˜æ—¶é—´</h1><p>ä¸ŠæœŸæˆ‘ç•™ç»™ä½ çš„é—®é¢˜æ˜¯ï¼Œä½ åœ¨ä»€ä¹ˆæ—¶å€™ä¼šæŠŠçº¿ä¸Šç”Ÿäº§åº“è®¾ç½®æˆâ€œéåŒ1â€ã€‚æˆ‘ç›®å‰çŸ¥é“çš„åœºæ™¯ï¼Œæœ‰ä»¥ä¸‹è¿™äº›ï¼š</p><ol>
<li>
<p>ä¸šåŠ¡é«˜å³°æœŸã€‚ä¸€èˆ¬å¦‚æœæœ‰é¢„çŸ¥çš„é«˜å³°æœŸï¼ŒDBAä¼šæœ‰é¢„æ¡ˆï¼ŒæŠŠä¸»åº“è®¾ç½®æˆâ€œéåŒ1â€ã€‚</p>
</li>
<li>
<p>å¤‡åº“å»¶è¿Ÿï¼Œä¸ºäº†è®©å¤‡åº“å°½å¿«èµ¶ä¸Šä¸»åº“ã€‚@æ°¸æ’è®°å¿†å’Œ@Second Sightæåˆ°äº†è¿™ä¸ªåœºæ™¯ã€‚</p>
</li>
<li>
<p>ç”¨å¤‡ä»½æ¢å¤ä¸»åº“çš„å‰¯æœ¬ï¼Œåº”ç”¨binlogçš„è¿‡ç¨‹ï¼Œè¿™ä¸ªè·Ÿä¸Šä¸€ç§åœºæ™¯ç±»ä¼¼ã€‚</p>
</li>
<li>
<p>æ‰¹é‡å¯¼å…¥æ•°æ®çš„æ—¶å€™ã€‚</p>
</li>
</ol><p>ä¸€èˆ¬æƒ…å†µä¸‹ï¼ŒæŠŠç”Ÿäº§åº“æ”¹æˆâ€œéåŒ1â€é…ç½®ï¼Œæ˜¯è®¾ç½®innodb_flush_logs_at_trx_commit=2ã€sync_binlog=1000ã€‚</p><p>è¯„è®ºåŒºç•™è¨€ç‚¹èµæ¿ï¼š</p><blockquote>
<p>@way åŒå­¦æåˆ°äº†ä¸€ä¸ªæœ‰è¶£çš„ç°è±¡ï¼Œç”±äºä»åº“è®¾ç½®äº† binlog_group_commit_sync_delayå’Œbinlog_group_commit_sync_no_delay_countå¯¼è‡´ä¸€ç›´å»¶è¿Ÿçš„æƒ…å†µã€‚æˆ‘ä»¬åœ¨ä¸»åº“è®¾ç½®è¿™ä¸¤ä¸ªå‚æ•°ï¼Œæ˜¯ä¸ºäº†å‡å°‘binlogçš„å†™ç›˜å‹åŠ›ã€‚å¤‡åº“è¿™ä¹ˆè®¾ç½®ï¼Œå°¤å…¶åœ¨â€œå¿«è¦è¿½ä¸Šâ€çš„æ—¶å€™ï¼Œå°±åè€Œä¼šå—è¿™ä¸¤ä¸ªå‚æ•°çš„æ‹–ç´¯ã€‚ä¸€èˆ¬è¿½ä¸»å¤‡å°±ç”¨â€œéåŒ1â€ï¼ˆè¿½ä¸Šè®°å¾—æ”¹å›æ¥ï¼‰ã€‚</p>
</blockquote><blockquote>
<p>@ä¸€å¤§åª åŒå­¦éªŒè¯äº†åœ¨sync_binlog=0çš„æƒ…å†µä¸‹ï¼Œè®¾ç½®sync_delayå’Œsync_no_delay_countçš„ç°è±¡ï¼Œç‚¹èµè¿™ç§å‘ç°è¾¹ç•Œçš„æ„è¯†å’Œæ‰‹åŠ¨éªŒè¯çš„å¥½ä¹ æƒ¯ã€‚æ˜¯è¿™æ ·çš„ï¼šsync_delayå’Œsync_no_delay_countçš„é€»è¾‘å…ˆèµ°ï¼Œå› æ­¤è¯¥ç­‰è¿˜æ˜¯ä¼šç­‰ã€‚ç­‰åˆ°æ»¡è¶³äº†è¿™ä¸¤ä¸ªæ¡ä»¶ä¹‹ä¸€ï¼Œå°±è¿›å…¥sync_binlogé˜¶æ®µã€‚è¿™æ—¶å€™å¦‚æœåˆ¤æ–­sync_binlog=0ï¼Œå°±ç›´æ¥è·³è¿‡ï¼Œè¿˜æ˜¯ä¸è°ƒfsyncã€‚</p>
</blockquote><blockquote>
<p>@é”…å­ åŒå­¦æåˆ°ï¼Œè®¾ç½®sync_binlog=0çš„æ—¶å€™ï¼Œè¿˜æ˜¯å¯ä»¥çœ‹åˆ°binlogæ–‡ä»¶é©¬ä¸Šåšäº†ä¿®æ”¹ã€‚è¿™ä¸ªæ˜¯å¯¹çš„ï¼Œæˆ‘ä»¬è¯´â€œå†™åˆ°äº†page cacheâ€ï¼Œå°±æ˜¯æ–‡ä»¶ç³»ç»Ÿçš„page cacheã€‚è€Œä½ ç”¨lså‘½ä»¤çœ‹åˆ°çš„å°±æ˜¯æ–‡ä»¶ç³»ç»Ÿè¿”å›çš„ç»“æœã€‚</p>
</blockquote><p><img src="https://static001.geekbang.org/resource/image/09/77/09c1073f99cf71d2fb162a716b5fa577.jpg" alt=""></p>
                    </div>
                </div>

            </div>
            <div data-v-87ffcada="" class="article-comments pd"><h2 data-v-87ffcada=""><span
                    data-v-87ffcada="">ç²¾é€‰ç•™è¨€</span></h2>
                <ul data-v-87ffcada="">
                    
                    <li data-v-87ffcada="" class="comment-item"><img
                            src="https://static001.geekbang.org/account/avatar/00/0f/84/49/abb7bfe3.jpg" class="avatar">
                        <div class="info">
                            <div class="hd"><span class="username">è§‚å¼ˆé“äºº</span>
                            </div>
                            <div class="bd">è€å¸ˆä½ å¥½ï¼Œé—®ä¸ªå¤‡ä»½é—®é¢˜ï¼Œå‡å¦‚å‘¨æ—¥23ç‚¹åšäº†å¤‡ä»½ï¼Œå‘¨äºŒ20ç‚¹éœ€è¦æ¢å¤æ•°æ®ï¼Œé‚£ä¹ˆåœ¨ç”¨binlogæ¢å¤æ—¶ï¼Œå¦‚ä½•æ°å¥½å®šä½åˆ°å‘¨æ—¥23ç‚¹çš„binlog,è°¢è°¢ã€‚ <br></div>
                            <span class="time">2019-01-07 07:44</span>
                            
                            <div class="reply">
                                <div class="reply-hd"><span>ä½œè€…å›å¤</span></div>
                                <p class="reply-content">Mysqlbinlogæœ‰ä¸ªå‚æ•°â€”stop-datetime </p>
                                <p class="reply-time">2019-01-07 09:55</p>
                            </div>
                            
                        </div>
                    </li>
                    
                    <li data-v-87ffcada="" class="comment-item"><img
                            src="https://static001.geekbang.org/account/avatar/00/10/41/27/3ff1a1d6.jpg" class="avatar">
                        <div class="info">
                            <div class="hd"><span class="username">hua168</span>
                            </div>
                            <div class="bd">å¤§ç¥ï¼Œæˆ‘å‰äº›å¤©å»é¢è¯•ï¼Œé¢è¯•å®˜é—®äº†ä¸€é¢˜:<br>mysqlåšä¸»ä»ï¼Œä¸€æ®µæ—¶é—´åå‘ç°ä»åº“åœ¨é«˜å³°æœŸä¼šå‘ç”Ÿä¸€ä¸¤æ¡æ¡æ•°æ®ä¸¢å¤±ï¼ˆä¸è®°å¾—æ˜¯æŸ¥è¯¢è¡Œç©ºç™½è¿˜æ˜¯æŸ¥è¯¢ä¸åˆ°äº†ï¼‰ï¼Œä¸»ä»æ­£å¸¸ï¼Œæ€ä¹ˆåˆ¤æ–­ï¼Ÿ<br>1.æˆ‘é—®ä»–æ˜¯ä¸æ˜¯æ‰€ä»¥ä»åº“éƒ½æ˜¯ä¸€æ ·ï¼Œä»–è¯´ä¸ä¸€æ ·<br>2.æˆ‘è¯´ä½å³°æœŸé‡åšæ–°çš„ä»åº“è§‚å¯Ÿï¼ŒæŸ¥çœ‹æ—¥å¿—æœ‰æ²¡æœ‰æŠ¥é”™ï¼Ÿä»–å¥½åƒä¸æ»¡æ„è¿™ä¸ªç­”æ¡ˆã€‚<br><br> äºŒã€ä»–è¿˜é—®ä¸»åº“æŒ‚äº†æ€ä¹ˆåŠï¼Ÿ<br>1.  mysqlä¸»ä»+keepalived&#47;heartbeat<br>     æœ‰è„‘è£‚ï¼Œè¿˜æ˜¯æœ‰å‰é¢ä¸¢æ•°æ®é—®é¢˜<br>2. ç”¨MMMæˆ–HMAä¹‹ç±»<br>3.ç”¨ZKä¹‹ç±»<br><br>ä¸‰ã€å†™çš„å‹åŠ›å¤§æ€ä¹ˆåŠï¼Ÿ<br>æˆ‘å›ç­”ï¼Œåˆ†åº“ï¼Œåˆ†è¡¨<br><br>æ„Ÿè§‰æ•´å¤©ä»–éƒ½ä¸æ€ä¹ˆæ»¡æ„ï¼Œæœç„¶æ²¡è®©æˆ‘å¤è¯•äº†ï¼Œæˆ‘éƒé—·å‘€ï¼Œæˆ‘å°±é¢è¯•è¿ç»´çš„ï¼Œé—®æ•°æ®è¿™ä¹ˆè¯¦ç»†ã€‚ğŸ˜‚<br>å¤§ç¥ï¼Œèƒ½è¯´ä¸‹æˆ‘å“ªé‡Œæœ‰é—®é¢˜å—ï¼Ÿç°åœ¨æˆ‘éƒ½æƒ³ä¸æ˜ç™½ğŸ˜‚ <br></div>
                            <span class="time">2019-01-08 05:49</span>
                            
                            <div class="reply">
                                <div class="reply-hd"><span>ä½œè€…å›å¤</span></div>
                                <p class="reply-content">è¿ç»´ç°åœ¨è¦æ±‚ä¹ŸæŒºé«˜çš„<br><br>ç¬¬ä¸€ä¸ªé—®é¢˜å…¶å®æˆ‘ä¹Ÿæ²¡çœ‹æ‡‚ï¼Œâ€œé«˜å³°æœŸä¸¢æ•°æ®â€æ˜¯æŒ‡ä¸»å¤‡å»¶è¿ŸæŸ¥ä¸åˆ°æ•°æ®ï¼Œè¿˜æ˜¯çœŸçš„ä¸¢äº†ï¼Œå¾—å…ˆé—®æ¸…æ¥šä¸‹<br><br>ä¸è¿‡ä½ å›ç­”çš„ç¬¬äºŒç‚¹ä¸å¤ªå¥½ï¼Œä½å³°æœŸé‡åšè¿™ä¸ªå¤§å®¶éƒ½çŸ¥é“è¦è¿™ä¹ˆåšï¼Œè€Œä¸”åªæ˜¯ä¿®å¤åŠ¨ä½œï¼Œæ²¡åŠæ³•ç”¨æ¥å®šä½åŸå› ï¼Œé¢è¯•å®˜æ˜¯è¦é—®ä½ åˆ†æé—®é¢˜çš„æ–¹æ³•ï¼ˆæ–¹å‘é”™è¯¯ï¼‰<br>é‡æ­ä»åº“é”™è¯¯æ—¥å¿—é‡Œé¢ä»€ä¹ˆéƒ½æ²¡æœ‰çš„ï¼ˆè¿™ä¸ªæ¯”è¾ƒå¯æƒœï¼Œæš´éœ²äº†å¯¹å­—èŠ‚ä¸å¤Ÿäº†è§£ï¼Œä¸€èˆ¬ä¸äº†è§£çš„æ–¹æ³•åœ¨é¢è¯•çš„æ—¶å€™æ˜¯ä¸å¦‚ä¸è¯´çš„ï¼‰<br><br>ç¬¬äºŒä¸ªé—®é¢˜ä¸‰ç‚¹éƒ½æ˜¯ä½ å›ç­”çš„å—ï¼Ÿé‚£è¿˜ç®—å›ç­”å¾—å¯ä»¥çš„ï¼Œä½†æ˜¯ä¸èƒ½åªè®²åè¯ï¼Œè¦æ‰¾ä¸ªä½ ç†Ÿæ‚‰ç»†èŠ‚çš„æ–¹æ¡ˆå±•å¼€ä¸€ä¸‹<br><br>ä¸‰æ–¹å‘ä¹Ÿæ˜¯å¯¹çš„<br><br>æˆ‘ä¼°è®¡å°±æ˜¯ç¬¬ä¸€ä¸ªé—®é¢˜å‡åˆ†æ¯”è¾ƒå‰å®³</p>
                                <p class="reply-time">2019-01-08 11:24</p>
                            </div>
                            
                        </div>
                    </li>
                    
                    <li data-v-87ffcada="" class="comment-item"><img
                            src="" class="avatar">
                        <div class="info">
                            <div class="hd"><span class="username">å •è½å¤©ä½¿</span>
                            </div>
                            <div class="bd">è€å¸ˆï¼Œæ‚¨å¥½ï¼Œé—®ä¸€ä¸ªå…³äºchange bufferçš„é—®é¢˜ã€‚<br>å¯¹äºinsertè¯­å¥æ¥è¯´ï¼Œchange bufferçš„ä¼˜åŒ–ä¸»è¦åœ¨éå”¯ä¸€çš„äºŒçº§ç´¢å¼•ä¸Šï¼Œå› ä¸ºä¸»é”®æ˜¯å”¯ä¸€ç´¢å¼•ï¼Œæ’å…¥å¿…é¡»è¦åˆ¤æ–­æ˜¯å¦å­˜åœ¨ã€‚<br>é‚£ä¹ˆå¯¹äºupdateè¯­å¥å‘¢ï¼Ÿå¦‚ä¸‹ï¼ˆå‡è®¾cæœ‰éå”¯ä¸€ç´¢å¼•ï¼Œidæ˜¯ä¸»é”®ï¼Œdæ²¡æœ‰ç´¢å¼•ï¼‰ï¼š<br>update t set d=2 where c=10;<br>åŸå…ˆä»¥ä¸ºï¼šä»ç´¢å¼•cå–å‡ºidä¹‹åï¼Œä¸ä¼šå›è¡¨ï¼Œä¹Ÿä¸ä¼šæŠŠä¿®æ”¹è¡Œçš„æ•°æ®è¯»å…¥å†…å­˜ï¼Œè€Œæ˜¯ç›´æ¥åœ¨change bufferä¸­è®°å½•ä¸€ä¸‹ã€‚ä½†çœ‹äº†ä»Šå¤©å¾—å†…å®¹ä¹‹ååˆè¿·ç³Šäº†ï¼Œå› ä¸ºå¦‚æœä¸æŠŠä¿®æ”¹è¡Œçš„æ•°æ®è¯»å…¥å†…å­˜ï¼Œå®ƒåˆæ€ä¹ˆæŠŠæ—§æ•°æ®å†™å…¥binlogä¸­å‘¢ï¼Ÿ<br>æ‰€ä»¥æˆ‘æƒ³é—®çš„å°±æ˜¯ï¼Œä¸Šé¢çš„sqlè¯­å¥ä¼šä¸ä¼šæŠŠä¿®æ”¹è¡Œçš„å†…å®¹ä¹Ÿè¯»è¿›å†…å­˜ï¼Ÿå¦‚æœè¯»è¿›å†…å­˜ï¼Œé‚£è¯»è¿›å†…å­˜çš„è¿™ä¸€æ­¥éš¾é“å°±ä¸ºäº†å†™binlogå—ï¼Ÿå¦‚æœä¸è¯»è¿›å†…å­˜ï¼Œé‚£binlogä¸­çš„æ—§æ•°æ®åˆæ˜¯æ€ä¹ˆæ¥çš„å‘¢ï¼Ÿè¿˜æœ‰deleteè¯­å¥ä¹ŸåŒç†ã€‚ <br></div>
                            <span class="time">2019-01-07 20:53</span>
                            
                            <div class="reply">
                                <div class="reply-hd"><span>ä½œè€…å›å¤</span></div>
                                <p class="reply-content">ä¿®æ”¹çš„è¡Œè¦è¯»å…¥å†…å­˜å‘€<br><br>å†™binlogåªéœ€è¦ä¸»é”®ç´¢å¼•ä¸Šçš„å€¼<br><br>ä½ è¿™ä¸ªè¯­å¥çš„è¯ï¼Œå¦‚æœå­—æ®µc dä¸Šéƒ½æœ‰ç´¢å¼•ï¼Œé‚£ä¹ˆcç”¨ä¸ä¸Šchsnge buffer,<br>Då¯èƒ½å¯ä»¥åŒä¸Š</p>
                                <p class="reply-time">2019-01-07 22:06</p>
                            </div>
                            
                        </div>
                    </li>
                    
                    <li data-v-87ffcada="" class="comment-item"><img
                            src="http://thirdwx.qlogo.cn/mmopen/vi_32/NhbRicjvf8v3K6D3v1FtOicxOciaPZQsCjCmuGCqea4vJeRVaLicKLpAcFQlcTgLvczBWY7SYDkeOtibxXj1PGl7Nug/132" class="avatar">
                        <div class="info">
                            <div class="hd"><span class="username">æŸšå­</span>
                            </div>
                            <div class="bd">å¤§ä½¬æ‚¨å¥½ï¼Œæ–‡ä¸­è¯´ç°åœ¨è¶Šæ¥è¶Šå¤šçš„ä½¿ç”¨rowæ–¹å¼çš„binlogï¼Œé‚£ä¹ˆåªèƒ½é€‰æ‹©æ¥å—å†™å…¥æ…¢å’Œå ç”¨ç©ºé—´å¤§çš„å¼Šç«¯ä¹ˆï¼Ÿ <br></div>
                            <span class="time">2019-01-07 14:50</span>
                            
                            <div class="reply">
                                <div class="reply-hd"><span>ä½œè€…å›å¤</span></div>
                                <p class="reply-content">æ˜¯çš„ï¼Œå½“ç„¶è¿˜æœ‰minimalå¯é€‰ï¼Œä¼šå¥½äº›ğŸ˜„</p>
                                <p class="reply-time">2019-01-07 16:34</p>
                            </div>
                            
                        </div>
                    </li>
                    
                    <li data-v-87ffcada="" class="comment-item"><img
                            src="https://static001.geekbang.org/account/avatar/00/11/11/18/8cee35f9.jpg" class="avatar">
                        <div class="info">
                            <div class="hd"><span class="username">HuaMax</span>
                            </div>
                            <div class="bd">è¯¾åé¢˜ã€‚å¦‚æœåœ¨åŒæ­¥çš„è¿‡ç¨‹ä¸­ä¿®æ”¹äº†server idï¼Œé‚£ç”¨åŸserver id ç”Ÿæˆçš„logè¢«ä¸¤ä¸ªMè®¤ä¸ºéƒ½ä¸æ˜¯è‡ªå·±çš„è€Œè¢«å¾ªç¯æ‰§è¡Œï¼Œä¸çŸ¥è¿™ç§æƒ…å†µä¼šä¸ä¼šå‘ç”Ÿ <br></div>
                            <span class="time">2019-01-07 14:06</span>
                            
                            <div class="reply">
                                <div class="reply-hd"><span>ä½œè€…å›å¤</span></div>
                                <p class="reply-content">æ˜¯çš„ï¼Œä¼š</p>
                                <p class="reply-time">2019-01-07 22:00</p>
                            </div>
                            
                        </div>
                    </li>
                    
                    <li data-v-87ffcada="" class="comment-item"><img
                            src="https://static001.geekbang.org/account/avatar/00/11/45/64/2b09a36b.jpg" class="avatar">
                        <div class="info">
                            <div class="hd"><span class="username">é£äºŒä¸­</span>
                            </div>
                            <div class="bd">åœ¨ä¸»åº“æ‰§è¡Œè¿™æ¡ SQL è¯­å¥çš„æ—¶å€™ï¼Œç”¨çš„æ˜¯ç´¢å¼• aï¼›è€Œåœ¨å¤‡åº“æ‰§è¡Œè¿™æ¡ SQL è¯­å¥çš„æ—¶å€™ï¼Œå´ä½¿ç”¨äº†ç´¢å¼• t_modified<br>è€å¸ˆï¼Œæ‚¨å¥½ï¼Œè¿™é‡Œç´¢å¼•é€‰æ‹©ä¸ä¸€æ ·ï¼Œæ˜¯å› ä¸ºå‰é¢æåˆ°çš„mysql ä¼šé€‰é”™ç´¢å¼•å—ï¼Ÿè¿™ç§æƒ…å†µåº”è¯¥å‘ç”Ÿæ¯”è¾ƒå°‘å§ï¼Œè¿™é‡Œåº”è¯¥éƒ½ä¼šé€‰æ‹©ç´¢å¼•aå§ï¼Œè¿˜æ˜¯è¯´è¿™é‡Œåªæ˜¯ä¸€ä¸ªäº‹ä¾‹ï¼Œè¿˜æœ‰æ›´å¤æ‚çš„æƒ…å†µ <br></div>
                            <span class="time">2019-01-12 13:59</span>
                            
                            <div class="reply">
                                <div class="reply-hd"><span>ä½œè€…å›å¤</span></div>
                                <p class="reply-content">å¯¹ï¼Œåªæ˜¯ä¸€ä¸ªä¸¾ä¾‹çš„</p>
                                <p class="reply-time">2019-01-12 15:19</p>
                            </div>
                            
                        </div>
                    </li>
                    
                    <li data-v-87ffcada="" class="comment-item"><img
                            src="http://thirdwx.qlogo.cn/mmopen/vi_32/2au3iaQvydOVeVY1vlSVeGia7SvrpWFVibdxdjKiafof3RhzFO9e8sxKIBxKXJQibRNpOWMiaSyzWDGJMZTHRae3u84Q/132" class="avatar">
                        <div class="info">
                            <div class="hd"><span class="username">ç§‹ä¸€åŒ¹</span>
                            </div>
                            <div class="bd">è€å¸ˆï¼Œæ‚¨å¥½ã€‚æˆ‘è¿™æ…¢äº†ä¸€æ­¥ã€‚ã€‚ã€‚å­¦ä¹ æ™šäº†ç‚¹ã€‚æˆ‘è¿™ä¹‹å‰ç¢°åˆ°äº†ä¸ªé—®é¢˜ï¼Œæœ‰ä¸€æ®µæ—¶é—´ä¸»ä»å¤åˆ¶å»¶è¿Ÿæ¯”è¾ƒå‰å®³ï¼Œè¾¾åˆ°5så·¦å³å§ï¼Œä¸€èˆ¬éƒ½æ˜¯1ï½2ç§’å§ã€‚é¦–å…ˆæ’é™¤ä¸æ˜¯ç½‘ç»œåŸå› ã€‚æƒ³é—®ä¸‹è¿˜æœ‰å“ªäº›å› ç´ ä¼šå½±å“ä¸»ä»å¤åˆ¶å‘¢ï¼Ÿ <br></div>
                            <span class="time">2019-01-10 13:51</span>
                            
                            <div class="reply">
                                <div class="reply-hd"><span>ä½œè€…å›å¤</span></div>
                                <p class="reply-content">è¿˜æ˜¯è¦ç»™ä¸€ä¸‹æ›´å…·ä½“çš„ä¿¡æ¯<br>æ¯”å¦‚ä¸»åº“çš„tps<br>å¤‡åº“çš„è·Ÿå¤åˆ¶ç›¸å…³çš„é…ç½®ç­‰ä¿¡æ¯</p>
                                <p class="reply-time">2019-01-10 23:34</p>
                            </div>
                            
                        </div>
                    </li>
                    
                    <li data-v-87ffcada="" class="comment-item"><img
                            src="https://static001.geekbang.org/account/avatar/00/0f/b8/36/542c96bf.jpg" class="avatar">
                        <div class="info">
                            <div class="hd"><span class="username">Mr.Strive.Z.H.L</span>
                            </div>
                            <div class="bd">è€å¸ˆä½ å¥½ï¼š<br>æœ‰ä¸€ä¸ªç–‘æƒ‘ï¼Œå¤šæ¡è¯­å¥åŒæ—¶åœ¨commité˜¶æ®µè¿‡ç¨‹ä¸­ï¼Œå¦‚æœå‘ç”Ÿå†™å…¥binlogå’Œå†™å…¥redologçš„é¡ºåºä¸ä¸€è‡´çš„æƒ…å†µã€‚ä¸»ä»å¤‡ä»½çš„æ—¶å€™ï¼Œä»åº“æ˜¯ä¸æ˜¯ä¼šå¯¼è‡´æ•°æ®ä¸ä¸€è‡´å‘€ï¼Ÿ <br></div>
                            <span class="time">2019-01-10 10:03</span>
                            
                        </div>
                    </li>
                    
                    <li data-v-87ffcada="" class="comment-item"><img
                            src="https://static001.geekbang.org/account/avatar/00/14/08/96/231fdd9e.jpg" class="avatar">
                        <div class="info">
                            <div class="hd"><span class="username">æœªçŸ¥</span>
                            </div>
                            <div class="bd">è€å¸ˆåœ¨è®²rowæ¨¡å¼çš„æ•°æ®æ¢å¤æ—¶ï¼Œæ„Ÿè§‰insertï¼Œupdateï¼Œdeleteçš„æ•°æ®æ ¼å¼å’Œundo  logçš„å·®ä¸å¤šã€‚ä¹‹å‰æ–‡ç« ä¸€ç›´è¯´redoå’Œbinlogï¼Œè€å¸ˆæŠ½ç©ºä¹Ÿè®²ä¸‹undoå’Œå›æ»šæ®µçš„çŸ¥è¯†ã€‚ <br></div>
                            <span class="time">2019-01-10 09:00</span>
                            
                            <div class="reply">
                                <div class="reply-hd"><span>ä½œè€…å›å¤</span></div>
                                <p class="reply-content">Undoå‰é¢å¤§è‡´æœ‰è¯´è¿‡äº†ï¼Œä½ è¦äº†è§£undoçš„ä»€ä¹ˆå†…å®¹å‘¢</p>
                                <p class="reply-time">2019-01-10 10:24</p>
                            </div>
                            
                        </div>
                    </li>
                    
                    <li data-v-87ffcada="" class="comment-item"><img
                            src="https://static001.geekbang.org/account/avatar/00/13/9a/0a/6c74e932.jpg" class="avatar">
                        <div class="info">
                            <div class="hd"><span class="username">å…‰</span>
                            </div>
                            <div class="bd">æ—è€å¸ˆä»Šå¤©é‡åˆ°ä¸ªé—®é¢˜å°±æ˜¯ä¸»ä»åŒæ­¥å»¶è¿Ÿï¼ŒæŸ¥åˆ°ä¸»ä»çŠ¶æ€ä¸­å‡ºç°ï¼šSlave_SQL_Running_State: Waiting for Slave Workers to free pending eventsã€‚ä¸çŸ¥é“è¿™ä¸ªæ˜¯å¦ä¼šå¼•èµ·å»¶è¿Ÿã€‚æŸ¥äº†äº›èµ„æ–™è¯´å¾—éƒ½ä¸æ˜¯å¾ˆæ˜ç™½ã€‚è€å¸ˆæ˜¯å¦å¯ä»¥ç®€çŸ­è§£ç­”ä¸‹ã€‚ä»¥åŠè¿™ç§å»¶è¿Ÿå¦‚ä½•é¿å…ã€‚ <br></div>
                            <span class="time">2019-01-09 19:42</span>
                            
                            <div class="reply">
                                <div class="reply-hd"><span>ä½œè€…å›å¤</span></div>
                                <p class="reply-content">è¿™ä¸ªçš„æ„æ€æ˜¯ï¼Œ ç°åœ¨å·¥ä½œçº¿ç¨‹é‡Œé¢ç­‰å¾…çš„é˜Ÿåˆ—å¤ªå¤šï¼Œéƒ½å·²ç»è¶…è¿‡ä¸Šé™äº†ï¼Œè¦ç­‰å·¥ä½œçº¿ç¨‹æ¶ˆåŒ–æ‰ä¸€äº›äº‹åŠ¡å†åˆ†<br><br>ç®€å•è¯´ï¼Œå°±æ˜¯å¤‡åº“çš„åº”ç”¨æ—¥å¿—çš„é˜Ÿåˆ—å¤ªæ…¢äº†ã€‚ã€‚</p>
                                <p class="reply-time">2019-01-10 19:30</p>
                            </div>
                            
                        </div>
                    </li>
                    
                    <li data-v-87ffcada="" class="comment-item"><img
                            src="https://static001.geekbang.org/account/avatar/00/0f/5c/c5/1231d633.jpg" class="avatar">
                        <div class="info">
                            <div class="hd"><span class="username">æ¢ä¸­å</span>
                            </div>
                            <div class="bd">æˆ‘æœ‰ä¸€ä¸ªæ¯”è¾ƒæç«¯ä¸€ç‚¹çš„HAé—®é¢˜ï¼Œå‡è®¾ä¸»åº“çš„binlogåˆšå†™æˆåŠŸè¿˜æœªæ¥å¾—åŠæŠŠbinlogåŒæ­¥åˆ°ä»åº“ï¼Œä¸»åº“å°±æ‰ç”µäº†ï¼Œè¿™æ—¶å€™ä»åº“çš„æ•°æ®ä¼šä¸å®Œæ•´å—ï¼Ÿ<br>ç¬¬äºŒä¸ªé—®é¢˜ï¼ŒåŸä¸»åº“é‡å¯åŠ å…¥é›†ç¾¤åï¼Œé‚£æ¡æ²¡æœ‰ä¼ å‡ºå»çš„binlogä¼šå¦‚ä½•å¤„ç†ï¼Ÿ <br></div>
                            <span class="time">2019-01-09 10:42</span>
                            
                        </div>
                    </li>
                    
                    <li data-v-87ffcada="" class="comment-item"><img
                            src="https://static001.geekbang.org/account/avatar/00/12/33/46/315a862e.jpg" class="avatar">
                        <div class="info">
                            <div class="hd"><span class="username">ä¸è¿·å¤±</span>
                            </div>
                            <div class="bd">è¯·æ•™ä¸€ä¸‹ï¼Œç”Ÿäº§ç¯å¢ƒèƒ½ä¸èƒ½ä½¿ç”¨æ­£å¸¸ä½¿ç”¨è¡¨è¿æ¥ï¼Ÿè¦æ³¨æ„å“ªäº›åœ°æ–¹ï¼ŸDBAæ€»æ˜¯è¯´ä¸å»ºè®®ç”¨ï¼Œè¿˜å‚¬ä¿ƒæˆ‘å°†ä½¿ç”¨äº†è¡¨è¿æ¥çš„åœ°æ–¹æ”¹é€ ï¼Œä½†ä¹Ÿè¯´ä¸å‡ºä¸ªæ‰€ä»¥ç„¶ã€‚ç›®å‰åœ¨ä¸¤ä¸ªç™¾ä¸‡çº§æ•°æ®çš„è¡¨ä¸­æœ‰ç”¨åˆ°å†…è¿æ¥ï¼Œå¹¶æ²¡æœ‰è§‰å¾—æœ‰ä»€ä¹ˆé—®é¢˜ <br></div>
                            <span class="time">2019-01-08 20:46</span>
                            
                            <div class="reply">
                                <div class="reply-hd"><span>ä½œè€…å›å¤</span></div>
                                <p class="reply-content">ç´¢å¼•ä½¿ç”¨æ­£ç¡®ï¼Œä¸è¦å‡ºç°å…¨è¡¨æ‰«æï¼Œå…¶å®OKçš„</p>
                                <p class="reply-time">2019-01-08 21:17</p>
                            </div>
                            
                        </div>
                    </li>
                    
                    <li data-v-87ffcada="" class="comment-item"><img
                            src="https://static001.geekbang.org/account/avatar/00/10/41/27/3ff1a1d6.jpg" class="avatar">
                        <div class="info">
                            <div class="hd"><span class="username">hua168</span>
                            </div>
                            <div class="bd">è¿™æ ·ï¼Œæˆ‘æ˜¯æƒ³å¢åŠ ä¸€äº›ç»éªŒï¼Œæ€•åé¢è¯•åˆé‡åˆ°ï¼Œæƒ³é—®ä¸€ä¸‹å¤§ç¥åˆ†ææ€è·¯ï¼Œè¿™ç§é—®é¢˜æ²¡ç»éªŒå›ç­”ã€‚<br>æˆ‘å°±å·®ç‚¹å›ç­”ç”¨é˜¿é‡Œäº‘çš„DRDSäº†ğŸ˜‚<br><br>ç°åœ¨å¼€æºçš„mysqlä¸­é—´ä»¶ç”Ÿå­˜ç¯å¢ƒä¸­ç”¨ä»€ä¹ˆæ¯”è¾ƒå¤šå‘€ï¼Ÿmycatè¿˜æ˜¯ç½‘æ˜“çš„cetusï¼Ÿ<br><br>æµ·é‡å­˜å‚¨é˜¿é‡Œäº‘æœ‰OSSï¼Œæœ‰æ²¡æœ‰å¯¹åº”çš„å¼€æºè½¯ä»¶å‘€ï¼Ÿç”¨äºç”Ÿå­˜ç¯å¢ƒçš„ï¼Œæ²¡æœ‰æ¥è§¦è¿‡ï¼Œæƒ³é—®ä¸‹ï¼Œæä¸‹å®éªŒåå†å»æ‰¾å·¥ä½œã€‚ğŸ˜‚ <br></div>
                            <span class="time">2019-01-08 20:41</span>
                            
                            <div class="reply">
                                <div class="reply-hd"><span>ä½œè€…å›å¤</span></div>
                                <p class="reply-content">ä¸­é—´ä»¶ä½œä¸ºç»ƒæ‰‹è¿™äº›éƒ½å¯ä»¥çš„<br><br>ä½ æœâ€œå¼€æºåˆ†å¸ƒå¼å­˜å‚¨ç³»ç»Ÿâ€</p>
                                <p class="reply-time">2019-01-08 21:19</p>
                            </div>
                            
                        </div>
                    </li>
                    
                    <li data-v-87ffcada="" class="comment-item"><img
                            src="https://static001.geekbang.org/account/avatar/00/10/cb/0a/6a9e6602.jpg" class="avatar">
                        <div class="info">
                            <div class="hd"><span class="username">React</span>
                            </div>
                            <div class="bd">è€å¸ˆå¥½ï¼Œæ–‡ç« å‰é¢è¯´ä¸»ä»æœ€å¥½ä»æœºè®¾ç½®readonly.é‚£ä¹ˆåœ¨åŒä¸»çš„æƒ…å†µ(äº’ä¸ºä¸»å¤‡)ä¸‹ï¼Œè®¾ç½®ä¸åŒçš„è‡ªå¢å€¼æ˜¯å¦å°±å¯ä»¥ä¸ç”¨è®¾ç½®åªè¯»äº†ï¼Ÿä¸”æ­¤æ—¶å¤åˆ¶æ˜¯å¦å¯ä»¥è·³è¿‡ä¸»é”®å†²çªï¼Œå› ä¸ºè‡ªå¢å€¼ä¸åŒï¼Ÿ <br></div>
                            <span class="time">2019-01-08 20:25</span>
                            
                            <div class="reply">
                                <div class="reply-hd"><span>ä½œè€…å›å¤</span></div>
                                <p class="reply-content">å¦‚æœè‡ªå¢å€¼ä¸¥æ ¼æ§åˆ¶äº†ï¼Œä¹Ÿæ²¡å¿…è¦è®¾ç½®è·³è¿‡ä¸»é”®å†²çªäº†å¯¹å§ï¼ˆåæ­£ä¸å†²çªï¼‰<br><br>é™¤éä½ çš„ä¸šåŠ¡å°±æ˜¯è®¾è®¡å¥½æ”¯æŒå¤šç‚¹å†™å…¥ï¼Œå¦åˆ™è¿˜æ˜¯æŠŠä¸å†™å…¥çš„éƒ½è®¾ç½®ä¸Šreadonlyå§</p>
                                <p class="reply-time">2019-01-08 22:28</p>
                            </div>
                            
                        </div>
                    </li>
                    
                    <li data-v-87ffcada="" class="comment-item"><img
                            src="https://static001.geekbang.org/account/avatar/00/11/09/98/b11c372b.jpg" class="avatar">
                        <div class="info">
                            <div class="hd"><span class="username">é¸ ç¿±</span>
                            </div>
                            <div class="bd">ä¹Ÿå°±æ˜¯è¯´ statementæ ¼å¼æ˜¯ä¸èƒ½ç”¨æ¥æ¢å¤æ•°æ®çš„æ˜¯å˜›â€¦â€¦ <br></div>
                            <span class="time">2019-01-08 20:14</span>
                            
                            <div class="reply">
                                <div class="reply-hd"><span>ä½œè€…å›å¤</span></div>
                                <p class="reply-content">ä¸èƒ½ç”¨åœ¨ä½¿ç”¨flashbackæœºåˆ¶æ¢å¤</p>
                                <p class="reply-time">2019-01-08 22:26</p>
                            </div>
                            
                        </div>
                    </li>
                    
                    <li data-v-87ffcada="" class="comment-item"><img
                            src="https://static001.geekbang.org/account/avatar/00/10/41/27/3ff1a1d6.jpg" class="avatar">
                        <div class="info">
                            <div class="hd"><span class="username">hua168</span>
                            </div>
                            <div class="bd">é¢è¯•å®˜è¯´çš„æ˜¯mysqlåšä¸€ä¸»å¤šä»ï¼Œè¯»å†™åˆ†ç¦»ï¼Œè¿è¡Œä¸€æ®µæ—¶é—´åï¼Œå‘ç°ä»åº“åœ¨ä¸šåŠ¡é«˜å³°æœŸä¸è§„å¾‹æ€§å‡ºç°ä»åº“ä¸¢å¤±æ•°æ®ï¼Œè€Œæ‰€æœ‰ä»åº“ä¸¢å¤±çš„æ•°æ®æƒ…å†µéƒ½ä¸ä¸€æ ·ï¼Œåœ¨ä¸€ä¸ªä»åº“æŸ¥è¯¢æŸæ¡è®°å½•æ˜¯ç©ºçš„ï¼ˆä¸è®°å¾—æ˜¯ç©ºç™½è¿˜æ˜¯ç›´æ¥æŸ¥ä¸åˆ°ï¼ŒçœŸçš„æ²¡æ•°æ®äº†ï¼Œå¹¶ä¸æ˜¯å»¶è¿Ÿäº†ï¼Œä¸»ä»æ²¡åœï¼Œå°±æ˜¯æ²¡å†™è¿›ä»åº“ï¼‰ï¼Œåœ¨å¦ä¸€ä¸ªä»åº“å´èƒ½æŸ¥åˆ°ï¼Œæœ‰çš„åœ¨è¿™ä¸ªä»åº“æŸ¥åˆ°äº†ï¼Œå¦ä¸€ä¸ªä»åº“æŸ¥ä¸åˆ°ï¼Œå› ä¸ºè¿è¡Œäº†å‡ ä¸ªæœˆå®¢æˆ·åé¦ˆæ‰å‘ç°æ­¤é—®é¢˜ï¼Œä¸ç¡®å®šæ‰€æœ‰ä»åº“ä¸­å“ªä¸ªä»åº“æ•°æ®æ˜¯æ²¡æœ‰ä¸¢å¤±çš„ï¼Œå’Œä¸»åº“ä¸€è‡´ï¼Œæ€ä¹ˆåŠï¼Ÿ<br>æˆ‘å›ç­”:<br>1.åœ¨ä¸šåŠ¡ä½å³°æœŸï¼Œé”åº“ï¼Œé‡æ–°åšä¸»ä»ï¼Œä½†æ˜¯å¦‚æœä¸€å¤©ä¸èƒ½åŒæ­¥å®Œçš„è¯ï¼Œç™½å¤©ä¸»åº“è¿˜è¦è§£é”ã€‚ä¸ä¼šæäº†â€¦â€¦<br>åˆä¸åƒmongoDBé‚£æ ·ä¸ç”¨è®°å½•poså€¼ğŸ˜‚<br>2.å‡å°‘ä¸»åº“ioå‹åŠ›è¯•ä¸‹ï¼Œæ¯”å¦‚åˆ†åº“åˆ†è¡¨<br>3.æŸ¥çœ‹æ—¥å¿—ä¹‹ç±»â€¦â€¦<br><br>äºŒã€mysqlä¸»åº“é«˜å¯ç”¨<br>mysqlä¸»ä»+keepalived&#47;heatbeat<br>HMA&#47;MMM<br>ZK<br>æ˜¯æˆ‘çœ‹é…ç½®è§†é¢‘ï¼Œè€å¸ˆç®€å•è®²äº†ä¸€ä¸‹ï¼Œæˆ‘åœ¨ç½‘ä¸Šæœçš„<br><br>ä¸‰ã€ä¸»åº“å†™å‹åŠ›è¿‡å¤§<br>åªèƒ½é€šè¿‡åˆ†åº“ï¼Œåˆ†è¡¨<br>ä¹Ÿæ˜¯æˆ‘çœ‹linuxè¿ç»´åŸ¹è®­è§†é¢‘è€å¸ˆè¯´çš„ <br></div>
                            <span class="time">2019-01-08 17:12</span>
                            
                            <div class="reply">
                                <div class="reply-hd"><span>ä½œè€…å›å¤</span></div>
                                <p class="reply-content">å…¶å®è¦æ˜¯æˆ‘å›ç­”ï¼Œæˆ‘ä¹Ÿåªèƒ½è¯´ä»¥ä¸»åº“ä¸ºå‡†æŒ‰é¡ºåºé‡åšï¼Œéƒ½è¿‡äº†è¿™ä¹ˆä¹…äº†è¿˜èƒ½å’‹æ ·ğŸ˜“<br></p>
                                <p class="reply-time">2019-01-08 20:16</p>
                            </div>
                            
                        </div>
                    </li>
                    
                    <li data-v-87ffcada="" class="comment-item"><img
                            src="https://static001.geekbang.org/account/avatar/00/11/b1/bc/5ce1f4e2.jpg" class="avatar">
                        <div class="info">
                            <div class="hd"><span class="username">null</span>
                            </div>
                            <div class="bd">è€å¸ˆï¼Œæˆ‘è¯·æ•™ä¸€ä¸ªé—®é¢˜ã€‚ç°åœ¨æˆ‘æœ‰ä¸€å¼ è¡¨é‡Œé¢å­˜å‚¨çš„æœ‰ç”¨æˆ·idå’Œç”¨æˆ·å¤´åƒï¼Œç”¨æˆ·å¤´åƒå­˜çš„äºŒè¿›åˆ¶ã€‚æˆ‘æ‰¹é‡æŸ¥è¯¢ç”¨æˆ·å¤´åƒï¼Œæ¯”å¦‚æˆ‘æŸ¥500ä¸ªç”¨æˆ·idçš„å¤´åƒï¼Œæˆ‘å°†500ä¸ªç”¨æˆ·idåˆ†æˆåç­‰ä»½ï¼Œæ¯ä»½50ä¸ªidï¼Œç„¶åå¼€å¯çº¿ç¨‹æ± ç”¨10ä¸ªçº¿ç¨‹å¹¶è¡ŒæŸ¥è¯¢ã€‚ç°åœ¨çš„é—®é¢˜æ˜¯å…ˆæäº¤æŸ¥è¯¢çš„é‚£ä¸ªçº¿ç¨‹æŸ¥è¯¢æ—¶é—´å¯èƒ½åªç”¨äº†ä¸€ä¸¤ç§’ï¼Œåé¢æäº¤çš„é‚£å‡ ä¸ªçº¿ç¨‹æŸ¥è¯¢æ—¶é—´ä¾æ¬¡å¢åŠ ï¼Œæœ€ä¹…çš„å¤§æ¦‚éœ€è¦äº”å…­ç§’ã€‚æˆ‘ä»¬æ•°æ®åº“ç”¨çš„Oracleï¼Œè™½ç„¶ä¸æ˜¯mysqlï¼Œä½†æ˜¯æˆ‘æ„Ÿè§‰Oracleä¸è‡³äº10ä¸ªçº¿ç¨‹çš„å¹¶å‘éƒ½æ‰›ä¸ä½è¿˜éœ€è¦æ’é˜Ÿå¤„ç†å•Šï¼Œæƒ³è¯·æ•™ä¸€ä¸‹è€å¸ˆå‡ºç°è¿™ç§æƒ…å†µæ˜¯ä»€ä¹ˆåŸå› å¯¼è‡´çš„å‘¢ <br></div>
                            <span class="time">2019-01-08 16:45</span>
                            
                            <div class="reply">
                                <div class="reply-hd"><span>ä½œè€…å›å¤</span></div>
                                <p class="reply-content">æˆ‘è§‰å¾—ä½ è¦å…ˆæŸ¥ä¸€ä¸‹ä¸ºå•¥ç¬¬ä¸€ä¸ªæŸ¥è¯¢è¦ç”¨1-2ç§’ï¼Œè¿™ä¸ªè¯·æ±‚çœ‹èµ·æ¥åº”è¯¥æŒºå¿«å‘€</p>
                                <p class="reply-time">2019-01-08 20:19</p>
                            </div>
                            
                        </div>
                    </li>
                    
                    <li data-v-87ffcada="" class="comment-item"><img
                            src="https://static001.geekbang.org/account/avatar/00/13/57/6e/dd0eee5f.jpg" class="avatar">
                        <div class="info">
                            <div class="hd"><span class="username">å¤œç©ºä¸­æœ€äº®çš„æ˜Ÿï¼ˆåä»”ï¼‰</span>
                            </div>
                            <div class="bd">è¿™èŠ‚è¯¾å®Œå…¨å­¦æ‡‚äº†ï¼Œå¼€å¿ƒğŸ˜ƒ <br></div>
                            <span class="time">2019-01-08 16:41</span>
                            
                            <div class="reply">
                                <div class="reply-hd"><span>ä½œè€…å›å¤</span></div>
                                <p class="reply-content">ğŸ‘</p>
                                <p class="reply-time">2019-01-10 19:14</p>
                            </div>
                            
                        </div>
                    </li>
                    
                    <li data-v-87ffcada="" class="comment-item"><img
                            src="https://static001.geekbang.org/account/avatar/00/13/57/6e/dd0eee5f.jpg" class="avatar">
                        <div class="info">
                            <div class="hd"><span class="username">å¤œç©ºä¸­æœ€äº®çš„æ˜Ÿï¼ˆåä»”ï¼‰</span>
                            </div>
                            <div class="bd">çº§è”å¤åˆ¶ï¼Œ3ä¸ªæ•°æ®åº“ï¼Œé¦–å°¾ç›¸è¿ï¼Œåº”ä¼šå‡ºç°æ­»å¾ªç¯ <br></div>
                            <span class="time">2019-01-08 16:40</span>
                            
                            <div class="reply">
                                <div class="reply-hd"><span>ä½œè€…å›å¤</span></div>
                                <p class="reply-content">ä¸ä¼šå“¦ï¼Œ1ç»™2ï¼Œ2ç»™3ï¼Œ3ç»™1ï¼Œ1å°±æ”¾å¼ƒäº†<br><br>ä¸è¿‡å¼•å…¥ç¬¬ä¸‰ä¸ªèŠ‚ç‚¹çš„æ€è·¯æ˜¯å¯¹çš„å“ˆğŸ˜„</p>
                                <p class="reply-time">2019-01-08 20:08</p>
                            </div>
                            
                        </div>
                    </li>
                    
                    <li data-v-87ffcada="" class="comment-item"><img
                            src="http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83eqyfwpUx3JgSX2IediaP7AUtYPVBjhy17OibD6e7owwBK0uF2rABzQYKSgiaCgFYibWrZ9b5ib55InmDpw/132" class="avatar">
                        <div class="info">
                            <div class="hd"><span class="username">ccstorm</span>
                            </div>
                            <div class="bd">è€å¸ˆï¼Œæ‚¨å¥½ï¼è¯·æ•™ä¸€ä¸ªè¯¾é¢˜ä¹‹å¤–çš„é—®é¢˜ï¼Œè¯·é—®mysqlå°ç‰ˆæœ¬éœ€è¦æ›´æ–°ä¹ˆã€‚æˆ‘ç°åœ¨é¡¹ç›®ç”¨çš„5.6ï¼Œè¯·é—®éœ€è¦å‡çº§åˆ°5.7ä¹ˆï¼Œå¦‚æœå‡çº§çš„è¯éœ€è¦æ³¨æ„ä»€ä¹ˆï¼Œè°¢è°¢è€å¸ˆï¼ <br></div>
                            <span class="time">2019-01-08 15:52</span>
                            
                            <div class="reply">
                                <div class="reply-hd"><span>ä½œè€…å›å¤</span></div>
                                <p class="reply-content">å¤Ÿç”¨å°±ä¸åŠ¨ğŸ˜„</p>
                                <p class="reply-time">2019-01-08 20:10</p>
                            </div>
                            
                        </div>
                    </li>
                    


                </ul>
            </div>
        </div>
    </div>
</div>
</body>
</html>