<html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport"
          content="width=device-width,initial-scale=1,maximum-scale=1,minimum-scale=1,user-scalable=no,viewport-fit=cover">
    <meta name="format-detection" content="telephone=no">
    <style type="text/css">

#watermark {

  position: relative;
  overflow: hidden;
}

#watermark .x {
  position: absolute;
  top: 800;
  left: 400;
  color: #3300ff;
  font-size: 50px;
  pointer-events: none;
  opacity:0.3;
  filter:Alpha(opacity=50);
  
  
}
    </style>


    <style type="text/css">
 html{color:#333;-webkit-text-size-adjust:100%;-ms-text-size-adjust:100%;text-rendering:optimizelegibility;font-family:Helvetica Neue,PingFang SC,Verdana,Microsoft Yahei,Hiragino Sans GB,Microsoft Sans Serif,WenQuanYi Micro Hei,sans-serif}html.borderbox *,html.borderbox :after,html.borderbox :before{box-sizing:border-box}article,aside,blockquote,body,button,code,dd,details,dl,dt,fieldset,figcaption,figure,footer,form,h1,h2,h3,h4,h5,h6,header,hr,input,legend,li,menu,nav,ol,p,pre,section,td,textarea,th,ul{margin:0;padding:0}article,aside,details,figcaption,figure,footer,header,menu,nav,section{display:block}audio,canvas,video{display:inline-block}body,button,input,select,textarea{font:300 1em/1.8 PingFang SC,Lantinghei SC,Microsoft Yahei,Hiragino Sans GB,Microsoft Sans Serif,WenQuanYi Micro Hei,Helvetica,sans-serif}button::-moz-focus-inner,input::-moz-focus-inner{padding:0;border:0}table{border-collapse:collapse;border-spacing:0}fieldset,img{border:0}blockquote{position:relative;color:#999;font-weight:400;border-left:1px solid #1abc9c;padding-left:1em;margin:1em 3em 1em 2em}@media only screen and (max-width:640px){blockquote{margin:1em 0}}abbr,acronym{border-bottom:1px dotted;font-variant:normal}abbr{cursor:help}del{text-decoration:line-through}address,caption,cite,code,dfn,em,th,var{font-style:normal;font-weight:400}ol,ul{list-style:none}caption,th{text-align:left}q:after,q:before{content:""}sub,sup{font-size:75%;line-height:0;position:relative}:root sub,:root sup{vertical-align:baseline}sup{top:-.5em}sub{bottom:-.25em}a{color:#1abc9c}a:hover{text-decoration:underline}.typo a{border-bottom:1px solid #1abc9c}.typo a:hover{border-bottom-color:#555;color:#555}.typo a:hover,a,ins{text-decoration:none}.typo-u,u{text-decoration:underline}mark{background:#fffdd1;border-bottom:1px solid #ffedce;padding:2px;margin:0 5px}code,pre,pre tt{font-family:Courier,Courier New,monospace}pre{background:hsla(0,0%,97%,.7);border:1px solid #ddd;padding:1em 1.5em;display:block;-webkit-overflow-scrolling:touch}hr{border:none;border-bottom:1px solid #cfcfcf;margin-bottom:.8em;height:10px}.typo-small,figcaption,small{font-size:.9em;color:#888}b,strong{font-weight:700;color:#000}[draggable]{cursor:move}.clearfix:after,.clearfix:before{content:"";display:table}.clearfix:after{clear:both}.clearfix{zoom:1}.textwrap,.textwrap td,.textwrap th{word-wrap:break-word;word-break:break-all}.textwrap-table{table-layout:fixed}.serif{font-family:Palatino,Optima,Georgia,serif}.typo-dl,.typo-form,.typo-hr,.typo-ol,.typo-p,.typo-pre,.typo-table,.typo-ul,.typo dl,.typo form,.typo hr,.typo ol,.typo p,.typo pre,.typo table,.typo ul,blockquote{margin-bottom:1rem}h1,h2,h3,h4,h5,h6{font-family:PingFang SC,Helvetica Neue,Verdana,Microsoft Yahei,Hiragino Sans GB,Microsoft Sans Serif,WenQuanYi Micro Hei,sans-serif;color:#000;line-height:1.35}.typo-h1,.typo-h2,.typo-h3,.typo-h4,.typo-h5,.typo-h6,.typo h1,.typo h2,.typo h3,.typo h4,.typo h5,.typo h6{margin-top:1.2em;margin-bottom:.6em;line-height:1.35}.typo-h1,.typo h1{font-size:2em}.typo-h2,.typo h2{font-size:1.8em}.typo-h3,.typo h3{font-size:1.6em}.typo-h4,.typo h4{font-size:1.4em}.typo-h5,.typo-h6,.typo h5,.typo h6{font-size:1.2em}.typo-ul,.typo ul{margin-left:1.3em;list-style:disc}.typo-ol,.typo ol{list-style:decimal;margin-left:1.9em}.typo-ol ol,.typo-ol ul,.typo-ul ol,.typo-ul ul,.typo li ol,.typo li ul{margin-bottom:.8em;margin-left:2em}.typo-ol ul,.typo-ul ul,.typo li ul{list-style:circle}.typo-table td,.typo-table th,.typo table caption,.typo table td,.typo table th{border:1px solid #ddd;padding:.5em 1em;color:#666}.typo-table th,.typo table th{background:#fbfbfb}.typo-table thead th,.typo table thead th{background:hsla(0,0%,95%,.7)}.typo table caption{border-bottom:none}.typo-input,.typo-textarea{-webkit-appearance:none;border-radius:0}.typo-em,.typo em,caption,legend{color:#000;font-weight:inherit}.typo-em{position:relative}.typo-em:after{position:absolute;top:.65em;left:0;width:100%;overflow:hidden;white-space:nowrap;content:"\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB"}.typo img{max-width:100%}.common-content{font-weight:400;color:#353535;line-height:1.75rem;white-space:normal;word-break:normal;font-size:1rem}.common-content img{display:block;max-width:100%;background-color:#eee}.common-content audio,.common-content video{width:100%;background-color:#eee}.common-content center,.common-content font{margin-top:1rem;display:inline-block}.common-content center{width:100%}.common-content pre{margin-top:1rem;padding-left:0;padding-right:0;position:relative;overflow:hidden}.common-content pre code{font-size:.8rem;font-family:Consolas,Liberation Mono,Menlo,monospace,Courier;display:block;width:100%;box-sizing:border-box;padding-left:1rem;padding-right:1rem;overflow-x:auto}.common-content hr{border:none;margin-top:1.5rem;margin-bottom:1.5rem;border-top:1px solid #f5f5f5;height:1px;background:none}.common-content b,.common-content h1,.common-content h2,.common-content h3,.common-content h4,.common-content h5,.common-content strong{font-weight:700}.common-content h1,.common-content h2{font-size:1.125rem;margin-bottom:.45rem}.common-content h3,.common-content h4,.common-content h5{font-size:1rem;margin-bottom:.45rem}.common-content p{font-weight:400;color:#353535;margin-top:.15rem}.common-content .orange{color:#ff5a05}.common-content .reference{font-size:1rem;color:#888}.custom-rich-content h1{margin-top:0;font-weight:400;font-size:15.25px;border-bottom:1px solid #eee;line-height:2.8}.custom-rich-content li,.custom-rich-content p{font-size:14px;color:#888;line-height:1.6}table.hljs-ln{margin-bottom:0;border-spacing:0;border-collapse:collapse}table.hljs-ln,table.hljs-ln tbody,table.hljs-ln td,table.hljs-ln tr{box-sizing:border-box}table.hljs-ln td{padding:0;border:0}table.hljs-ln td.hljs-ln-numbers{min-width:15px;color:rgba(27,31,35,.3);text-align:right;white-space:nowrap;cursor:pointer;user-select:none}table.hljs-ln td.hljs-ln-code,table.hljs-ln td.hljs-ln-numbers{font-family:SFMono-Regular,Consolas,Liberation Mono,Menlo,Courier,monospace;font-size:12px;line-height:20px;vertical-align:top}table.hljs-ln td.hljs-ln-code{position:relative;padding-right:10px;padding-left:10px;overflow:visible;color:#24292e;word-wrap:normal;white-space:pre}video::-webkit-media-controls{overflow:hidden!important}video::-webkit-media-controls-enclosure{width:calc(100% + 32px);margin-left:auto}.button-cancel{color:#888;border:1px solid #888;border-radius:3px;margin-right:12px}.button-cancel,.button-primary{-ms-flex-positive:1;flex-grow:1;height:35px;display:inline-block;font-size:15px;text-align:center;line-height:36px}.button-primary{color:#fff;background-color:#ff5a05;border-radius:3px}@font-face{font-family:iconfont;src:url(//at.alicdn.com/t/font_372689_bwwwtosxtzp.eot);src:url(//at.alicdn.com/t/font_372689_bwwwtosxtzp.eot#iefix) format("embedded-opentype"),url(//at.alicdn.com/t/font_372689_bwwwtosxtzp.woff) format("woff"),url(//at.alicdn.com/t/font_372689_bwwwtosxtzp.ttf) format("truetype"),url(//at.alicdn.com/t/font_372689_bwwwtosxtzp.svg#iconfont) format("svg")}@font-face{font-family:player-font;src:url(//at.alicdn.com/t/font_509397_1cyjv4o90qiod2t9.eot);src:url(//at.alicdn.com/t/font_509397_1cyjv4o90qiod2t9.eot#iefix) format("embedded-opentype"),url(//at.alicdn.com/t/font_509397_1cyjv4o90qiod2t9.woff) format("woff"),url(//at.alicdn.com/t/font_509397_1cyjv4o90qiod2t9.ttf) format("truetype"),url(//at.alicdn.com/t/font_509397_1cyjv4o90qiod2t9.svg#player-font) format("svg")}.iconfont{font-family:iconfont!important;font-size:16px;font-style:normal;-webkit-font-smoothing:antialiased;-webkit-text-stroke-width:.2px;-moz-osx-font-smoothing:grayscale}html{background:#fff;min-height:100%;-webkit-tap-highlight-color:rgba(0,0,0,0)}body{width:100%}body.fixed{overflow:hidden;position:fixed;width:100vw;height:100vh}i{font-style:normal}a{word-wrap:break-word;-webkit-tap-highlight-color:rgba(0,0,0,0)}a:hover{text-decoration:none}.fade-enter-active,.fade-leave-active{transition:opacity .3s}.fade-enter,.fade-leave-to{opacity:0}.MathJax,.MathJax_CHTML,.MathJax_MathContainer,.MathJax_MathML,.MathJax_PHTML,.MathJax_PlainSource,.MathJax_SVG{outline:0}.ios-app-switch .js-audit{display:none}._loading_wrap_{position:fixed;width:100vw;height:100vh;top:50%;left:50%;transform:translate(-50%,-50%);z-index:999}._loading_div_class_,._loading_wrap_{display:-ms-flexbox;display:flex;-ms-flex-pack:center;justify-content:center;-ms-flex-align:center;align-items:center}._loading_div_class_{word-wrap:break-word;padding:.5rem .75rem;text-align:center;z-index:9999;font-size:.6rem;max-width:60%;color:#fff;border-radius:.25rem;-ms-flex-direction:column;flex-direction:column}._loading_div_class_ .message{color:#353535;font-size:16px;line-height:3}.spinner{animation:circle-rotator 1.4s linear infinite}.spinner *{line-height:0;box-sizing:border-box}@keyframes circle-rotator{0%{transform:rotate(0deg)}to{transform:rotate(270deg)}}.path{stroke-dasharray:187;stroke-dashoffset:0;transform-origin:center;animation:circle-dash 1.4s ease-in-out infinite,circle-colors 5.6s ease-in-out infinite}@keyframes circle-colors{0%{stroke:#ff5a05}to{stroke:#ff5a05}}@keyframes circle-dash{0%{stroke-dashoffset:187}50%{stroke-dashoffset:46.75;transform:rotate(135deg)}to{stroke-dashoffset:187;transform:rotate(450deg)}}.confirm-box-wrapper,.confirm-box-wrapper .mask{position:absolute;top:0;left:0;right:0;bottom:0}.confirm-box-wrapper .mask{background:rgba(0,0,0,.6)}.confirm-box-wrapper .confirm-box{position:fixed;top:50%;left:50%;width:267px;background:#fff;transform:translate(-50%,-50%);border-radius:7px}.confirm-box-wrapper .confirm-box .head{margin:0 18px;font-size:18px;text-align:center;line-height:65px;border-bottom:1px solid #d9d9d9}.confirm-box-wrapper .confirm-box .body{padding:18px;padding-bottom:0;color:#353535;font-size:12.5px;max-height:150px;overflow:auto}.confirm-box-wrapper .confirm-box .foot{display:-ms-flexbox;display:flex;-ms-flex-direction:row;flex-direction:row;padding:18px}.confirm-box-wrapper .confirm-box .foot .button-cancel{border:1px solid #d9d9d9}.hljs{display:block;overflow-x:auto;padding:.5em;color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}




    </style>
    <style type="text/css">
        .button-cancel[data-v-87ffcada]{color:#888;border:1px solid #888;border-radius:3px;margin-right:12px}.button-cancel[data-v-87ffcada],.button-primary[data-v-87ffcada]{-webkit-box-flex:1;-ms-flex-positive:1;flex-grow:1;height:35px;display:inline-block;font-size:15px;text-align:center;line-height:36px}.button-primary[data-v-87ffcada]{color:#fff;background-color:#ff5a05;border-radius:3px}.pd[data-v-87ffcada]{padding-left:1.375rem;padding-right:1.375rem}.article[data-v-87ffcada]{max-width:70rem;margin:0 auto}.article .article-unavailable[data-v-87ffcada]{color:#fa8919;font-size:15px;font-weight:600;line-height:24px;border-radius:5px;padding:12px;background-color:#f6f7fb;margin-top:20px}.article .article-unavailable .iconfont[data-v-87ffcada]{font-size:12px}.article .main[data-v-87ffcada]{padding:1.25rem 0;margin-bottom:52px}.article-title[data-v-87ffcada]{color:#353535;font-weight:400;line-height:1.65rem;font-size:1.34375rem}.article-info[data-v-87ffcada]{color:#888;font-size:.9375rem;margin-top:1.0625rem}.article-content[data-v-87ffcada]{margin-top:1.0625rem}.article-content.android video[data-v-87ffcada]::-webkit-media-controls-fullscreen-button{display:none}.copyright[data-v-87ffcada]{color:#b2b2b2;padding-bottom:20px;margin-top:20px;font-size:13px}.audio-player[data-v-87ffcada]{width:100%;margin:20px 0}.to-comment[data-v-87ffcada]{overflow:hidden;padding-top:10px;margin-bottom:-30px}.to-comment a.button-primary[data-v-87ffcada]{float:right;height:20px;font-size:12px;line-height:20px;padding:4px 8px;cursor:pointer}.article-comments[data-v-87ffcada]{margin-top:2rem}.article-comments h2[data-v-87ffcada]{text-align:center;color:#888;position:relative;z-index:1;margin-bottom:1rem}.article-comments h2[data-v-87ffcada]:before{border-top:1px dotted #888;content:"";position:absolute;top:56%;left:0;width:100%;z-index:-1}.article-comments h2 span[data-v-87ffcada]{font-size:15.25px;font-weight:400;padding:0 1rem;background:#fff;display:inline-block}.article-sub-bottom[data-v-87ffcada]{z-index:10;cursor:pointer}.switch-btns[data-v-87ffcada]{height:76px;cursor:pointer;padding-top:24px;padding-bottom:24px;border-bottom:10px solid #f6f7fb;position:relative}.switch-btns[data-v-87ffcada]:before{content:" ";height:1px;background:#e8e8e8;position:absolute;top:0;left:0;-webkit-box-sizing:border-box;box-sizing:border-box;left:1.375rem;right:1.375rem}.switch-btns .btn[data-v-87ffcada]{height:38px;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center}.switch-btns .btn .tag[data-v-87ffcada]{-webkit-box-flex:0;-ms-flex:0 0 62px;flex:0 0 62px;text-align:center;color:#888;font-size:14px;border-radius:10px;height:22px;line-height:22px;background:#f6f7fb;font-weight:400}.switch-btns .btn .txt[data-v-87ffcada]{margin-left:10px;-webkit-box-flex:1;-ms-flex:1 1 auto;flex:1 1 auto;color:#888;font-size:15px;height:22px;line-height:22px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;font-weight:400}@media (max-width:769px){.article .breadcrumb[data-v-87ffcada]{padding-top:10px;padding-bottom:10px}}





    </style>

    <style type="text/css">
        .comment-item{list-style-position:inside;width:100%;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row;margin-bottom:1rem}.comment-item a{border-bottom:none}.comment-item .avatar{width:2.625rem;height:2.625rem;-ms-flex-negative:0;flex-shrink:0;border-radius:50%}.comment-item .info{margin-left:.5rem;-webkit-box-flex:1;-ms-flex-positive:1;flex-grow:1}.comment-item .info .hd{width:100%;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row;-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;-webkit-box-align:center;-ms-flex-align:center;align-items:center}.comment-item .info .hd .username{color:#888;font-size:15.25px;font-weight:400;line-height:1.2}.comment-item .info .hd .control{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row;-webkit-box-align:center;-ms-flex-align:center;align-items:center}.comment-item .info .hd .control .btn-share{color:#888;font-size:.75rem;margin-right:1rem}.comment-item .info .hd .control .btn-praise{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row;-webkit-box-align:center;-ms-flex-align:center;align-items:center;font-size:15.25px;text-decoration:none}.comment-item .info .hd .control .btn-praise i{color:#888;display:inline-block;font-size:.75rem;margin-right:.3rem;margin-top:-.01rem}.comment-item .info .hd .control .btn-praise i.on,.comment-item .info .hd .control .btn-praise span{color:#ff5a05}.comment-item .info .bd{color:#353535;font-size:15.25px;font-weight:400;white-space:normal;word-break:break-all;line-height:1.6}.comment-item .info .time{color:#888;font-size:9px;line-height:1}.comment-item .info .reply .reply-hd{font-size:15.25px}.comment-item .info .reply .reply-hd span{margin-left:-12px;color:#888;font-weight:400}.comment-item .info .reply .reply-hd i{color:#ff5a05;font-size:15.25px}.comment-item .info .reply .reply-content{color:#353535;font-size:15.25px;font-weight:400;white-space:normal;word-break:break-all}.comment-item .info .reply .reply-time{color:#888;font-size:9px}




    </style>
</head>
<body>
<div id="app">


    <div data-v-87ffcada="" class="article" id="watermark">
        <div data-v-87ffcada="" class="main main-app">
            <h1 data-v-87ffcada="" class="article-title pd">
                39è®²è‡ªå¢ä¸»é”®ä¸ºä»€ä¹ˆä¸æ˜¯è¿ç»­çš„
            </h1>
            <div data-v-87ffcada="" class="article-content typo common-content pd"><img data-v-87ffcada=""
                                                                                        src="https://static001.geekbang.org/resource/image/18/30/18938982e22dc8ff03c9449aa464e830.jpg">

                <div>
                    <audio controls="controls" height="100" width="100">
                        <source src="39è®²è‡ªå¢ä¸»é”®ä¸ºä»€ä¹ˆä¸æ˜¯è¿ç»­çš„.mp3" type="audio/mp3" />
                        <embed height="100" width="100" src="39è®²è‡ªå¢ä¸»é”®ä¸ºä»€ä¹ˆä¸æ˜¯è¿ç»­çš„.mp3" />
                    </audio>
                </div>
                <div data-v-87ffcada="" id="article-content" class="">
                    <div class="text">
                        <p>åœ¨<a href="https://time.geekbang.org/column/article/69236">ç¬¬4ç¯‡æ–‡ç« </a>ä¸­ï¼Œæˆ‘ä»¬æåˆ°è¿‡è‡ªå¢ä¸»é”®ï¼Œç”±äºè‡ªå¢ä¸»é”®å¯ä»¥è®©ä¸»é”®ç´¢å¼•å°½é‡åœ°ä¿æŒé€’å¢é¡ºåºæ’å…¥ï¼Œé¿å…äº†é¡µåˆ†è£‚ï¼Œå› æ­¤ç´¢å¼•æ›´ç´§å‡‘ã€‚</p><p>ä¹‹å‰æˆ‘è§è¿‡æœ‰çš„ä¸šåŠ¡è®¾è®¡ä¾èµ–äºè‡ªå¢ä¸»é”®çš„è¿ç»­æ€§ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œè¿™ä¸ªè®¾è®¡å‡è®¾è‡ªå¢ä¸»é”®æ˜¯è¿ç»­çš„ã€‚ä½†å®é™…ä¸Šï¼Œè¿™æ ·çš„å‡è®¾æ˜¯é”™çš„ï¼Œå› ä¸ºè‡ªå¢ä¸»é”®ä¸èƒ½ä¿è¯è¿ç»­é€’å¢ã€‚</p><p>ä»Šå¤©è¿™ç¯‡æ–‡ç« ï¼Œæˆ‘ä»¬å°±æ¥è¯´è¯´è¿™ä¸ªé—®é¢˜ï¼Œçœ‹çœ‹ä»€ä¹ˆæƒ…å†µä¸‹è‡ªå¢ä¸»é”®ä¼šå‡ºç° â€œç©ºæ´â€ï¼Ÿ</p><p>ä¸ºäº†ä¾¿äºè¯´æ˜ï¼Œæˆ‘ä»¬åˆ›å»ºä¸€ä¸ªè¡¨tï¼Œå…¶ä¸­idæ˜¯è‡ªå¢ä¸»é”®å­—æ®µã€cæ˜¯å”¯ä¸€ç´¢å¼•ã€‚</p><pre><code>CREATE TABLE `t` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `c` int(11) DEFAULT NULL,
  `d` int(11) DEFAULT NULL,
  PRIMARY KEY (`id`),
  UNIQUE KEY `c` (`c`)
) ENGINE=InnoDB;
</code></pre><h1>è‡ªå¢å€¼ä¿å­˜åœ¨å“ªå„¿ï¼Ÿ</h1><p>åœ¨è¿™ä¸ªç©ºè¡¨té‡Œé¢æ‰§è¡Œinsert into t values(null, 1, 1);æ’å…¥ä¸€è¡Œæ•°æ®ï¼Œå†æ‰§è¡Œshow create tableå‘½ä»¤ï¼Œå°±å¯ä»¥çœ‹åˆ°å¦‚ä¸‹å›¾æ‰€ç¤ºçš„ç»“æœï¼š</p><p><img src="https://static001.geekbang.org/resource/image/cb/ff/cb2637cada0201b18650f56875e94fff.png" alt=""></p><center><span class="reference">å›¾1 è‡ªåŠ¨ç”Ÿæˆçš„AUTO_INCREMENTå€¼</span></center><p>å¯ä»¥çœ‹åˆ°ï¼Œè¡¨å®šä¹‰é‡Œé¢å‡ºç°äº†ä¸€ä¸ªAUTO_INCREMENT=2ï¼Œè¡¨ç¤ºä¸‹ä¸€æ¬¡æ’å…¥æ•°æ®æ—¶ï¼Œå¦‚æœéœ€è¦è‡ªåŠ¨ç”Ÿæˆè‡ªå¢å€¼ï¼Œä¼šç”Ÿæˆid=2ã€‚</p><p>å…¶å®ï¼Œè¿™ä¸ªè¾“å‡ºç»“æœå®¹æ˜“å¼•èµ·è¿™æ ·çš„è¯¯è§£ï¼šè‡ªå¢å€¼æ˜¯ä¿å­˜åœ¨è¡¨ç»“æ„å®šä¹‰é‡Œçš„ã€‚å®é™…ä¸Šï¼Œ<strong>è¡¨çš„ç»“æ„å®šä¹‰å­˜æ”¾åœ¨åç¼€åä¸º.frmçš„æ–‡ä»¶ä¸­ï¼Œä½†æ˜¯å¹¶ä¸ä¼šä¿å­˜è‡ªå¢å€¼ã€‚</strong></p><p>ä¸åŒçš„å¼•æ“å¯¹äºè‡ªå¢å€¼çš„ä¿å­˜ç­–ç•¥ä¸åŒã€‚</p><ul>
<li>MyISAMå¼•æ“çš„è‡ªå¢å€¼ä¿å­˜åœ¨æ•°æ®æ–‡ä»¶ä¸­ã€‚</li>
<li>InnoDBå¼•æ“çš„è‡ªå¢å€¼ï¼Œå…¶å®æ˜¯ä¿å­˜åœ¨äº†å†…å­˜é‡Œï¼Œå¹¶ä¸”åˆ°äº†MySQL 8.0ç‰ˆæœ¬åï¼Œæ‰æœ‰äº†â€œè‡ªå¢å€¼æŒä¹…åŒ–â€çš„èƒ½åŠ›ï¼Œä¹Ÿå°±æ˜¯æ‰å®ç°äº†â€œå¦‚æœå‘ç”Ÿé‡å¯ï¼Œè¡¨çš„è‡ªå¢å€¼å¯ä»¥æ¢å¤ä¸ºMySQLé‡å¯å‰çš„å€¼â€ï¼Œå…·ä½“æƒ…å†µæ˜¯ï¼š
<ul>
<li>åœ¨MySQL 5.7åŠä¹‹å‰çš„ç‰ˆæœ¬ï¼Œè‡ªå¢å€¼ä¿å­˜åœ¨å†…å­˜é‡Œï¼Œå¹¶æ²¡æœ‰æŒä¹…åŒ–ã€‚æ¯æ¬¡é‡å¯åï¼Œç¬¬ä¸€æ¬¡æ‰“å¼€è¡¨çš„æ—¶å€™ï¼Œéƒ½ä¼šå»æ‰¾è‡ªå¢å€¼çš„æœ€å¤§å€¼max(id)ï¼Œç„¶åå°†max(id)+1ä½œä¸ºè¿™ä¸ªè¡¨å½“å‰çš„è‡ªå¢å€¼ã€‚ï»¿<br>
ä¸¾ä¾‹æ¥è¯´ï¼Œå¦‚æœä¸€ä¸ªè¡¨å½“å‰æ•°æ®è¡Œé‡Œæœ€å¤§çš„idæ˜¯10ï¼ŒAUTO_INCREMENT=11ã€‚è¿™æ—¶å€™ï¼Œæˆ‘ä»¬åˆ é™¤id=10çš„è¡Œï¼ŒAUTO_INCREMENTè¿˜æ˜¯11ã€‚ä½†å¦‚æœé©¬ä¸Šé‡å¯å®ä¾‹ï¼Œé‡å¯åè¿™ä¸ªè¡¨çš„AUTO_INCREMENTå°±ä¼šå˜æˆ10ã€‚ï»¿<br>
ä¹Ÿå°±æ˜¯è¯´ï¼ŒMySQLé‡å¯å¯èƒ½ä¼šä¿®æ”¹ä¸€ä¸ªè¡¨çš„AUTO_INCREMENTçš„å€¼ã€‚</li>
<li>åœ¨MySQL 8.0ç‰ˆæœ¬ï¼Œå°†è‡ªå¢å€¼çš„å˜æ›´è®°å½•åœ¨äº†redo logä¸­ï¼Œé‡å¯çš„æ—¶å€™ä¾é redo logæ¢å¤é‡å¯ä¹‹å‰çš„å€¼ã€‚</li>
</ul>
</li>
</ul><!-- [[[read_end]]] --><p>ç†è§£äº†MySQLå¯¹è‡ªå¢å€¼çš„ä¿å­˜ç­–ç•¥ä»¥åï¼Œæˆ‘ä»¬å†çœ‹çœ‹è‡ªå¢å€¼ä¿®æ”¹æœºåˆ¶ã€‚</p><h1>è‡ªå¢å€¼ä¿®æ”¹æœºåˆ¶</h1><p>åœ¨MySQLé‡Œé¢ï¼Œå¦‚æœå­—æ®µidè¢«å®šä¹‰ä¸ºAUTO_INCREMENTï¼Œåœ¨æ’å…¥ä¸€è¡Œæ•°æ®çš„æ—¶å€™ï¼Œè‡ªå¢å€¼çš„è¡Œä¸ºå¦‚ä¸‹ï¼š</p><ol>
<li>
<p>å¦‚æœæ’å…¥æ•°æ®æ—¶idå­—æ®µæŒ‡å®šä¸º0ã€null æˆ–æœªæŒ‡å®šå€¼ï¼Œé‚£ä¹ˆå°±æŠŠè¿™ä¸ªè¡¨å½“å‰çš„ AUTO_INCREMENTå€¼å¡«åˆ°è‡ªå¢å­—æ®µï¼›</p>
</li>
<li>
<p>å¦‚æœæ’å…¥æ•°æ®æ—¶idå­—æ®µæŒ‡å®šäº†å…·ä½“çš„å€¼ï¼Œå°±ç›´æ¥ä½¿ç”¨è¯­å¥é‡ŒæŒ‡å®šçš„å€¼ã€‚</p>
</li>
</ol><p>æ ¹æ®è¦æ’å…¥çš„å€¼å’Œå½“å‰è‡ªå¢å€¼çš„å¤§å°å…³ç³»ï¼Œè‡ªå¢å€¼çš„å˜æ›´ç»“æœä¹Ÿä¼šæœ‰æ‰€ä¸åŒã€‚å‡è®¾ï¼ŒæŸæ¬¡è¦æ’å…¥çš„å€¼æ˜¯Xï¼Œå½“å‰çš„è‡ªå¢å€¼æ˜¯Yã€‚</p><ol>
<li>
<p>å¦‚æœX&lt;Yï¼Œé‚£ä¹ˆè¿™ä¸ªè¡¨çš„è‡ªå¢å€¼ä¸å˜ï¼›</p>
</li>
<li>
<p>å¦‚æœXâ‰¥Yï¼Œå°±éœ€è¦æŠŠå½“å‰è‡ªå¢å€¼ä¿®æ”¹ä¸ºæ–°çš„è‡ªå¢å€¼ã€‚</p>
</li>
</ol><p><strong>æ–°çš„è‡ªå¢å€¼ç”Ÿæˆç®—æ³•æ˜¯</strong>ï¼šä»auto_increment_offsetå¼€å§‹ï¼Œä»¥auto_increment_incrementä¸ºæ­¥é•¿ï¼ŒæŒç»­å åŠ ï¼Œç›´åˆ°æ‰¾åˆ°ç¬¬ä¸€ä¸ªå¤§äºXçš„å€¼ï¼Œä½œä¸ºæ–°çš„è‡ªå¢å€¼ã€‚</p><p>å…¶ä¸­ï¼Œauto_increment_offset å’Œ auto_increment_incrementæ˜¯ä¸¤ä¸ªç³»ç»Ÿå‚æ•°ï¼Œåˆ†åˆ«ç”¨æ¥è¡¨ç¤ºè‡ªå¢çš„åˆå§‹å€¼å’Œæ­¥é•¿ï¼Œé»˜è®¤å€¼éƒ½æ˜¯1ã€‚</p><blockquote>
<p>å¤‡æ³¨ï¼šåœ¨ä¸€äº›åœºæ™¯ä¸‹ï¼Œä½¿ç”¨çš„å°±ä¸å…¨æ˜¯é»˜è®¤å€¼ã€‚æ¯”å¦‚ï¼ŒåŒMçš„ä¸»å¤‡ç»“æ„é‡Œè¦æ±‚åŒå†™çš„æ—¶å€™ï¼Œæˆ‘ä»¬å°±å¯èƒ½ä¼šè®¾ç½®æˆauto_increment_increment=2ï¼Œè®©ä¸€ä¸ªåº“çš„è‡ªå¢idéƒ½æ˜¯å¥‡æ•°ï¼Œå¦ä¸€ä¸ªåº“çš„è‡ªå¢idéƒ½æ˜¯å¶æ•°ï¼Œé¿å…ä¸¤ä¸ªåº“ç”Ÿæˆçš„ä¸»é”®å‘ç”Ÿå†²çªã€‚</p>
</blockquote><p>å½“auto_increment_offsetå’Œauto_increment_incrementéƒ½æ˜¯1çš„æ—¶å€™ï¼Œæ–°çš„è‡ªå¢å€¼ç”Ÿæˆé€»è¾‘å¾ˆç®€å•ï¼Œå°±æ˜¯ï¼š</p><ol>
<li>
<p>å¦‚æœå‡†å¤‡æ’å…¥çš„å€¼&gt;=å½“å‰è‡ªå¢å€¼ï¼Œæ–°çš„è‡ªå¢å€¼å°±æ˜¯â€œå‡†å¤‡æ’å…¥çš„å€¼+1â€ï¼›</p>
</li>
<li>
<p>å¦åˆ™ï¼Œè‡ªå¢å€¼ä¸å˜ã€‚</p>
</li>
</ol><p>è¿™å°±å¼•å…¥äº†æˆ‘ä»¬æ–‡ç« å¼€å¤´æåˆ°çš„é—®é¢˜ï¼Œåœ¨è¿™ä¸¤ä¸ªå‚æ•°éƒ½è®¾ç½®ä¸º1çš„æ—¶å€™ï¼Œè‡ªå¢ä¸»é”®idå´ä¸èƒ½ä¿è¯æ˜¯è¿ç»­çš„ï¼Œè¿™æ˜¯ä»€ä¹ˆåŸå› å‘¢ï¼Ÿ</p><h1>è‡ªå¢å€¼çš„ä¿®æ”¹æ—¶æœº</h1><p>è¦å›ç­”è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬å°±è¦çœ‹ä¸€ä¸‹è‡ªå¢å€¼çš„ä¿®æ”¹æ—¶æœºã€‚</p><p>å‡è®¾ï¼Œè¡¨té‡Œé¢å·²ç»æœ‰äº†(1,1,1)è¿™æ¡è®°å½•ï¼Œè¿™æ—¶æˆ‘å†æ‰§è¡Œä¸€æ¡æ’å…¥æ•°æ®å‘½ä»¤ï¼š</p><pre><code>insert into t values(null, 1, 1); 
</code></pre><p>è¿™ä¸ªè¯­å¥çš„æ‰§è¡Œæµç¨‹å°±æ˜¯ï¼š</p><ol>
<li>
<p>æ‰§è¡Œå™¨è°ƒç”¨InnoDBå¼•æ“æ¥å£å†™å…¥ä¸€è¡Œï¼Œä¼ å…¥çš„è¿™ä¸€è¡Œçš„å€¼æ˜¯(0,1,1);</p>
</li>
<li>
<p>InnoDBå‘ç°ç”¨æˆ·æ²¡æœ‰æŒ‡å®šè‡ªå¢idçš„å€¼ï¼Œè·å–è¡¨tå½“å‰çš„è‡ªå¢å€¼2ï¼›</p>
</li>
<li>
<p>å°†ä¼ å…¥çš„è¡Œçš„å€¼æ”¹æˆ(2,1,1);</p>
</li>
<li>
<p>å°†è¡¨çš„è‡ªå¢å€¼æ”¹æˆ3ï¼›</p>
</li>
<li>
<p>ç»§ç»­æ‰§è¡Œæ’å…¥æ•°æ®æ“ä½œï¼Œç”±äºå·²ç»å­˜åœ¨c=1çš„è®°å½•ï¼Œæ‰€ä»¥æŠ¥Duplicate key errorï¼Œè¯­å¥è¿”å›ã€‚</p>
</li>
</ol><p>å¯¹åº”çš„æ‰§è¡Œæµç¨‹å›¾å¦‚ä¸‹ï¼š</p><p><img src="https://static001.geekbang.org/resource/image/f1/d3/f16d89a6e7ad6e2cde13b32bb2292dd3.jpg" alt=""></p><center><span class="reference">å›¾2 insert(null, 1,1)å”¯ä¸€é”®å†²çª</span></center><p>å¯ä»¥çœ‹åˆ°ï¼Œè¿™ä¸ªè¡¨çš„è‡ªå¢å€¼æ”¹æˆ3ï¼Œæ˜¯åœ¨çœŸæ­£æ‰§è¡Œæ’å…¥æ•°æ®çš„æ“ä½œä¹‹å‰ã€‚è¿™ä¸ªè¯­å¥çœŸæ­£æ‰§è¡Œçš„æ—¶å€™ï¼Œå› ä¸ºç¢°åˆ°å”¯ä¸€é”®cå†²çªï¼Œæ‰€ä»¥id=2è¿™ä¸€è¡Œå¹¶æ²¡æœ‰æ’å…¥æˆåŠŸï¼Œä½†ä¹Ÿæ²¡æœ‰å°†è‡ªå¢å€¼å†æ”¹å›å»ã€‚</p><p>æ‰€ä»¥ï¼Œåœ¨è¿™ä¹‹åï¼Œå†æ’å…¥æ–°çš„æ•°æ®è¡Œæ—¶ï¼Œæ‹¿åˆ°çš„è‡ªå¢idå°±æ˜¯3ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå‡ºç°äº†è‡ªå¢ä¸»é”®ä¸è¿ç»­çš„æƒ…å†µã€‚</p><p>å¦‚å›¾3æ‰€ç¤ºå°±æ˜¯å®Œæ•´çš„æ¼”ç¤ºç»“æœã€‚</p><p><img src="https://static001.geekbang.org/resource/image/77/26/77b87820b649692a555f19b562d5d926.png" alt=""></p><center><span class="reference">å›¾3 ä¸€ä¸ªè‡ªå¢ä¸»é”®idä¸è¿ç»­çš„å¤ç°æ­¥éª¤</span></center><p>å¯ä»¥çœ‹åˆ°ï¼Œè¿™ä¸ªæ“ä½œåºåˆ—å¤ç°äº†ä¸€ä¸ªè‡ªå¢ä¸»é”®idä¸è¿ç»­çš„ç°åœº(æ²¡æœ‰id=2çš„è¡Œï¼‰ã€‚å¯è§ï¼Œ<strong>å”¯ä¸€é”®å†²çªæ˜¯å¯¼è‡´è‡ªå¢ä¸»é”®idä¸è¿ç»­çš„ç¬¬ä¸€ç§åŸå› ã€‚</strong></p><p>åŒæ ·åœ°ï¼Œäº‹åŠ¡<strong>å›æ»šä¹Ÿä¼šäº§ç”Ÿç±»ä¼¼çš„ç°è±¡ï¼Œè¿™å°±æ˜¯ç¬¬äºŒç§åŸå› ã€‚</strong></p><p>ä¸‹é¢è¿™ä¸ªè¯­å¥åºåˆ—å°±å¯ä»¥æ„é€ ä¸è¿ç»­çš„è‡ªå¢idï¼Œä½ å¯ä»¥è‡ªå·±éªŒè¯ä¸€ä¸‹ã€‚</p><pre><code>insert into t values(null,1,1);
begin;
insert into t values(null,2,2);
rollback;
insert into t values(null,2,2);
//æ’å…¥çš„è¡Œæ˜¯(3,2,2)
</code></pre><p>ä½ å¯èƒ½ä¼šé—®ï¼Œä¸ºä»€ä¹ˆåœ¨å‡ºç°å”¯ä¸€é”®å†²çªæˆ–è€…å›æ»šçš„æ—¶å€™ï¼ŒMySQLæ²¡æœ‰æŠŠè¡¨tçš„è‡ªå¢å€¼æ”¹å›å»å‘¢ï¼Ÿå¦‚æœæŠŠè¡¨tçš„å½“å‰è‡ªå¢å€¼ä»3æ”¹å›2ï¼Œå†æ’å…¥æ–°æ•°æ®çš„æ—¶å€™ï¼Œä¸å°±å¯ä»¥ç”Ÿæˆid=2çš„ä¸€è¡Œæ•°æ®äº†å—ï¼Ÿ</p><p>å…¶å®ï¼ŒMySQLè¿™ä¹ˆè®¾è®¡æ˜¯ä¸ºäº†æå‡æ€§èƒ½ã€‚æ¥ä¸‹æ¥ï¼Œæˆ‘å°±è·Ÿä½ åˆ†æä¸€ä¸‹è¿™ä¸ªè®¾è®¡æ€è·¯ï¼Œçœ‹çœ‹<strong>è‡ªå¢å€¼ä¸ºä»€ä¹ˆä¸èƒ½å›é€€ã€‚</strong></p><p>å‡è®¾æœ‰ä¸¤ä¸ªå¹¶è¡Œæ‰§è¡Œçš„äº‹åŠ¡ï¼Œåœ¨ç”³è¯·è‡ªå¢å€¼çš„æ—¶å€™ï¼Œä¸ºäº†é¿å…ä¸¤ä¸ªäº‹åŠ¡ç”³è¯·åˆ°ç›¸åŒçš„è‡ªå¢idï¼Œè‚¯å®šè¦åŠ é”ï¼Œç„¶åé¡ºåºç”³è¯·ã€‚</p><ol>
<li>
<p>å‡è®¾äº‹åŠ¡Aç”³è¯·åˆ°äº†id=2ï¼Œ äº‹åŠ¡Bç”³è¯·åˆ°id=3ï¼Œé‚£ä¹ˆè¿™æ—¶å€™è¡¨tçš„è‡ªå¢å€¼æ˜¯4ï¼Œä¹‹åç»§ç»­æ‰§è¡Œã€‚</p>
</li>
<li>
<p>äº‹åŠ¡Bæ­£ç¡®æäº¤äº†ï¼Œä½†äº‹åŠ¡Aå‡ºç°äº†å”¯ä¸€é”®å†²çªã€‚</p>
</li>
<li>
<p>å¦‚æœå…è®¸äº‹åŠ¡AæŠŠè‡ªå¢idå›é€€ï¼Œä¹Ÿå°±æ˜¯æŠŠè¡¨tçš„å½“å‰è‡ªå¢å€¼æ”¹å›2ï¼Œé‚£ä¹ˆå°±ä¼šå‡ºç°è¿™æ ·çš„æƒ…å†µï¼šè¡¨é‡Œé¢å·²ç»æœ‰id=3çš„è¡Œï¼Œè€Œå½“å‰çš„è‡ªå¢idå€¼æ˜¯2ã€‚</p>
</li>
<li>
<p>æ¥ä¸‹æ¥ï¼Œç»§ç»­æ‰§è¡Œçš„å…¶ä»–äº‹åŠ¡å°±ä¼šç”³è¯·åˆ°id=2ï¼Œç„¶åå†ç”³è¯·åˆ°id=3ã€‚è¿™æ—¶ï¼Œå°±ä¼šå‡ºç°æ’å…¥è¯­å¥æŠ¥é”™â€œä¸»é”®å†²çªâ€ã€‚</p>
</li>
</ol><p>è€Œä¸ºäº†è§£å†³è¿™ä¸ªä¸»é”®å†²çªï¼Œæœ‰ä¸¤ç§æ–¹æ³•ï¼š</p><ol>
<li>
<p>æ¯æ¬¡ç”³è¯·idä¹‹å‰ï¼Œå…ˆåˆ¤æ–­è¡¨é‡Œé¢æ˜¯å¦å·²ç»å­˜åœ¨è¿™ä¸ªidã€‚å¦‚æœå­˜åœ¨ï¼Œå°±è·³è¿‡è¿™ä¸ªidã€‚ä½†æ˜¯ï¼Œè¿™ä¸ªæ–¹æ³•çš„æˆæœ¬å¾ˆé«˜ã€‚å› ä¸ºï¼Œæœ¬æ¥ç”³è¯·idæ˜¯ä¸€ä¸ªå¾ˆå¿«çš„æ“ä½œï¼Œç°åœ¨è¿˜è¦å†å»ä¸»é”®ç´¢å¼•æ ‘ä¸Šåˆ¤æ–­idæ˜¯å¦å­˜åœ¨ã€‚</p>
</li>
<li>
<p>æŠŠè‡ªå¢idçš„é”èŒƒå›´æ‰©å¤§ï¼Œå¿…é¡»ç­‰åˆ°ä¸€ä¸ªäº‹åŠ¡æ‰§è¡Œå®Œæˆå¹¶æäº¤ï¼Œä¸‹ä¸€ä¸ªäº‹åŠ¡æ‰èƒ½å†ç”³è¯·è‡ªå¢idã€‚è¿™ä¸ªæ–¹æ³•çš„é—®é¢˜ï¼Œå°±æ˜¯é”çš„ç²’åº¦å¤ªå¤§ï¼Œç³»ç»Ÿå¹¶å‘èƒ½åŠ›å¤§å¤§ä¸‹é™ã€‚</p>
</li>
</ol><p>å¯è§ï¼Œè¿™ä¸¤ä¸ªæ–¹æ³•éƒ½ä¼šå¯¼è‡´æ€§èƒ½é—®é¢˜ã€‚é€ æˆè¿™äº›éº»çƒ¦çš„ç½ªé­ç¥¸é¦–ï¼Œå°±æ˜¯æˆ‘ä»¬å‡è®¾çš„è¿™ä¸ªâ€œå…è®¸è‡ªå¢idå›é€€â€çš„å‰æå¯¼è‡´çš„ã€‚</p><p>å› æ­¤ï¼ŒInnoDBæ”¾å¼ƒäº†è¿™ä¸ªè®¾è®¡ï¼Œè¯­å¥æ‰§è¡Œå¤±è´¥ä¹Ÿä¸å›é€€è‡ªå¢idã€‚ä¹Ÿæ­£æ˜¯å› ä¸ºè¿™æ ·ï¼Œæ‰€ä»¥æ‰åªä¿è¯äº†è‡ªå¢idæ˜¯é€’å¢çš„ï¼Œä½†ä¸ä¿è¯æ˜¯è¿ç»­çš„ã€‚</p><h1>è‡ªå¢é”çš„ä¼˜åŒ–</h1><p>å¯ä»¥çœ‹åˆ°ï¼Œè‡ªå¢idé”å¹¶ä¸æ˜¯ä¸€ä¸ªäº‹åŠ¡é”ï¼Œè€Œæ˜¯æ¯æ¬¡ç”³è¯·å®Œå°±é©¬ä¸Šé‡Šæ”¾ï¼Œä»¥ä¾¿å…è®¸åˆ«çš„äº‹åŠ¡å†ç”³è¯·ã€‚å…¶å®ï¼Œåœ¨MySQL 5.1ç‰ˆæœ¬ä¹‹å‰ï¼Œå¹¶ä¸æ˜¯è¿™æ ·çš„ã€‚</p><p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä¼šå…ˆç»™ä½ ä»‹ç»ä¸‹è‡ªå¢é”è®¾è®¡çš„å†å²ï¼Œè¿™æ ·æœ‰åŠ©äºä½ åˆ†ææ¥ä¸‹æ¥çš„ä¸€ä¸ªé—®é¢˜ã€‚</p><p>åœ¨MySQL 5.0ç‰ˆæœ¬çš„æ—¶å€™ï¼Œè‡ªå¢é”çš„èŒƒå›´æ˜¯è¯­å¥çº§åˆ«ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå¦‚æœä¸€ä¸ªè¯­å¥ç”³è¯·äº†ä¸€ä¸ªè¡¨è‡ªå¢é”ï¼Œè¿™ä¸ªé”ä¼šç­‰è¯­å¥æ‰§è¡Œç»“æŸä»¥åæ‰é‡Šæ”¾ã€‚æ˜¾ç„¶ï¼Œè¿™æ ·è®¾è®¡ä¼šå½±å“å¹¶å‘åº¦ã€‚</p><p>MySQL 5.1.22ç‰ˆæœ¬å¼•å…¥äº†ä¸€ä¸ªæ–°ç­–ç•¥ï¼Œæ–°å¢å‚æ•°innodb_autoinc_lock_modeï¼Œé»˜è®¤å€¼æ˜¯1ã€‚</p><ol>
<li>
<p>è¿™ä¸ªå‚æ•°çš„å€¼è¢«è®¾ç½®ä¸º0æ—¶ï¼Œè¡¨ç¤ºé‡‡ç”¨ä¹‹å‰MySQL 5.0ç‰ˆæœ¬çš„ç­–ç•¥ï¼Œå³è¯­å¥æ‰§è¡Œç»“æŸåæ‰é‡Šæ”¾é”ï¼›</p>
</li>
<li>
<p>è¿™ä¸ªå‚æ•°çš„å€¼è¢«è®¾ç½®ä¸º1æ—¶ï¼š</p>
<ul>
<li>æ™®é€šinsertè¯­å¥ï¼Œè‡ªå¢é”åœ¨ç”³è¯·ä¹‹åå°±é©¬ä¸Šé‡Šæ”¾ï¼›</li>
<li>ç±»ä¼¼insert â€¦ selectè¿™æ ·çš„æ‰¹é‡æ’å…¥æ•°æ®çš„è¯­å¥ï¼Œè‡ªå¢é”è¿˜æ˜¯è¦ç­‰è¯­å¥ç»“æŸåæ‰è¢«é‡Šæ”¾ï¼›</li>
</ul>
</li>
<li>
<p>è¿™ä¸ªå‚æ•°çš„å€¼è¢«è®¾ç½®ä¸º2æ—¶ï¼Œæ‰€æœ‰çš„ç”³è¯·è‡ªå¢ä¸»é”®çš„åŠ¨ä½œéƒ½æ˜¯ç”³è¯·åå°±é‡Šæ”¾é”ã€‚</p>
</li>
</ol><p>ä½ ä¸€å®šæœ‰ä¸¤ä¸ªç–‘é—®ï¼š<strong>ä¸ºä»€ä¹ˆé»˜è®¤è®¾ç½®ä¸‹ï¼Œinsert â€¦ select è¦ä½¿ç”¨è¯­å¥çº§çš„é”ï¼Ÿä¸ºä»€ä¹ˆè¿™ä¸ªå‚æ•°çš„é»˜è®¤å€¼ä¸æ˜¯2ï¼Ÿ</strong></p><p>ç­”æ¡ˆæ˜¯ï¼Œè¿™ä¹ˆè®¾è®¡è¿˜æ˜¯ä¸ºäº†æ•°æ®çš„ä¸€è‡´æ€§ã€‚</p><p>æˆ‘ä»¬ä¸€èµ·æ¥çœ‹ä¸€ä¸‹è¿™ä¸ªåœºæ™¯ï¼š</p><p><img src="https://static001.geekbang.org/resource/image/e0/df/e0a69e151277de54a8262657e4ec89df.png" alt=""></p><center><span class="reference">å›¾4 æ‰¹é‡æ’å…¥æ•°æ®çš„è‡ªå¢é”</span></center><p>åœ¨è¿™ä¸ªä¾‹å­é‡Œï¼Œæˆ‘å¾€è¡¨t1ä¸­æ’å…¥äº†4è¡Œæ•°æ®ï¼Œç„¶ååˆ›å»ºäº†ä¸€ä¸ªç›¸åŒç»“æ„çš„è¡¨t2ï¼Œç„¶åä¸¤ä¸ªsessionåŒæ—¶æ‰§è¡Œå‘è¡¨t2ä¸­æ’å…¥æ•°æ®çš„æ“ä½œã€‚</p><p>ä½ å¯ä»¥è®¾æƒ³ä¸€ä¸‹ï¼Œå¦‚æœsession Bæ˜¯ç”³è¯·äº†è‡ªå¢å€¼ä»¥åé©¬ä¸Šå°±é‡Šæ”¾è‡ªå¢é”ï¼Œé‚£ä¹ˆå°±å¯èƒ½å‡ºç°è¿™æ ·çš„æƒ…å†µï¼š</p><ul>
<li>session Bå…ˆæ’å…¥äº†ä¸¤ä¸ªè®°å½•ï¼Œ(1,1,1)ã€(2,2,2)ï¼›</li>
<li>ç„¶åï¼Œsession Aæ¥ç”³è¯·è‡ªå¢idå¾—åˆ°id=3ï¼Œæ’å…¥äº†ï¼ˆ3,5,5)ï¼›</li>
<li>ä¹‹åï¼Œsession Bç»§ç»­æ‰§è¡Œï¼Œæ’å…¥ä¸¤æ¡è®°å½•(4,3,3)ã€ (5,4,4)ã€‚</li>
</ul><p>ä½ å¯èƒ½ä¼šè¯´ï¼Œè¿™ä¹Ÿæ²¡å…³ç³»å§ï¼Œæ¯•ç«Ÿsession Bçš„è¯­ä¹‰æœ¬èº«å°±æ²¡æœ‰è¦æ±‚è¡¨t2çš„æ‰€æœ‰è¡Œçš„æ•°æ®éƒ½è·Ÿsession Aç›¸åŒã€‚</p><p>æ˜¯çš„ï¼Œä»æ•°æ®é€»è¾‘ä¸Šçœ‹æ˜¯å¯¹çš„ã€‚ä½†æ˜¯ï¼Œå¦‚æœæˆ‘ä»¬ç°åœ¨çš„binlog_format=statementï¼Œä½ å¯ä»¥è®¾æƒ³ä¸‹ï¼Œbinlogä¼šæ€ä¹ˆè®°å½•å‘¢ï¼Ÿ</p><p>ç”±äºä¸¤ä¸ªsessionæ˜¯åŒæ—¶æ‰§è¡Œæ’å…¥æ•°æ®å‘½ä»¤çš„ï¼Œæ‰€ä»¥binlogé‡Œé¢å¯¹è¡¨t2çš„æ›´æ–°æ—¥å¿—åªæœ‰ä¸¤ç§æƒ…å†µï¼šè¦ä¹ˆå…ˆè®°session Açš„ï¼Œè¦ä¹ˆå…ˆè®°session Bçš„ã€‚</p><p>ä½†ä¸è®ºæ˜¯å“ªä¸€ç§ï¼Œè¿™ä¸ªbinlogæ‹¿å»ä»åº“æ‰§è¡Œï¼Œæˆ–è€…ç”¨æ¥æ¢å¤ä¸´æ—¶å®ä¾‹ï¼Œå¤‡åº“å’Œä¸´æ—¶å®ä¾‹é‡Œé¢ï¼Œsession Bè¿™ä¸ªè¯­å¥æ‰§è¡Œå‡ºæ¥ï¼Œç”Ÿæˆçš„ç»“æœé‡Œé¢ï¼Œidéƒ½æ˜¯è¿ç»­çš„ã€‚è¿™æ—¶ï¼Œè¿™ä¸ªåº“å°±å‘ç”Ÿäº†æ•°æ®ä¸ä¸€è‡´ã€‚</p><p>ä½ å¯ä»¥åˆ†æä¸€ä¸‹ï¼Œå‡ºç°è¿™ä¸ªé—®é¢˜çš„åŸå› æ˜¯ä»€ä¹ˆï¼Ÿ</p><p>å…¶å®ï¼Œè¿™æ˜¯å› ä¸ºåŸåº“session Bçš„insertè¯­å¥ï¼Œç”Ÿæˆçš„idä¸è¿ç»­ã€‚è¿™ä¸ªä¸è¿ç»­çš„idï¼Œç”¨statementæ ¼å¼çš„binlogæ¥ä¸²è¡Œæ‰§è¡Œï¼Œæ˜¯æ‰§è¡Œä¸å‡ºæ¥çš„ã€‚</p><p>è€Œè¦è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæœ‰ä¸¤ç§æ€è·¯ï¼š</p><ol>
<li>
<p>ä¸€ç§æ€è·¯æ˜¯ï¼Œè®©åŸåº“çš„æ‰¹é‡æ’å…¥æ•°æ®è¯­å¥ï¼Œå›ºå®šç”Ÿæˆè¿ç»­çš„idå€¼ã€‚æ‰€ä»¥ï¼Œè‡ªå¢é”ç›´åˆ°è¯­å¥æ‰§è¡Œç»“æŸæ‰é‡Šæ”¾ï¼Œå°±æ˜¯ä¸ºäº†è¾¾åˆ°è¿™ä¸ªç›®çš„ã€‚</p>
</li>
<li>
<p>å¦ä¸€ç§æ€è·¯æ˜¯ï¼Œåœ¨binlogé‡Œé¢æŠŠæ’å…¥æ•°æ®çš„æ“ä½œéƒ½å¦‚å®è®°å½•è¿›æ¥ï¼Œåˆ°å¤‡åº“æ‰§è¡Œçš„æ—¶å€™ï¼Œä¸å†ä¾èµ–äºè‡ªå¢ä¸»é”®å»ç”Ÿæˆã€‚è¿™ç§æƒ…å†µï¼Œå…¶å®å°±æ˜¯innodb_autoinc_lock_modeè®¾ç½®ä¸º2ï¼ŒåŒæ—¶binlog_formatè®¾ç½®ä¸ºrowã€‚</p>
</li>
</ol><p>å› æ­¤ï¼Œ<strong>åœ¨ç”Ÿäº§ä¸Šï¼Œå°¤å…¶æ˜¯æœ‰insert â€¦ selectè¿™ç§æ‰¹é‡æ’å…¥æ•°æ®çš„åœºæ™¯æ—¶ï¼Œä»å¹¶å‘æ’å…¥æ•°æ®æ€§èƒ½çš„è§’åº¦è€ƒè™‘ï¼Œæˆ‘å»ºè®®ä½ è¿™æ ·è®¾ç½®ï¼šinnodb_autoinc_lock_mode=2 ï¼Œå¹¶ä¸” binlog_format=row</strong>.è¿™æ ·åšï¼Œæ—¢èƒ½æå‡å¹¶å‘æ€§ï¼Œåˆä¸ä¼šå‡ºç°æ•°æ®ä¸€è‡´æ€§é—®é¢˜ã€‚</p><p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œæˆ‘è¿™é‡Œè¯´çš„<strong>æ‰¹é‡æ’å…¥æ•°æ®ï¼ŒåŒ…å«çš„è¯­å¥ç±»å‹æ˜¯insert â€¦ selectã€replace â€¦ selectå’Œload dataè¯­å¥ã€‚</strong></p><p>ä½†æ˜¯ï¼Œåœ¨æ™®é€šçš„insertè¯­å¥é‡Œé¢åŒ…å«å¤šä¸ªvalueå€¼çš„æƒ…å†µä¸‹ï¼Œå³ä½¿innodb_autoinc_lock_modeè®¾ç½®ä¸º1ï¼Œä¹Ÿä¸ä¼šç­‰è¯­å¥æ‰§è¡Œå®Œæˆæ‰é‡Šæ”¾é”ã€‚å› ä¸ºè¿™ç±»è¯­å¥åœ¨ç”³è¯·è‡ªå¢idçš„æ—¶å€™ï¼Œæ˜¯å¯ä»¥ç²¾ç¡®è®¡ç®—å‡ºéœ€è¦å¤šå°‘ä¸ªidçš„ï¼Œç„¶åä¸€æ¬¡æ€§ç”³è¯·ï¼Œç”³è¯·å®Œæˆåé”å°±å¯ä»¥é‡Šæ”¾äº†ã€‚</p><p>ä¹Ÿå°±æ˜¯è¯´ï¼Œæ‰¹é‡æ’å…¥æ•°æ®çš„è¯­å¥ï¼Œä¹‹æ‰€ä»¥éœ€è¦è¿™ä¹ˆè®¾ç½®ï¼Œæ˜¯å› ä¸ºâ€œä¸çŸ¥é“è¦é¢„å…ˆç”³è¯·å¤šå°‘ä¸ªidâ€ã€‚</p><p>æ—¢ç„¶é¢„å…ˆä¸çŸ¥é“è¦ç”³è¯·å¤šå°‘ä¸ªè‡ªå¢idï¼Œé‚£ä¹ˆä¸€ç§ç›´æ¥çš„æƒ³æ³•å°±æ˜¯éœ€è¦ä¸€ä¸ªæ—¶ç”³è¯·ä¸€ä¸ªã€‚ä½†å¦‚æœä¸€ä¸ªselect â€¦ insertè¯­å¥è¦æ’å…¥10ä¸‡è¡Œæ•°æ®ï¼ŒæŒ‰ç…§è¿™ä¸ªé€»è¾‘çš„è¯å°±è¦ç”³è¯·10ä¸‡æ¬¡ã€‚æ˜¾ç„¶ï¼Œè¿™ç§ç”³è¯·è‡ªå¢idçš„ç­–ç•¥ï¼Œåœ¨å¤§æ‰¹é‡æ’å…¥æ•°æ®çš„æƒ…å†µä¸‹ï¼Œä¸ä½†é€Ÿåº¦æ…¢ï¼Œè¿˜ä¼šå½±å“å¹¶å‘æ’å…¥çš„æ€§èƒ½ã€‚</p><p>å› æ­¤ï¼Œå¯¹äºæ‰¹é‡æ’å…¥æ•°æ®çš„è¯­å¥ï¼ŒMySQLæœ‰ä¸€ä¸ªæ‰¹é‡ç”³è¯·è‡ªå¢idçš„ç­–ç•¥ï¼š</p><ol>
<li>
<p>è¯­å¥æ‰§è¡Œè¿‡ç¨‹ä¸­ï¼Œç¬¬ä¸€æ¬¡ç”³è¯·è‡ªå¢idï¼Œä¼šåˆ†é…1ä¸ªï¼›</p>
</li>
<li>
<p>1ä¸ªç”¨å®Œä»¥åï¼Œè¿™ä¸ªè¯­å¥ç¬¬äºŒæ¬¡ç”³è¯·è‡ªå¢idï¼Œä¼šåˆ†é…2ä¸ªï¼›</p>
</li>
<li>
<p>2ä¸ªç”¨å®Œä»¥åï¼Œè¿˜æ˜¯è¿™ä¸ªè¯­å¥ï¼Œç¬¬ä¸‰æ¬¡ç”³è¯·è‡ªå¢idï¼Œä¼šåˆ†é…4ä¸ªï¼›</p>
</li>
<li>
<p>ä¾æ­¤ç±»æ¨ï¼ŒåŒä¸€ä¸ªè¯­å¥å»ç”³è¯·è‡ªå¢idï¼Œæ¯æ¬¡ç”³è¯·åˆ°çš„è‡ªå¢idä¸ªæ•°éƒ½æ˜¯ä¸Šä¸€æ¬¡çš„ä¸¤å€ã€‚</p>
</li>
</ol><p>ä¸¾ä¸ªä¾‹å­ï¼Œæˆ‘ä»¬ä¸€èµ·çœ‹çœ‹ä¸‹é¢çš„è¿™ä¸ªè¯­å¥åºåˆ—ï¼š</p><pre><code>insert into t values(null, 1,1);
insert into t values(null, 2,2);
insert into t values(null, 3,3);
insert into t values(null, 4,4);
create table t2 like t;
insert into t2(c,d) select c,d from t;
insert into t2 values(null, 5,5);
</code></pre><p>insertâ€¦selectï¼Œå®é™…ä¸Šå¾€è¡¨t2ä¸­æ’å…¥äº†4è¡Œæ•°æ®ã€‚ä½†æ˜¯ï¼Œè¿™å››è¡Œæ•°æ®æ˜¯åˆ†ä¸‰æ¬¡ç”³è¯·çš„è‡ªå¢idï¼Œç¬¬ä¸€æ¬¡ç”³è¯·åˆ°äº†id=1ï¼Œç¬¬äºŒæ¬¡è¢«åˆ†é…äº†id=2å’Œid=3ï¼Œ ç¬¬ä¸‰æ¬¡è¢«åˆ†é…åˆ°id=4åˆ°id=7ã€‚</p><p>ç”±äºè¿™æ¡è¯­å¥å®é™…åªç”¨ä¸Šäº†4ä¸ªidï¼Œæ‰€ä»¥id=5åˆ°id=7å°±è¢«æµªè´¹æ‰äº†ã€‚ä¹‹åï¼Œå†æ‰§è¡Œinsert into t2 values(null, 5,5)ï¼Œå®é™…ä¸Šæ’å…¥çš„æ•°æ®å°±æ˜¯ï¼ˆ8,5,5)ã€‚</p><p><strong>è¿™æ˜¯ä¸»é”®idå‡ºç°è‡ªå¢idä¸è¿ç»­çš„ç¬¬ä¸‰ç§åŸå› ã€‚</strong></p><h1>å°ç»“</h1><p>ä»Šå¤©ï¼Œæˆ‘ä»¬ä»â€œè‡ªå¢ä¸»é”®ä¸ºä»€ä¹ˆä¼šå‡ºç°ä¸è¿ç»­çš„å€¼â€è¿™ä¸ªé—®é¢˜å¼€å§‹ï¼Œé¦–å…ˆè®¨è®ºäº†è‡ªå¢å€¼çš„å­˜å‚¨ã€‚</p><p>åœ¨MyISAMå¼•æ“é‡Œé¢ï¼Œè‡ªå¢å€¼æ˜¯è¢«å†™åœ¨æ•°æ®æ–‡ä»¶ä¸Šçš„ã€‚è€Œåœ¨InnoDBä¸­ï¼Œè‡ªå¢å€¼æ˜¯è¢«è®°å½•åœ¨å†…å­˜çš„ã€‚MySQLç›´åˆ°8.0ç‰ˆæœ¬ï¼Œæ‰ç»™InnoDBè¡¨çš„è‡ªå¢å€¼åŠ ä¸Šäº†æŒä¹…åŒ–çš„èƒ½åŠ›ï¼Œç¡®ä¿é‡å¯å‰åä¸€ä¸ªè¡¨çš„è‡ªå¢å€¼ä¸å˜ã€‚</p><p>ç„¶åï¼Œæˆ‘å’Œä½ åˆ†äº«äº†åœ¨ä¸€ä¸ªè¯­å¥æ‰§è¡Œè¿‡ç¨‹ä¸­ï¼Œè‡ªå¢å€¼æ”¹å˜çš„æ—¶æœºï¼Œåˆ†æäº†ä¸ºä»€ä¹ˆMySQLåœ¨äº‹åŠ¡å›æ»šçš„æ—¶å€™ä¸èƒ½å›æ”¶è‡ªå¢idã€‚</p><p>MySQL 5.1.22ç‰ˆæœ¬å¼€å§‹å¼•å…¥çš„å‚æ•°innodb_autoinc_lock_modeï¼Œæ§åˆ¶äº†è‡ªå¢å€¼ç”³è¯·æ—¶çš„é”èŒƒå›´ã€‚ä»å¹¶å‘æ€§èƒ½çš„è§’åº¦è€ƒè™‘ï¼Œæˆ‘å»ºè®®ä½ å°†å…¶è®¾ç½®ä¸º2ï¼ŒåŒæ—¶å°†binlog_formatè®¾ç½®ä¸ºrowã€‚æˆ‘åœ¨å‰é¢çš„æ–‡ç« ä¸­å…¶å®å¤šæ¬¡æåˆ°ï¼Œbinlog_formatè®¾ç½®ä¸ºrowï¼Œæ˜¯å¾ˆæœ‰å¿…è¦çš„ã€‚ä»Šå¤©çš„ä¾‹å­ç»™è¿™ä¸ªç»“è®ºå¤šäº†ä¸€ä¸ªç†ç”±ã€‚</p><p>æœ€åï¼Œæˆ‘ç»™ä½ ç•™ä¸€ä¸ªæ€è€ƒé¢˜å§ã€‚</p><p>åœ¨æœ€åä¸€ä¸ªä¾‹å­ä¸­ï¼Œæ‰§è¡Œinsert into t2(c,d) select c,d from t;è¿™ä¸ªè¯­å¥çš„æ—¶å€™ï¼Œå¦‚æœéš”ç¦»çº§åˆ«æ˜¯å¯é‡å¤è¯»ï¼ˆrepeatable readï¼‰ï¼Œbinlog_format=statementã€‚è¿™ä¸ªè¯­å¥ä¼šå¯¹è¡¨tçš„æ‰€æœ‰è®°å½•å’Œé—´éš™åŠ é”ã€‚</p><p>ä½ è§‰å¾—ä¸ºä»€ä¹ˆéœ€è¦è¿™ä¹ˆåšå‘¢ï¼Ÿ</p><p>ä½ å¯ä»¥æŠŠä½ çš„æ€è€ƒå’Œåˆ†æå†™åœ¨è¯„è®ºåŒºï¼Œæˆ‘ä¼šåœ¨ä¸‹ä¸€ç¯‡æ–‡ç« å’Œä½ è®¨è®ºè¿™ä¸ªé—®é¢˜ã€‚æ„Ÿè°¢ä½ çš„æ”¶å¬ï¼Œä¹Ÿæ¬¢è¿ä½ æŠŠè¿™ç¯‡æ–‡ç« åˆ†äº«ç»™æ›´å¤šçš„æœ‹å‹ä¸€èµ·é˜…è¯»ã€‚</p><h1>ä¸ŠæœŸé—®é¢˜æ—¶é—´</h1><p>ä¸ŠæœŸçš„é—®é¢˜æ˜¯ï¼Œå¦‚æœä½ ç»´æŠ¤çš„MySQLç³»ç»Ÿé‡Œæœ‰å†…å­˜è¡¨ï¼Œæ€ä¹ˆé¿å…å†…å­˜è¡¨çªç„¶ä¸¢æ•°æ®ï¼Œç„¶åå¯¼è‡´ä¸»å¤‡åŒæ­¥åœæ­¢çš„æƒ…å†µã€‚</p><p>æˆ‘ä»¬å‡è®¾çš„æ˜¯ä¸»åº“æš‚æ—¶ä¸èƒ½ä¿®æ”¹å¼•æ“ï¼Œé‚£ä¹ˆå°±æŠŠå¤‡åº“çš„å†…å­˜è¡¨å¼•æ“å…ˆéƒ½æ”¹æˆInnoDBã€‚å¯¹äºæ¯ä¸ªå†…å­˜è¡¨ï¼Œæ‰§è¡Œ</p><pre><code>set sql_log_bin=off;
alter table tbl_name engine=innodb;
</code></pre><p>è¿™æ ·å°±èƒ½é¿å…å¤‡åº“é‡å¯çš„æ—¶å€™ï¼Œæ•°æ®ä¸¢å¤±çš„é—®é¢˜ã€‚</p><p>ç”±äºä¸»åº“é‡å¯åï¼Œä¼šå¾€binlogé‡Œé¢å†™â€œdelete from tbl_nameâ€ï¼Œè¿™ä¸ªå‘½ä»¤ä¼ åˆ°å¤‡åº“ï¼Œå¤‡åº“çš„åŒåçš„è¡¨æ•°æ®ä¹Ÿä¼šè¢«æ¸…ç©ºã€‚</p><p>å› æ­¤ï¼Œå°±ä¸ä¼šå‡ºç°ä¸»å¤‡åŒæ­¥åœæ­¢çš„é—®é¢˜ã€‚</p><p>å¦‚æœç”±äºä¸»åº“å¼‚å¸¸é‡å¯ï¼Œè§¦å‘äº†HAï¼Œè¿™æ—¶å€™æˆ‘ä»¬ä¹‹å‰ä¿®æ”¹è¿‡å¼•æ“çš„å¤‡åº“å˜æˆäº†ä¸»åº“ã€‚è€ŒåŸæ¥çš„ä¸»åº“å˜æˆäº†æ–°å¤‡åº“ï¼Œåœ¨æ–°å¤‡åº“ä¸ŠæŠŠæ‰€æœ‰çš„å†…å­˜è¡¨ï¼ˆè¿™æ—¶å€™è¡¨é‡Œæ²¡æ•°æ®ï¼‰éƒ½æ”¹æˆInnoDBè¡¨ã€‚</p><p>æ‰€ä»¥ï¼Œå¦‚æœæˆ‘ä»¬ä¸èƒ½ç›´æ¥ä¿®æ”¹ä¸»åº“ä¸Šçš„è¡¨å¼•æ“ï¼Œå¯ä»¥é…ç½®ä¸€ä¸ªè‡ªåŠ¨å·¡æ£€çš„å·¥å…·ï¼Œåœ¨å¤‡åº“ä¸Šå‘ç°å†…å­˜è¡¨å°±æŠŠå¼•æ“æ”¹äº†ã€‚</p><p>åŒæ—¶ï¼Œè·Ÿä¸šåŠ¡å¼€å‘åŒå­¦çº¦å®šå¥½å»ºè¡¨è§„åˆ™ï¼Œé¿å…åˆ›å»ºæ–°çš„å†…å­˜è¡¨ã€‚</p><p>è¯„è®ºåŒºç•™è¨€ç‚¹èµæ¿ï¼š</p><blockquote>
<p>å¤§å®¶åœ¨æ˜¥èŠ‚æœŸé—´è¿˜åšæŒçœ‹ä¸“æ ï¼Œå¹¶ä¸”æ·±å…¥åœ°æ€è€ƒå’Œå›å¤ï¼Œç»™å¤§å®¶ç‚¹èµã€‚<br>
@é•¿æ° åŒå­¦æåˆ°çš„å°†æ•°æ®ä¿å­˜åˆ°InnoDBè¡¨ç”¨æ¥æŒä¹…åŒ–ï¼Œä¹Ÿæ˜¯ä¸€ä¸ªæ–¹æ³•ã€‚ä¸è¿‡ï¼Œæˆ‘è¿˜æ˜¯å»ºè®®é‡œåº•æŠ½è–ªï¼Œç›´æ¥ä¿®æ”¹å¤‡åº“çš„å†…å­˜è¡¨çš„å¼•æ“ã€‚<br>
@è€æ¨åŒå¿— æåˆ°çš„æ˜¯ä¸»åº“å¼‚å¸¸é‡å¯çš„åœºæ™¯ï¼Œè¿™æ—¶å€™æ˜¯ä¸ä¼šæŠ¥ä¸»å¤‡ä¸ä¸€è‡´çš„ï¼Œå› ä¸ºä¸»åº“é‡å¯çš„æ—¶å€™å†™äº†delete from tbl_nameï¼Œä¸»å¤‡çš„å†…å­˜è¡¨éƒ½æ¸…ç©ºäº†ã€‚</p>
</blockquote><p><img src="https://static001.geekbang.org/resource/image/09/77/09c1073f99cf71d2fb162a716b5fa577.jpg" alt=""></p>
                    </div>
                </div>

            </div>
            <div data-v-87ffcada="" class="article-comments pd"><h2 data-v-87ffcada=""><span
                    data-v-87ffcada="">ç²¾é€‰ç•™è¨€</span></h2>
                <ul data-v-87ffcada="">
                    
                    <li data-v-87ffcada="" class="comment-item"><img
                            src="https://static001.geekbang.org/account/avatar/00/14/05/d4/e06bf86d.jpg" class="avatar">
                        <div class="info">
                            <div class="hd"><span class="username">é•¿æ°</span>
                            </div>
                            <div class="bd">åœ¨æœ€åä¸€ä¸ªä¾‹å­ä¸­ï¼Œæ‰§è¡Œ insert into t2(c,d) select c,d from t; è¿™ä¸ªè¯­å¥çš„æ—¶å€™ï¼Œå¦‚æœéš”ç¦»çº§åˆ«æ˜¯å¯é‡å¤è¯»ï¼ˆrepeatable readï¼‰ï¼Œbinlog_format=statementã€‚è¿™ä¸ªè¯­å¥ä¼šå¯¹è¡¨ t çš„æ‰€æœ‰è®°å½•å’Œé—´éš™åŠ é”ã€‚<br>ä½ è§‰å¾—ä¸ºä»€ä¹ˆéœ€è¦è¿™ä¹ˆåšå‘¢ï¼Ÿ<br>å‡å¦‚åŸåº“ä¸å¯¹tè¡¨æ‰€æœ‰è®°å½•å’Œé—´éš™åŠ é”ï¼Œå¦‚æœæœ‰å…¶ä»–äº‹ç‰©æ–°å¢æ•°æ®å¹¶å…ˆä¸è¿™ä¸ªæ‰¹é‡æ“ä½œæäº¤ï¼Œç”±äºäº‹ç‰©çš„éš”ç¦»çº§åˆ«æ˜¯å¯é‡å¤è¯»ï¼Œt2æ˜¯çœ‹ä¸åˆ°æ–°å¢çš„æ•°æ®çš„ã€‚ä½†æ˜¯è®°å½•çš„binlogæ˜¯statementæ ¼å¼ï¼Œå¤‡åº“æˆ–åŸºäºbinlogæ¢å¤çš„ä¸´æ—¶åº“ï¼Œt2ä¼šçœ‹åˆ°æ–°å¢çš„æ•°æ®ï¼Œå‡ºç°æ•°æ®ä¸ä¸€è‡´çš„æƒ…å†µã€‚ <br></div>
                            <span class="time">2019-02-11 15:57</span>
                            
                            <div class="reply">
                                <div class="reply-hd"><span>ä½œè€…å›å¤</span></div>
                                <p class="reply-content">ğŸ‘ è¿™æ˜¯ä¸€ä¸ªå…¸å‹çš„åœºæ™¯</p>
                                <p class="reply-time">2019-02-11 18:04</p>
                            </div>
                            
                        </div>
                    </li>
                    
                    <li data-v-87ffcada="" class="comment-item"><img
                            src="https://static001.geekbang.org/account/avatar/00/11/40/5e/b8fada94.jpg" class="avatar">
                        <div class="info">
                            <div class="hd"><span class="username">Ryoma</span>
                            </div>
                            <div class="bd">åœ¨8.0.3ç‰ˆæœ¬åï¼Œinnodb_autoinc_lock_modeé»˜è®¤å€¼å·²æ˜¯2ï¼Œåœ¨binlog_formaté»˜è®¤å€¼ä¸ºrowçš„å‰æä¸‹ï¼Œæƒ³æ¥ä¹Ÿæ˜¯ä¸ºäº†å¢åŠ å¹¶å‘ã€‚ <br><br>https:&#47;&#47;dev.mysql.com&#47;doc&#47;refman&#47;8.0&#47;en&#47;innodb-parameters.html#sysvar_innodb_autoinc_lock_mode <br></div>
                            <span class="time">2019-02-14 22:21</span>
                            
                        </div>
                    </li>
                    
                    <li data-v-87ffcada="" class="comment-item"><img
                            src="https://static001.geekbang.org/account/avatar/00/11/ec/fd/bad2abf5.jpg" class="avatar">
                        <div class="info">
                            <div class="hd"><span class="username">å¸½å­æ‰äº†</span>
                            </div>
                            <div class="bd">è€å¸ˆæ‚¨å¥½ï¼Œæˆ‘æœ‰ä¸€ä¸ªæ—¶åºé—®é¢˜ï¼Œæƒ³è¯·æ•™ä¸€ä¸‹ã€‚<br>ä»è¿™ç¯‡æ–‡ç« çš„ä»‹ç»æ¥çœ‹ï¼Œè·å–è‡ªå¢idå’Œå†™binlogæ˜¯æœ‰å…ˆåé¡ºåºçš„ã€‚<br>é‚£ä¹ˆåœ¨binlogä¸ºstatementçš„æƒ…å†µä¸‹ã€‚<br>è¯­å¥Aå…ˆè·å–id=1ï¼Œç„¶åBè·å–id=2ï¼Œæ¥ç€Bæäº¤ï¼Œå†™binlogï¼Œå†Aå†™binlogã€‚<br>è¿™ä¸ªæ—¶å€™å¦‚æœbinlogé‡æ”¾ï¼Œæ˜¯ä¸æ˜¯ä¼šå‘ç”ŸBçš„idä¸º1ï¼Œè€ŒAçš„idä¸º2çš„ä¸ä¸€è‡´çš„æƒ…å†µï¼Ÿ <br></div>
                            <span class="time">2019-02-13 20:49</span>
                            
                            <div class="reply">
                                <div class="reply-hd"><span>ä½œè€…å›å¤</span></div>
                                <p class="reply-content">å¥½é—®é¢˜ï¼Œä¸ä¼š<br>å› ä¸ºbinlogåœ¨è®°å½•è¿™ç§å¸¦è‡ªå¢å€¼çš„è¯­å¥ä¹‹å‰ï¼Œä¼šåœ¨å‰é¢å¤šä¸€å¥ï¼Œç”¨äºæŒ‡å®šâ€œæ¥ä¸‹æ¥è¿™ä¸ªè¯­å¥è¦éœ€è¦çš„ è‡ªå¢IDå€¼æ˜¯å¤šå°‘â€ï¼Œè€Œè¿™ä¸ªå€¼ï¼Œæ˜¯åœ¨ä¸»åº“ä¸Šè¿™ä¸€è¡Œæ’å…¥æˆåŠŸåå¯¹åº”çš„è‡ªå¢å€¼ï¼Œæ‰€ä»¥æ˜¯ä¸€è‡´çš„</p>
                                <p class="reply-time">2019-02-14 14:58</p>
                            </div>
                            
                        </div>
                    </li>
                    
                    <li data-v-87ffcada="" class="comment-item"><img
                            src="https://static001.geekbang.org/account/avatar/00/11/8a/3e/30c05bce.jpg" class="avatar">
                        <div class="info">
                            <div class="hd"><span class="username">aliang</span>
                            </div>
                            <div class="bd">è€å¸ˆï¼Œæˆ‘ä»¬è¿™è¾¹æœ‰çš„å¼€å‘ä¸å–œæ¬¢ç”¨mysqlè‡ªå¸¦çš„ä¸»é”®è‡ªå¢åŠŸèƒ½ï¼Œè€Œæ˜¯åœ¨ç¨‹åºä¸­æ§åˆ¶ä¸»é”®ï¼ˆæ—¶é—´+ä¸šåŠ¡+æœºå™¨+åºåˆ—ï¼Œbigintç±»å‹ï¼Œå®é™…é•¿åº¦æœ‰17ä½ï¼Œå…¶ä¸­åºåˆ—ä¿å­˜åœ¨å†…å­˜ä¸­ï¼Œæ¯æ¬¡é€’å¢ï¼Œä¸»é”®å€¼ä¸è¿ç»­ï¼‰ã€‚ç†ç”±æ˜¯<br>ï¼ˆ1ï¼‰é€šè¿‡è¿™æ ·çš„ä¸»é”®å¯ä»¥ç›´æ¥å®šä½æ•°æ®ï¼Œå‡å°‘ç´¢å¼•ï¼ˆ2ï¼‰å¦‚æœè‡ªå¢ï¼Œå¿…é¡»å…ˆå­˜æ•°æ®å¾—åˆ°ä¸»é”®æ‰å¯ç»§ç»­ä¸‹é¢çš„ç¨‹åºï¼Œå¦‚æœè‡ªå·±è®¡ç®—ä¸»é”®ï¼Œå¯ä»¥åœ¨å…¥åº“å‰è¿›è¡Œå¼‚æ­¥å¤„ç†<br>ï¼ˆ3ï¼‰aè¡¨è¦insertå¾—åˆ°ä¸»é”®ï¼Œç„¶åå¤„ç†bè¡¨ï¼Œç„¶åæ ¹æ®æ¡ä»¶è¿˜è¦update aè¡¨ã€‚å¦‚æœç¨‹åºè‡ªå·±æ§åˆ¶ï¼Œå°±ä¸ç”¨å…ˆinsert aè¡¨ï¼Œæ•°æ®å¯ä»¥åœ¨å†…å­˜ä¸­ï¼Œç›´åˆ°æœ€åä¸€æ¬¡æäº¤ã€‚ï¼ˆå¯¹äºaè¡¨ï¼Œæœ¬æ¥æ˜¯insert+updateï¼Œæœ€ååªæ˜¯ä¸€æ¡insertï¼Œå°‘ä¸€æ¬¡æ•°æ®åº“æ“ä½œï¼‰<br>æˆ‘æƒ³è¯·é—®çš„æ˜¯ï¼š<br>ï¼ˆ1ï¼‰é’ˆå¯¹ç†ç”±1ï¼Œæ˜¯å¦å¯ä»¥ç”¨ç»„åˆç´¢å¼•æ›¿ä»£ï¼Ÿ<br>ï¼ˆ2ï¼‰é’ˆå¯¹ç†ç”±2ï¼Œæ˜¯å¦mysqlè‡ªèº«çš„ä¸»é”®è‡ªå¢åˆ†é…é€»è¾‘å°±å·²ç»èƒ½å®ç°äº†ï¼Ÿ<br>ï¼ˆ3ï¼‰é’ˆå¯¹ç†ç”±3ï¼Œä¸»é”®æ›´é•¿æ„å‘³ç€æ›´å¤§çš„ç´¢å¼•ï¼ˆä¸»é”®ç´¢å¼•å’Œæ™®é€šç´¢å¼•ï¼‰ï¼Œä½ è§‰å¾—æ€æ ·åšä¼šæ›´å¥½å‘¢ <br></div>
                            <span class="time">2019-02-12 16:34</span>
                            
                            <div class="reply">
                                <div class="reply-hd"><span>ä½œè€…å›å¤</span></div>
                                <p class="reply-content">â€œï¼ˆæ—¶é—´+ä¸šåŠ¡+æœºå™¨+åºåˆ—ï¼Œbigintç±»å‹ï¼Œå®é™…é•¿åº¦æœ‰17ä½ï¼Œå…¶ä¸­åºåˆ—ä¿å­˜åœ¨å†…å­˜ä¸­ï¼Œæ¯æ¬¡é€’å¢ï¼Œä¸»é”®å€¼ä¸è¿ç»­ï¼‰ã€‚â€ ----bigintå°±æ˜¯8ä½ï¼Œè¿™ä¸ªä½ éœ€è¦ç¡®å®šä¸€ä¸‹ã€‚å¦‚æœæ˜¯8ä½çš„è¿˜å¥½ï¼Œå¦‚æœæ˜¯17ä½çš„å­—ç¬¦ä¸²ï¼Œå°±æ¯”è¾ƒè€—è´¹ç©ºé—´ï¼›<br><br>ï¼ˆ1ï¼‰å¦‚æœâ€œåºåˆ—â€æ˜¯é€’å¢çš„ï¼Œè¿˜æ˜¯ä¸èƒ½ç›´æ¥ç”¨æ¥ä½“ç°ä¸šåŠ¡é€»è¾‘å§ï¼Ÿ åˆ›å»ºæœ‰ä¸šåŠ¡æ„ä¹‰çš„å­—æ®µç´¢å¼•ä¼°è®¡è¿˜æ˜¯çœä¸äº†çš„ ï¼Ÿ<br>ï¼ˆ2ï¼‰mysqlç¡®å®åšä¸åˆ°â€œæ’å…¥ä¹‹å‰å°±å…ˆç®—å¥½æ¥ä¸‹æ¥çš„idæ˜¯å¤šå°‘â€ï¼Œä¸€èˆ¬éƒ½æ˜¯insertæ‰§è¡Œå®Œæˆåï¼Œå†æ‰§è¡Œselect last_insert_id<br> (3) å…ˆinsert aå†update bå†update aï¼Œç¡®å®çœ‹ä¸Šå»æ¯”è¾ƒå¥‡æ€ªï¼Œä¸è¿‡æ„Ÿè§‰è¿™ä¸ªé€»è¾‘åº”è¯¥æ˜¯å¯ä»¥ä¼˜åŒ–çš„ï¼Œä¸åº”è¯¥ä½œä¸ºâ€œä¸»é”®é€‰æ‹©â€çš„ä¸€ä¸ªä¾æ®ã€‚ä½ å¯å¦è„±æ•ä¸€ä¸‹ï¼ŒæŠŠæ¨¡æ‹Ÿçš„è¡¨ç»“æ„å’Œä¸šåŠ¡é€»è¾‘è¯´ä¸‹ï¼Œçœ‹çœ‹æ˜¯ä¸æ˜¯å¯ä»¥ä¼˜åŒ–çš„ã€‚<br><br>æ€»ä¹‹ï¼ŒæŒ‰ç…§ä½ è¯´çš„â€œæ—¶é—´+ä¸šåŠ¡+æœºå™¨+åºåˆ—â€è¿™ç§æ¨¡å¼ï¼Œæœ‰ç‚¹åƒç”¨uuidï¼Œä¸»è¦çš„é—®é¢˜è¿˜æ˜¯ï¼Œå¦‚æœè¿™ä¸ªè¡¨çš„ç´¢å¼•å¤šï¼Œå ç”¨çš„ç©ºé—´æ¯”è¾ƒå¤§</p>
                                <p class="reply-time">2019-02-12 21:45</p>
                            </div>
                            
                        </div>
                    </li>
                    
                    <li data-v-87ffcada="" class="comment-item"><img
                            src="https://static001.geekbang.org/account/avatar/00/13/df/90/68408c1b.jpg" class="avatar">
                        <div class="info">
                            <div class="hd"><span class="username">éƒ­çƒŠåƒçº</span>
                            </div>
                            <div class="bd">è¯·æ•™è€å¸ˆä¸ªé¢å¤–è¯é¢˜ select concat(truncate(sum(data_length)&#47;1024&#47;1024,2),&#39;MB&#39;) as data_size,<br>concat(truncate(sum(max_data_length)&#47;1024&#47;1024,2),&#39;MB&#39;) as max_data_size,<br>concat(truncate(sum(data_free)&#47;1024&#47;1024,2),&#39;MB&#39;) as data_free,<br>concat(truncate(sum(index_length)&#47;1024&#47;1024,2),&#39;MB&#39;) as index_size<br>from information_schema.tables where TABLE_SCHEMA = &#39;databasename&#39;;  ç½‘ä¸Šå¹¿ä¸ºæµä¼ çš„è¿™ä¸ªç»Ÿè®¡çš„è¡¨å¤§å°çš„æ–¹æ³•å‡†ç¡®å— mysqlå†…éƒ¨æ˜¯æ€ä¹ˆç»Ÿè®¡çš„ï¼Ÿå¹¶ä¸”data_freeè¿™ä¸ªmydqlå†…éƒ¨åˆæ˜¯æ€ä¹ˆç»Ÿè®¡çš„ æ˜¯é‡‡æ ·8ä¸ªé¡µæ¥è¯„ä¼°æ•´è¡¨å— å¹¶ä¸”å®éªŒæ€»æ„Ÿè§‰è¿™æ ·ç»Ÿè®¡ä¸å‡†å•Š åˆ°åº•é è°±å— æ±‚èµæ•™æ±‚èµæ•™å•Š å›°æƒ‘å¥½ä¹…äº†  <br></div>
                            <span class="time">2019-02-12 15:17</span>
                            
                        </div>
                    </li>
                    
                    <li data-v-87ffcada="" class="comment-item"><img
                            src="http://thirdwx.qlogo.cn/mmopen/vi_32/Nr8o80t7TVwlXk7eoFYQpknWiayM5NbWKSf4DicTmYxGSoKoUwNurxjvDflgpZu6I9ChWdNr14gbABgq1ibP2cvWg/132" class="avatar">
                        <div class="info">
                            <div class="hd"><span class="username">æ‚Ÿç©º</span>
                            </div>
                            <div class="bd">èµ¶ä¸Šäº†è¿›åº¦ï¼ŒæŠŠæ˜¥èŠ‚æœŸé—´çš„è¡¥å›æ¥äº† <br></div>
                            <span class="time">2019-02-12 11:49</span>
                            
                            <div class="reply">
                                <div class="reply-hd"><span>ä½œè€…å›å¤</span></div>
                                <p class="reply-content">ğŸ‘</p>
                                <p class="reply-time">2019-02-12 21:26</p>
                            </div>
                            
                        </div>
                    </li>
                    
                    <li data-v-87ffcada="" class="comment-item"><img
                            src="https://static001.geekbang.org/account/avatar/00/10/f7/b1/b05a2156.jpg" class="avatar">
                        <div class="info">
                            <div class="hd"><span class="username">we</span>
                            </div>
                            <div class="bd">insert into t values(null,1,1);<br>begin;<br>insert into t values(null,2,2);<br>rolllack;<br>insert into t values(null,2,2);<br>&#47;&#47; æ’å…¥çš„è¡Œæ˜¯ (3,2,2)<br><br>è€å¸ˆ é‡Œé¢æ˜¯ rollback å§ <br></div>
                            <span class="time">2019-02-12 10:09</span>
                            
                            <div class="reply">
                                <div class="reply-hd"><span>ä½œè€…å›å¤</span></div>
                                <p class="reply-content">æ˜¯çš„ï¼Œæˆ‘æ‰‹æ®‹äº†ã€‚ã€‚<br><br>å¤šè°¢æŒ‡å‡ºï¼Œå‘èµ·å‹˜è¯¯äº†å“ˆ<br></p>
                                <p class="reply-time">2019-02-12 21:33</p>
                            </div>
                            
                        </div>
                    </li>
                    
                    <li data-v-87ffcada="" class="comment-item"><img
                            src="https://static001.geekbang.org/account/avatar/00/11/5b/fc/5c24080b.jpg" class="avatar">
                        <div class="info">
                            <div class="hd"><span class="username">ç‰›åœ¨å¤©ä¸Šé£</span>
                            </div>
                            <div class="bd">è€å¸ˆï¼Œè¯·é—®äº§ç”Ÿå¤§é‡çš„eventäº‹ä»¶ä¼šå¯¹mysqlæœåŠ¡å™¨æœ‰ä»€ä¹ˆå½±å“ï¼Ÿä¸»è¦æ˜¯å“ªå‡ ä¸ªæ–¹é¢çš„å½±å“ï¼Ÿ <br></div>
                            <span class="time">2019-02-12 09:00</span>
                            
                            <div class="reply">
                                <div class="reply-hd"><span>ä½œè€…å›å¤</span></div>
                                <p class="reply-content">ä¹Ÿæ²¡å•¥ï¼Œä¸»è¦å°±æ˜¯ä¸å¥½ç®¡ç†ã€‚ã€‚<br>æ¯•ç«Ÿeventæ˜¯å†™åœ¨MySQLé‡Œçš„ï¼Œå†™ç¨‹åºçš„åŒå­¦ä¸ä¸€å®šä¼šè®°å¾—ã€‚<br>æ¯”è¾ƒå»ºè®®å°†è¿™ç±»é€»è¾‘å†™åœ¨åº”ç”¨ç¨‹åºé‡Œé¢</p>
                                <p class="reply-time">2019-02-12 21:31</p>
                            </div>
                            
                        </div>
                    </li>
                    
                    <li data-v-87ffcada="" class="comment-item"><img
                            src="https://static001.geekbang.org/account/avatar/00/11/8a/3e/30c05bce.jpg" class="avatar">
                        <div class="info">
                            <div class="hd"><span class="username">aliang</span>
                            </div>
                            <div class="bd">è€å¸ˆï¼Œæ‰§è¡ŒSELECT `ID`, `USER`, `HOST`, `DB`, `COMMAND`, `TIME`, `STATE`, LEFT(`INFO`, 51200) AS `Info` FROM `information_schema`.`PROCESSLIST`;åä¸æ—¶æœ‰COMMANDä¸ºkilledä½†infoä¸ºnullçš„è¿›ç¨‹ï¼Œè¯·é—®æ˜¯æ€ä¹ˆå›äº‹å‘¢ <br></div>
                            <span class="time">2019-02-11 16:30</span>
                            
                            <div class="reply">
                                <div class="reply-hd"><span>ä½œè€…å›å¤</span></div>
                                <p class="reply-content">å°±è¡¨ç¤ºè¿˜åœ¨â€œkilledâ€çŠ¶æ€ï¼Œçœ‹ä¸€ä¸‹32ç¯‡å“ˆ</p>
                                <p class="reply-time">2019-02-11 18:07</p>
                            </div>
                            
                        </div>
                    </li>
                    
                    <li data-v-87ffcada="" class="comment-item"><img
                            src="https://static001.geekbang.org/account/avatar/00/11/15/69/fc60d1f4.jpg" class="avatar">
                        <div class="info">
                            <div class="hd"><span class="username">é™ˆååº”</span>
                            </div>
                            <div class="bd">é˜²æ­¢insertè¯­å¥æ‰§è¡Œè¿‡ç¨‹ä¸­ï¼ŒåŸè¡¨æœ‰æ–°å¢æ•°æ®ï¼Œè¿›è€Œå¯¼è‡´çš„æ’å…¥æ–°è¡¨çš„æ•°æ®æ¯”åŸè¡¨å°‘ <br></div>
                            <span class="time">2019-02-11 11:29</span>
                            
                            <div class="reply">
                                <div class="reply-hd"><span>ä½œè€…å›å¤</span></div>
                                <p class="reply-content">ç¡®å®æ˜¯è€ƒè™‘å¹¶å‘ , ä¸è¿‡å¹¶ä¸ä¼šæœ‰è¿™ä¸ªç°è±¡å“¦ï¼Œå› ä¸ºä¸€ä¸ªè¯­å¥æ‰§è¡ŒæœŸé—´è¿˜æ˜¯æœ‰ä¸€è‡´æ€§è§†å›¾çš„ã€‚<br><br>æŠŠbinlogåŠ è¿›å»è€ƒè™‘ä¸‹å“ˆ<br></p>
                                <p class="reply-time">2019-02-11 16:22</p>
                            </div>
                            
                        </div>
                    </li>
                    


                </ul>
            </div>
        </div>
    </div>
</div>
</body>
</html>